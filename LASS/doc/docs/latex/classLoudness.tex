\hypertarget{classLoudness}{
\section{Loudness Class Reference}
\label{classLoudness}\index{Loudness@{Loudness}}
}
{\tt \#include $<$Loudness.h$>$}

Collaboration diagram for Loudness:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=128pt]{classLoudness__coll__graph}
\end{center}
\end{figure}
\subsection*{Static Public Member Functions}
\begin{CompactItemize}
\item 
void \hyperlink{classLoudness_e0}{calculate} (\hyperlink{classSound}{Sound} \&snd, \hyperlink{Types_8h_a4}{m\_\-rate\_\-type} rate=\hyperlink{Types_8h_a6}{DEFAULT\_\-LOUDNESS\_\-RATE})
\end{CompactItemize}
\subsection*{Static Private Member Functions}
\begin{CompactItemize}
\item 
int \hyperlink{classLoudness_h0}{critical\-Band\-Index} (\hyperlink{Types_8h_a3}{m\_\-value\_\-type} frequency)
\end{CompactItemize}
\subsection*{Static Private Attributes}
\begin{CompactItemize}
\item 
const  int \hyperlink{classLoudness_v0}{LOWER\_\-BOUND} = 0
\item 
const  int \hyperlink{classLoudness_v1}{UPPER\_\-BOUND} = 1
\item 
const  int \hyperlink{classLoudness_v2}{CENTROID} = 2
\item 
const  int \hyperlink{classLoudness_v3}{BANDWIDTH} = 3
\item 
const  int \hyperlink{classLoudness_v4}{F\_\-FACTOR} = 4
\item 
const  int \hyperlink{classLoudness_v5}{OFFSET} = 5
\item 
const  int \hyperlink{classLoudness_v6}{SLOPE} = 6
\item 
const  double \hyperlink{classLoudness_v7}{BANDS} \mbox{[}24\mbox{]}\mbox{[}7\mbox{]}
\item 
const  int \hyperlink{classLoudness_v8}{NUM\_\-BANDS} = 24
\end{CompactItemize}


\subsection{Detailed Description}
This performs loudness calculations on sound objects:

STEPS:

\begin{enumerate}
\item Separate all partials into groups of critical bands.\begin{itemize}
\item This division is done by the partial's frequency\end{itemize}
\item Find the loudest partial by virtue of it's Wave\-Shape variable.\begin{itemize}
\item And thus, find the highest Wave\-Shape value.\end{itemize}
\item Calculate the Band Gamma for each critical band. \mbox{[}eq 2.34\mbox{]}\begin{itemize}
\item The max Wave\-Shape from step 2 becomes the max\-Wave\-Shape here.\item band\-Gamma = 0\item for each partial\begin{itemize}
\item band\-Gamma += pow( (this\-Wave\-Shape / max\-Wave\-Shape), (1.0 / log10(2.0) $\ast$ this\_\-band\_\-b\_\-value) );\end{itemize}
\item band\-Gamma = pow(band\-Gamma, (log10(2.0) $\ast$ this\_\-band\_\-b\_\-value) );\end{itemize}
\item Find the maximum band-gamma: max\-Gamma\item Calculate the numerator needed for \mbox{[}eq 2.37\mbox{]}\begin{itemize}
\item gamma\-Total = 0;\item for each band\begin{itemize}
\item gamma\-Total += band\-Gamma $\ast$ this\_\-band\_\-f\_\-value;\end{itemize}
\item numerator = desired\-Sones\-Value / (max\-Gamma + gamma\-Total);\end{itemize}
\item Calculate scaling factor for each partial in each of the bands.\begin{itemize}
\item (uses max\-Wave\-Shape \& numerator)\item \mbox{[}eq 2.37\mbox{]} Ls = (this\-Wave\-Shape / max\-Wave\-Shape ) $\ast$ numerator;\item \mbox{[}eq 2.4\mbox{]} Lp = log(ls) / log(2.0) $\ast$ 10.0 + 40.0;\item \mbox{[}eq 2.13\mbox{]} L = (-a/b) + (1/b) $\ast$ Lp\item \mbox{[}eq 2.5\mbox{]} A = pow( 10.0, (-1.0 $\ast$ ( (120.0 - L) / 20.0 ) ) );\item Scaling\-Factor = A / this\-Wave\-Shape Phew - done! \begin{Desc}
\item[Author:]Braden Kowitz \end{Desc}
\end{itemize}
\end{enumerate}




Definition at line 79 of file Loudness.h.

\subsection{Member Function Documentation}
\hypertarget{classLoudness_e0}{
\index{Loudness@{Loudness}!calculate@{calculate}}
\index{calculate@{calculate}!Loudness@{Loudness}}
\subsubsection[calculate]{\setlength{\rightskip}{0pt plus 5cm}void Loudness::calculate (\hyperlink{classSound}{Sound} \& {\em snd}, \hyperlink{Types_8h_a4}{m\_\-rate\_\-type} {\em rate} = \hyperlink{Types_8h_a6}{DEFAULT\_\-LOUDNESS\_\-RATE})\hspace{0.3cm}{\tt  \mbox{[}static\mbox{]}}}}
\label{classLoudness_e0}


This performs the Loudness calculation on a sound object. Basically, it looks at each partial's WAVE\_\-SHPE, FREQUENCY, and RELATIVE\_\-AMPLITUDE parameters. It looks at the sounds LOUDNESS parameter, and sets the LOUDNES\_\-SCALER \hyperlink{classDynamicVariable}{Dynamic\-Variable} for each partial. 

Definition at line 45 of file Loudness.cpp.

References BANDS, critical\-Band\-Index(), DURATION, F\_\-FACTOR, FREQUENCY, Collection$<$ Partial $>$::get(), Dynamic\-Variable::get\-Max\-Value(), Parameter\-Lib$<$ Partial\-Static\-Param, Partial\-Dynamic\-Param $>$::get\-Param(), Parameter\-Lib$<$ Sound\-Static\-Param, Sound\-Dynamic\-Param $>$::get\-Param(), LOUDNESS, LOUDNESS\_\-SCALAR, m\_\-rate\_\-type, m\_\-sample\_\-count\_\-type, m\_\-time\_\-type, m\_\-value\_\-type, NUM\_\-BANDS, RELATIVE\_\-AMPLITUDE, Dynamic\-Variable::set\-Duration(), Parameter\-Lib$<$ Partial\-Static\-Param, Partial\-Dynamic\-Param $>$::set\-Param(), Dynamic\-Variable::set\-Sampling\-Rate(), Collection$<$ Partial $>$::size(), Dynamic\-Variable::value\-Iterator(), and WAVE\_\-SHAPE.

Referenced by Sound::render().\hypertarget{classLoudness_h0}{
\index{Loudness@{Loudness}!criticalBandIndex@{criticalBandIndex}}
\index{criticalBandIndex@{criticalBandIndex}!Loudness@{Loudness}}
\subsubsection[criticalBandIndex]{\setlength{\rightskip}{0pt plus 5cm}int Loudness::critical\-Band\-Index (\hyperlink{Types_8h_a3}{m\_\-value\_\-type} {\em frequency})\hspace{0.3cm}{\tt  \mbox{[}static, private\mbox{]}}}}
\label{classLoudness_h0}


This function returns the critical band index that matches the specified frequency. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em frequency}]The freqency of the band to return \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]The index of a \hyperlink{classLoudness_1_1CriticalBand}{Critical\-Band} \end{Desc}


Definition at line 161 of file Loudness.cpp.

References BANDS, LOWER\_\-BOUND, m\_\-value\_\-type, NUM\_\-BANDS, and UPPER\_\-BOUND.

Referenced by calculate().

\subsection{Member Data Documentation}
\hypertarget{classLoudness_v7}{
\index{Loudness@{Loudness}!BANDS@{BANDS}}
\index{BANDS@{BANDS}!Loudness@{Loudness}}
\subsubsection[BANDS]{\setlength{\rightskip}{0pt plus 5cm}const  double \hyperlink{classLoudness_v7}{Loudness::BANDS}\hspace{0.3cm}{\tt  \mbox{[}static, private\mbox{]}}}}
\label{classLoudness_v7}


{\bf Initial value:}

\footnotesize\begin{verbatim} 
  {
    {2.000000E+01,1.000000E+02,5.000000E+01,8.000000E+01,7.500099E-02,3.434098E+01,7.426288E-01},
    {1.000000E+02,2.000000E+02,1.500000E+02,1.000000E+02,3.000000E-01,1.102623E+01,8.863131E-01},
    {2.000000E+02,3.000000E+02,2.500000E+02,1.000000E+02,1.800000E-01,3.658798E+00,9.307306E-01},
    {3.000000E+02,4.000000E+02,3.500000E+02,1.000000E+02,1.300000E-01,6.079359E-01,9.552449E-01},
    {4.000000E+02,5.100000E+02,4.500000E+02,1.100000E+02,1.113188E-01,-1.050592E+00,9.798435E-01},
    {5.100000E+02,6.300000E+02,5.700000E+02,1.200000E+02,9.825261E-02,-1.768491E+00,9.962857E-01},
    {6.300000E+02,7.700000E+02,7.000000E+02,1.400000E+02,9.388891E-02,-1.488782E+00,9.993805E-01},
    {7.700000E+02,9.200000E+02,8.400000E+02,1.500000E+02,8.463656E-02,-7.874900E-01,1.001088E+00},
    {9.200000E+02,1.080000E+03,1.000000E+03,1.600000E+02,7.749530E-02,-2.397041E-02,9.996908E-01},
    {1.080000E+03,1.270000E+03,1.170000E+03,1.900000E+02,7.818675E-02,3.330517E-01,9.926001E-01},
    {1.270000E+03,1.480000E+03,1.370000E+03,2.100000E+02,7.454711E-02,2.924882E-01,9.866766E-01},
    {1.480000E+03,1.720000E+03,1.600000E+03,2.400000E+02,7.344415E-02,-9.319628E-02,9.820759E-01},
    {1.720000E+03,2.000000E+03,1.850000E+03,2.800000E+02,7.366146E-02,-7.555149E-01,9.725524E-01},
    {2.000000E+03,2.320000E+03,2.150000E+03,3.200000E+02,7.269603E-02,-1.368559E+00,9.559184E-01},
    {2.320000E+03,2.700000E+03,2.500000E+03,3.800000E+02,7.400790E-02,-2.310496E+00,9.405730E-01},
    {2.700000E+03,3.150000E+03,2.900000E+03,4.500000E+02,7.500003E-02,-4.106658E+00,9.374723E-01},
    {3.150000E+03,3.700000E+03,3.400000E+03,5.500000E+02,7.773245E-02,-5.443059E+00,9.383848E-01},
    {3.700000E+03,4.400000E+03,4.000000E+03,7.000000E+02,8.272464E-02,-5.612481E+00,9.440814E-01},
    {4.400000E+03,5.300000E+03,4.800000E+03,9.000000E+02,8.793907E-02,-4.374397E+00,9.618959E-01},
    {5.300000E+03,6.400000E+03,5.800000E+03,1.100000E+03,8.895339E-02,1.201688E-01,9.705871E-01},
     {6.400000E+03,7.700000E+03,7.000000E+03,1.300000E+03,8.745852E-02,6.446360E+00,9.652756E-01},
    {7.700000E+03,9.500000E+03,8.500000E+03,1.800000E+03,9.774416E-02,1.050712E+01,9.499248E-01},
    {9.500000E+03,1.200000E+04,1.050000E+04,2.500000E+03,1.074515E-01,8.187814E+00,9.339424E-01},
    {1.200000E+04,1.550000E+04,1.350000E+04,3.500000E+03,1.167188E-01,-1.822547E+00,9.533570E-01},
  }
\end{verbatim}\normalsize 
This holds the \hyperlink{classLoudness_1_1CriticalBand}{Critical\-Band} data. 

Definition at line 262 of file Loudness.cpp.

Referenced by calculate(), and critical\-Band\-Index().\hypertarget{classLoudness_v3}{
\index{Loudness@{Loudness}!BANDWIDTH@{BANDWIDTH}}
\index{BANDWIDTH@{BANDWIDTH}!Loudness@{Loudness}}
\subsubsection[BANDWIDTH]{\setlength{\rightskip}{0pt plus 5cm}const int \hyperlink{classLoudness_v3}{Loudness::BANDWIDTH} = 3\hspace{0.3cm}{\tt  \mbox{[}static, private\mbox{]}}}}
\label{classLoudness_v3}




Definition at line 166 of file Loudness.h.\hypertarget{classLoudness_v2}{
\index{Loudness@{Loudness}!CENTROID@{CENTROID}}
\index{CENTROID@{CENTROID}!Loudness@{Loudness}}
\subsubsection[CENTROID]{\setlength{\rightskip}{0pt plus 5cm}const int \hyperlink{classLoudness_v2}{Loudness::CENTROID} = 2\hspace{0.3cm}{\tt  \mbox{[}static, private\mbox{]}}}}
\label{classLoudness_v2}




Definition at line 165 of file Loudness.h.\hypertarget{classLoudness_v4}{
\index{Loudness@{Loudness}!F_FACTOR@{F\_\-FACTOR}}
\index{F_FACTOR@{F\_\-FACTOR}!Loudness@{Loudness}}
\subsubsection[F\_\-FACTOR]{\setlength{\rightskip}{0pt plus 5cm}const int \hyperlink{classLoudness_v4}{Loudness::F\_\-FACTOR} = 4\hspace{0.3cm}{\tt  \mbox{[}static, private\mbox{]}}}}
\label{classLoudness_v4}




Definition at line 167 of file Loudness.h.

Referenced by calculate().\hypertarget{classLoudness_v0}{
\index{Loudness@{Loudness}!LOWER_BOUND@{LOWER\_\-BOUND}}
\index{LOWER_BOUND@{LOWER\_\-BOUND}!Loudness@{Loudness}}
\subsubsection[LOWER\_\-BOUND]{\setlength{\rightskip}{0pt plus 5cm}const int \hyperlink{classLoudness_v0}{Loudness::LOWER\_\-BOUND} = 0\hspace{0.3cm}{\tt  \mbox{[}static, private\mbox{]}}}}
\label{classLoudness_v0}


These are the indices of the Critical Band Field. 

Definition at line 163 of file Loudness.h.

Referenced by critical\-Band\-Index().\hypertarget{classLoudness_v8}{
\index{Loudness@{Loudness}!NUM_BANDS@{NUM\_\-BANDS}}
\index{NUM_BANDS@{NUM\_\-BANDS}!Loudness@{Loudness}}
\subsubsection[NUM\_\-BANDS]{\setlength{\rightskip}{0pt plus 5cm}const int \hyperlink{classLoudness_v8}{Loudness::NUM\_\-BANDS} = 24\hspace{0.3cm}{\tt  \mbox{[}static, private\mbox{]}}}}
\label{classLoudness_v8}


There are 24 critical bands $\ast$ 

Definition at line 175 of file Loudness.h.

Referenced by calculate(), and critical\-Band\-Index().\hypertarget{classLoudness_v5}{
\index{Loudness@{Loudness}!OFFSET@{OFFSET}}
\index{OFFSET@{OFFSET}!Loudness@{Loudness}}
\subsubsection[OFFSET]{\setlength{\rightskip}{0pt plus 5cm}const int \hyperlink{classLoudness_v5}{Loudness::OFFSET} = 5\hspace{0.3cm}{\tt  \mbox{[}static, private\mbox{]}}}}
\label{classLoudness_v5}




Definition at line 168 of file Loudness.h.\hypertarget{classLoudness_v6}{
\index{Loudness@{Loudness}!SLOPE@{SLOPE}}
\index{SLOPE@{SLOPE}!Loudness@{Loudness}}
\subsubsection[SLOPE]{\setlength{\rightskip}{0pt plus 5cm}const int \hyperlink{classLoudness_v6}{Loudness::SLOPE} = 6\hspace{0.3cm}{\tt  \mbox{[}static, private\mbox{]}}}}
\label{classLoudness_v6}




Definition at line 169 of file Loudness.h.\hypertarget{classLoudness_v1}{
\index{Loudness@{Loudness}!UPPER_BOUND@{UPPER\_\-BOUND}}
\index{UPPER_BOUND@{UPPER\_\-BOUND}!Loudness@{Loudness}}
\subsubsection[UPPER\_\-BOUND]{\setlength{\rightskip}{0pt plus 5cm}const int \hyperlink{classLoudness_v1}{Loudness::UPPER\_\-BOUND} = 1\hspace{0.3cm}{\tt  \mbox{[}static, private\mbox{]}}}}
\label{classLoudness_v1}




Definition at line 164 of file Loudness.h.

Referenced by critical\-Band\-Index().

The documentation for this class was generated from the following files:\begin{CompactItemize}
\item 
\hyperlink{Loudness_8h}{Loudness.h}\item 
\hyperlink{Loudness_8cpp}{Loudness.cpp}\end{CompactItemize}
