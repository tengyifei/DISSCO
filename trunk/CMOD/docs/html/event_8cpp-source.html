<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CMOD: event.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>event.cpp</h1><a href="event_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment">CMOD (composition module)</span>
00003 <span class="comment">Copyright (C) 2005  Sever Tipei (s-tipei@uiuc.edu)</span>
00004 <span class="comment">                                                                                </span>
00005 <span class="comment">This program is free software; you can redistribute it and/or</span>
00006 <span class="comment">modify it under the terms of the GNU General Public License</span>
00007 <span class="comment">as published by the Free Software Foundation; either version 2</span>
00008 <span class="comment">of the License, or (at your option) any later version.</span>
00009 <span class="comment">                                                                                </span>
00010 <span class="comment">This program is distributed in the hope that it will be useful,</span>
00011 <span class="comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00012 <span class="comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00013 <span class="comment">GNU General Public License for more details.</span>
00014 <span class="comment">                                                                                </span>
00015 <span class="comment">You should have received a copy of the GNU General Public License</span>
00016 <span class="comment">along with this program; if not, write to the Free Software</span>
00017 <span class="comment">Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
00018 <span class="comment">*/</span>
00019 
00020 <span class="comment">//----------------------------------------------------------------------------//</span>
00021 <span class="comment">// </span>
00022 <span class="comment">//  Event.ccp</span>
00023 <span class="comment">// </span>
00024 <span class="comment">//----------------------------------------------------------------------------//</span>
00025 
00026 <span class="comment">//#include "../../LASS/src/lib.h"</span>
00027 
00028 <span class="preprocessor">#include "<a class="code" href="bottom_8h.html">bottom.h</a>"</span>
00029 <span class="preprocessor">#include "<a class="code" href="dataIn_8h.html">dataIn.h</a>"</span>
00030 <span class="preprocessor">#include "<a class="code" href="event_8h.html">event.h</a>"</span>
00031 <span class="preprocessor">#include "<a class="code" href="matrix_8h.html">matrix.h</a>"</span>
00032 <span class="preprocessor">#include "<a class="code" href="low_8h.html">low.h</a>"</span>
00033 <span class="preprocessor">#include "<a class="code" href="high_8h.html">high.h</a>"</span>
00034 <span class="preprocessor">#include "<a class="code" href="sieve_8h.html">sieve.h</a>"</span>
00035 <span class="preprocessor">#include "<a class="code" href="utility_8h.html">utility.h</a>"</span>
00036 <span class="preprocessor">#include "<a class="code" href="random_8h.html">random.h</a>"</span>
00037 <span class="preprocessor">#include "lexyacc/eventparser.h"</span>
00038 
00039 <span class="preprocessor">#include &lt;string&gt;</span>
00040 <span class="preprocessor">#include &lt;algorithm&gt;</span>
00041 <span class="preprocessor">#include &lt;cmath&gt;</span>
00042 <span class="preprocessor">#include &lt;iomanip&gt;</span>
00043 <span class="preprocessor">#include &lt;vector&gt;</span>
00044 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00045 
<a name="l00046"></a><a class="code" href="event_8cpp.html#a0">00046</a> <span class="keyword">extern</span> <span class="keywordtype">char</span> * <a class="code" href="event_8cpp.html#a0">nameFlag</a>;
<a name="l00047"></a><a class="code" href="event_8cpp.html#a1">00047</a> <span class="keyword">extern</span> Score <a class="code" href="bottom_8cpp.html#a4">score</a>;
00048 
00049 
00053 <span class="comment">//----------------------------------------------------------------------------//</span>
00054 
<a name="l00055"></a><a class="code" href="classEvent.html#a1">00055</a> <a class="code" href="classEvent.html#a0">Event::Event</a>(<span class="keywordtype">char</span> * aName) {
00056 
00057   this-&gt;<a class="code" href="classEvent.html#o23">typesInLayer</a> = NULL;
00058   this-&gt;<a class="code" href="classEvent.html#o28">starTarray</a> = NULL;
00059 
00060   this-&gt;<a class="code" href="classEvent.html#o30">probSieveArray</a> = NULL;
00061   this-&gt;<a class="code" href="classEvent.html#o29">durArray</a> = NULL;
00062   this-&gt;<a class="code" href="classEvent.html#o31">probDurArray</a> = NULL;
00063   this-&gt;<a class="code" href="classEvent.html#o32">layerDens</a> == NULL;
00064   this-&gt;<a class="code" href="classEvent.html#o33">objsInLayer</a> == NULL;
00065   this-&gt;<a class="code" href="classEvent.html#o34">remainObjs</a> == NULL;
00066   this-&gt;<a class="code" href="classEvent.html#o10">nameType</a> == NULL;
00067 
00068   <a class="code" href="classEvent.html#o22">objID</a> = 0;
00069   <a class="code" href="classEvent.html#a10">setName</a>(aName);
00070 }
00071 
00072 
00076 <span class="comment">//----------------------------------------------------------------------------//</span>
00077 
<a name="l00078"></a><a class="code" href="classEvent.html#a2">00078</a> <a class="code" href="classEvent.html#a0">Event::Event</a>(<span class="keywordtype">float</span> aStartTime, <span class="keywordtype">float</span> aDuration, <span class="keywordtype">int</span> aType, <span class="keywordtype">char</span> * aName) {
00079 
00080   this-&gt;<a class="code" href="classEvent.html#o23">typesInLayer</a> = NULL;
00081   this-&gt;<a class="code" href="classEvent.html#o28">starTarray</a> = NULL;
00082 
00083   this-&gt;<a class="code" href="classEvent.html#o30">probSieveArray</a> = NULL;
00084   this-&gt;<a class="code" href="classEvent.html#o29">durArray</a> = NULL;
00085   this-&gt;<a class="code" href="classEvent.html#o31">probDurArray</a> = NULL;
00086   this-&gt;<a class="code" href="classEvent.html#o32">layerDens</a> == NULL;
00087   this-&gt;<a class="code" href="classEvent.html#o33">objsInLayer</a> == NULL;
00088   this-&gt;<a class="code" href="classEvent.html#o34">remainObjs</a> == NULL;
00089   this-&gt;<a class="code" href="classEvent.html#o10">nameType</a> == NULL;
00090 
00091   <a class="code" href="classEvent.html#a7">setStartTime</a>(aStartTime);
00092   <a class="code" href="classEvent.html#a8">setDuration</a>(aDuration);
00093   <a class="code" href="classEvent.html#a9">setType</a>(aType);
00094   <a class="code" href="classEvent.html#a10">setName</a>(aName);
00095 
00096   <a class="code" href="classEvent.html#o11">theDensity</a> = 0;
00097 <span class="comment">//setDensity(aDensity);</span>
00098 
00099   <a class="code" href="classEvent.html#o22">objID</a> = 0;
00100 }
00101 
<a name="l00102"></a><a class="code" href="classEvent.html#a3">00102</a> <a class="code" href="classEvent.html#a0">Event::Event</a>(<span class="keywordtype">float</span> aStartTime, <span class="keywordtype">float</span> aDuration, <span class="keywordtype">double</span> aDensity, <span class="keywordtype">int</span> aType, <span class="keywordtype">char</span> * aName) {
00103     <a class="code" href="classEvent.html#a0">Event</a>(aStartTime, aDuration, aType, aName);
00104     this-&gt;<a class="code" href="classEvent.html#o11">theDensity</a> = aDuration;
00105     
00106 }   
00107 
00111 <span class="comment">//----------------------------------------------------------------------------//</span>
00112 
<a name="l00113"></a><a class="code" href="classEvent.html#a4">00113</a> <a class="code" href="classEvent.html#a0">Event::Event</a>(<span class="keyword">const</span> <a class="code" href="classEvent.html">Event</a>&amp; origEvent) {
00114   <a class="code" href="classEvent.html#o5">theStartTime</a> = origEvent.<a class="code" href="classEvent.html#o5">theStartTime</a>;
00115   <a class="code" href="classEvent.html#o6">theDuration</a> = origEvent.<a class="code" href="classEvent.html#o6">theDuration</a>;
00116 
00117   <span class="keywordflow">if</span>(strcmp(origEvent.<a class="code" href="classEvent.html#o8">theName</a>, <span class="stringliteral">""</span>) == 0)
00118   {
00119     <a class="code" href="classEvent.html#o8">theName</a> = <span class="keyword">new</span> <span class="keywordtype">char</span>[1];
00120     strcpy(<a class="code" href="classEvent.html#o8">theName</a>, <span class="stringliteral">""</span>);
00121   }
00122   <span class="keywordflow">else</span>
00123   {
00124     <a class="code" href="classEvent.html#o8">theName</a> = <span class="keyword">new</span> <span class="keywordtype">char</span>[strlen(origEvent.<a class="code" href="classEvent.html#o8">theName</a>) + 1];
00125     strcpy(<a class="code" href="classEvent.html#o8">theName</a>, origEvent.<a class="code" href="classEvent.html#o8">theName</a>);
00126   } 
00127 
00128   <a class="code" href="classEvent.html#o11">theDensity</a> = origEvent.<a class="code" href="classEvent.html#o11">theDensity</a>;
00129 }
00130 
00131 
00135 <span class="comment">//----------------------------------------------------------------------------//</span>
00136 
<a name="l00137"></a><a class="code" href="classEvent.html#a5">00137</a> <a class="code" href="classEvent.html#a5">Event::~Event</a>() {
00138   this-&gt;<a class="code" href="classEvent.html#a12">clear</a>();
00139 }
00140 
00141 
00142 <span class="comment">//----------------------------------------------------------------------------//</span>
00143 <span class="comment">// </span>
00144 <span class="comment">// STATIC PUBLIC:  clear</span>
00145 <span class="comment">//----------------------------------------------------------------------------//</span>
00146 
<a name="l00147"></a><a class="code" href="classEvent.html#a12">00147</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a12">Event::clear</a>()  {
00148 
00149   <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classEvent.html#o10">nameType</a> != NULL ) {
00150     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classEvent.html#o17">maxTypes</a>; i++) {
00151       <span class="keyword">delete</span> [] (<span class="keywordtype">char</span> *) this-&gt;<a class="code" href="classEvent.html#o10">nameType</a>[i];
00152     }
00153     <span class="keyword">delete</span> [] (<span class="keywordtype">char</span> **) this-&gt;<a class="code" href="classEvent.html#o10">nameType</a>;
00154   }
00155 
00156   this-&gt;<a class="code" href="classEvent.html#o17">maxTypes</a> = 0;
00157 <span class="comment">/*</span>
00158 <span class="comment">  if(this-&gt;theName != NULL) delete [] theName;</span>
00159 <span class="comment">  if(this-&gt;aName != NULL) delete[] aName;</span>
00160 <span class="comment">*/</span>
00161   <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classEvent.html#o32">layerDens</a> != NULL) <span class="keyword">delete</span> [] <a class="code" href="classEvent.html#o32">layerDens</a>;
00162   <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classEvent.html#o33">objsInLayer</a> != NULL) <span class="keyword">delete</span> [] <a class="code" href="classEvent.html#o33">objsInLayer</a>;
00163   <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classEvent.html#o34">remainObjs</a> != NULL) <span class="keyword">delete</span> [] <a class="code" href="classEvent.html#o34">remainObjs</a>;
00164   <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classEvent.html#o23">typesInLayer</a> !=NULL) <span class="keyword">delete</span> [] <a class="code" href="classEvent.html#o23">typesInLayer</a>;
00165 
00166   <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classEvent.html#o28">starTarray</a> != NULL)  <span class="keyword">delete</span> [] <a class="code" href="classEvent.html#o28">starTarray</a>;
00167   <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classEvent.html#o30">probSieveArray</a> != NULL) <span class="keyword">delete</span> [] <a class="code" href="classEvent.html#o30">probSieveArray</a>;
00168   <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classEvent.html#o29">durArray</a> != NULL)  <span class="keyword">delete</span> [] <a class="code" href="classEvent.html#o29">durArray</a>;
00169   <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classEvent.html#o31">probDurArray</a> != NULL) <span class="keyword">delete</span> [] <a class="code" href="classEvent.html#o31">probDurArray</a>;
00170 }
00171 
00172 
00173 <span class="comment">//----------------------------------------------------------------------------//</span>
00174 <span class="comment">// </span>
00175 <span class="comment">// PUBLIC:  operator=</span>
00176 <span class="comment">//----------------------------------------------------------------------------//</span>
00177 
<a name="l00178"></a><a class="code" href="classEvent.html#a6">00178</a> <a class="code" href="classEvent.html">Event</a>&amp; <a class="code" href="classEvent.html#a6">Event::operator=</a>(<span class="keyword">const</span> <a class="code" href="classEvent.html">Event</a>&amp; origEvent)
00179 {
00180   <span class="keywordflow">if</span> (<span class="keyword">this</span> != &amp;origEvent)
00181   {
00182     <a class="code" href="classEvent.html#o5">theStartTime</a> = origEvent.<a class="code" href="classEvent.html#o5">theStartTime</a>;
00183     <a class="code" href="classEvent.html#o6">theDuration</a> = origEvent.<a class="code" href="classEvent.html#o6">theDuration</a>;
00184 
00185     <span class="keywordflow">if</span>(<a class="code" href="classEvent.html#o8">theName</a> != NULL)
00186       <span class="keyword">delete</span> [] <a class="code" href="classEvent.html#o8">theName</a>;    
00187 
00188     <span class="keywordflow">if</span>(strcmp(origEvent.<a class="code" href="classEvent.html#o8">theName</a>, <span class="stringliteral">""</span>) == 0)
00189     {
00190       <a class="code" href="classEvent.html#o8">theName</a> = <span class="keyword">new</span> <span class="keywordtype">char</span>[1];
00191       strcpy(<a class="code" href="classEvent.html#o8">theName</a>, <span class="stringliteral">""</span>);
00192     }
00193     <span class="keywordflow">else</span>
00194     {
00195       <a class="code" href="classEvent.html#o8">theName</a> = <span class="keyword">new</span> <span class="keywordtype">char</span>[strlen(origEvent.<a class="code" href="classEvent.html#o8">theName</a>) + 1];
00196       strcpy(<a class="code" href="classEvent.html#o8">theName</a>, origEvent.<a class="code" href="classEvent.html#o8">theName</a>);
00197     }
00198   }
00199 
00200   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00201 } 
00202 
00203 
00204 <span class="comment">//----------------------------------------------------------------------------//</span>
00205 <span class="comment">//</span>
00206 <span class="comment">// PUBLIC:  SetStartTime</span>
00207 <span class="comment">//----------------------------------------------------------------------------//</span>
00208 
<a name="l00209"></a><a class="code" href="classEvent.html#a7">00209</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a7">Event::setStartTime</a>(<span class="keywordtype">float</span> aStartTime) {
00210 
00211   <span class="keywordflow">if</span>(aStartTime &gt;= 0) {
00212     <a class="code" href="classEvent.html#o5">theStartTime</a> = aStartTime;
00213   } <span class="keywordflow">else</span> {
00214     cout &lt;&lt; <span class="stringliteral">"StartTime ="</span> &lt;&lt; aStartTime &lt;&lt; <span class="stringliteral">" &lt; 0"</span> &lt;&lt; endl;
00215   }
00216 }
00217 
00218 
00219 <span class="comment">//----------------------------------------------------------------------------//</span>
00220 <span class="comment">//</span>
00221 <span class="comment">// PUBLIC:  Set Type</span>
00222 <span class="comment">//----------------------------------------------------------------------------//</span>
00223 
<a name="l00224"></a><a class="code" href="classEvent.html#a9">00224</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a9">Event::setType</a>(<span class="keywordtype">int</span> aType) {
00225   <a class="code" href="classEvent.html#o7">theType</a> = aType;
00226 }
00227 
00228 <span class="comment">//----------------------------------------------------------------------------//</span>
00229 <span class="comment">//</span>
00230 <span class="comment">// PUBLIC:  Get Type</span>
00231 <span class="comment">//----------------------------------------------------------------------------//</span>
00232 
<a name="l00233"></a><a class="code" href="classEvent.html#a17">00233</a> <span class="keywordtype">int</span> <a class="code" href="classEvent.html#a17">Event::getType</a>() {
00234   <span class="keywordflow">return</span> <a class="code" href="classEvent.html#o7">theType</a>;
00235 }
00236 
00237 <span class="comment">//----------------------------------------------------------------------------//</span>
00238 <span class="comment">//</span>
00239 <span class="comment">// PUBLIC:  SetDuration</span>
00240 <span class="comment">//----------------------------------------------------------------------------//</span>
00241 
<a name="l00242"></a><a class="code" href="classEvent.html#a8">00242</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a8">Event::setDuration</a>(<span class="keywordtype">float</span> aDuration) {
00243   <a class="code" href="classEvent.html#o6">theDuration</a> = aDuration;
00244 }
00245 
00246 
00247 <span class="comment">//----------------------------------------------------------------------------//</span>
00248 <span class="comment">//</span>
00249 <span class="comment">// PUBLIC:  setName</span>
00250 <span class="comment">//----------------------------------------------------------------------------//</span>
00251 
<a name="l00252"></a><a class="code" href="classEvent.html#a10">00252</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a10">Event::setName</a>(<span class="keywordtype">char</span> * aName) {
00253   <span class="keywordflow">if</span>(aName == NULL) {
00254     aName = <span class="keyword">new</span> <span class="keywordtype">char</span>[80];
00255     cout &lt;&lt; <span class="stringliteral">"what is the name of this event ?  "</span>&lt;&lt;flush;
00256     cin &gt;&gt; aName;
00257     cout &lt;&lt; endl;
00258   }
00259 
00260   <a class="code" href="classEvent.html#o8">theName</a> = aName;
00261 }
00262 
00263 
00264 <span class="comment">//----------------------------------------------------------------------------//</span>
00265 <span class="comment">//</span>
00266 <span class="comment">// PUBLIC:  SetDensity</span>
00267 <span class="comment">//----------------------------------------------------------------------------//</span>
00268 
<a name="l00269"></a><a class="code" href="classEvent.html#a11">00269</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a11">Event::setDensity</a>(<span class="keywordtype">double</span> aDensity)
00270 {
00271   <a class="code" href="classEvent.html#o11">theDensity</a>= aDensity;
00272 }
00273 
00274 
00275 <span class="comment">//----------------------------------------------------------------------------//</span>
00276 <span class="comment">//</span>
00277 <span class="comment">// PUBLIC:  GetDuration</span>
00278 <span class="comment">//----------------------------------------------------------------------------//</span>
00279 
<a name="l00280"></a><a class="code" href="classEvent.html#a14">00280</a> <span class="keywordtype">float</span> <a class="code" href="classEvent.html#a14">Event::getDuration</a>()
00281 {
00282   <span class="keywordflow">return</span> <a class="code" href="classEvent.html#o6">theDuration</a>;
00283 }
00284 
00285 
00286 <span class="comment">//----------------------------------------------------------------------------//</span>
00287 <span class="comment">//</span>
00288 <span class="comment">// PUBLIC:  GetStartTime</span>
00289 <span class="comment">//----------------------------------------------------------------------------//</span>
00290 
<a name="l00291"></a><a class="code" href="classEvent.html#a13">00291</a> <span class="keywordtype">float</span> <a class="code" href="classEvent.html#a13">Event::getStartTime</a>()
00292 {
00293   <span class="keywordflow">return</span> <a class="code" href="classEvent.html#o5">theStartTime</a>;
00294 }
00295 
00296 
00297 <span class="comment">//----------------------------------------------------------------------------//</span>
00298 <span class="comment">//</span>
00299 <span class="comment">// PUBLIC:  GetName</span>
00300 <span class="comment">//----------------------------------------------------------------------------//</span>
00301 
<a name="l00302"></a><a class="code" href="classEvent.html#a15">00302</a> <span class="keywordtype">char</span>* <a class="code" href="classEvent.html#a15">Event::getName</a>()
00303 {
00304   <span class="keywordflow">return</span> <a class="code" href="classEvent.html#o8">theName</a>;
00305 }
00306 
00307 
00308 <span class="comment">//----------------------------------------------------------------------------//</span>
00309 <span class="comment">//</span>
00310 <span class="comment">// PUBLIC:  GetDensity</span>
00311 <span class="comment">//----------------------------------------------------------------------------//</span>
00312 
<a name="l00313"></a><a class="code" href="classEvent.html#a16">00313</a> <span class="keywordtype">double</span> <a class="code" href="classEvent.html#a16">Event::getDensity</a>()
00314 {
00315   <span class="keywordflow">return</span> <a class="code" href="classEvent.html#o11">theDensity</a>;
00316 }
00317 
00318 
<a name="l00319"></a><a class="code" href="classEvent.html#a18">00319</a> <span class="keywordtype">int</span> <a class="code" href="classEvent.html#a18">Event::getNewObj</a>()
00320 {
00321     <span class="keywordflow">return</span> <a class="code" href="classEvent.html#o44">newObj</a>;
00322 }
00323 
00328 <span class="comment">//----------------------------------------------------------------------------//</span>
00329 
00330 <span class="comment">/*</span>
00331 <span class="comment">  void Event::Basics() {</span>
00332 <span class="comment">  int offset;</span>
00333 <span class="comment"></span>
00334 <span class="comment">  DataIn Eba; Eba.ReadDummies();</span>
00335 <span class="comment"></span>
00336 <span class="comment">  offset = ChooseOffset(0,0);                           //stime</span>
00337 <span class="comment">  stimeSec = ReadComputeFloat(0, offset);</span>
00338 <span class="comment">  Event::setStartTime(stimeSec);</span>
00339 <span class="comment"></span>
00340 <span class="comment">  offset = ChooseOffset(0,0);                           //type</span>
00341 <span class="comment">  type = ReadComputeInt(0, offset);</span>
00342 <span class="comment">  Event::setType(type);</span>
00343 <span class="comment"></span>
00344 <span class="comment">  offset = ChooseOffset(0,0);                           //duration</span>
00345 <span class="comment">  durSec = ReadComputeFloat(0, offset);</span>
00346 <span class="comment">  Event::setDuration(durSec);</span>
00347 <span class="comment">//cout &lt;&lt; "     Stime=" &lt;&lt; stimeSec &lt;&lt; " type=" &lt;&lt; type &lt;&lt; " duration=" &lt;&lt; </span>
00348 <span class="comment">// durSec &lt;&lt; "  - all set" &lt;&lt; endl;</span>
00349 <span class="comment">}</span>
00350 <span class="comment">*/</span>
00351 
00358 <span class="comment">//----------------------------------------------------------------------------//</span>
00359 <span class="comment">/*</span>
00360 <span class="comment">void Event::Build() {</span>
00361 <span class="comment">  // Determine how many layers and how many types in each layer</span>
00362 <span class="comment">  Event::LayerDef();</span>
00363 <span class="comment"></span>
00364 <span class="comment">  // Determine the number of objects in this event</span>
00365 <span class="comment">  Event::NumObjs();</span>
00366 <span class="comment"></span>
00367 <span class="comment">  // The name of the obj file</span>
00368 <span class="comment">  Event::CopyName();</span>
00369 <span class="comment">}</span>
00370 <span class="comment">*/</span>
00377 <span class="comment">//----------------------------------------------------------------------------//</span>
00378 
00379 
<a name="l00380"></a><a class="code" href="classEvent.html#a21">00380</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a20">Event::Build</a>(list&lt;FileValue&gt; data) {
00381 
00382   <span class="comment">//Determine how many layers and how many types in each layer</span>
00383   <a class="code" href="classEvent.html#a25">Event::NewLayerDef</a>(data);
00384 
00385   <span class="comment">// Determine the number of objects in this event</span>
00386   <a class="code" href="classEvent.html#a27">Event::NewNumObjs</a>(data);
00387 
00388   <span class="comment">// The name of the obj file</span>
00389   <a class="code" href="classEvent.html#a29">Event::NewCopyName</a>(data);
00390 }
00391 
00392 
00393 
00399 <span class="comment">//----------------------------------------------------------------------------//</span>
00400 
<a name="l00401"></a><a class="code" href="classEvent.html#a24">00401</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a24">Event::LayerDef</a>() {
00402 
00403     <span class="comment">// No of layers, max duration for any object in matrix units, unitsPerSec,</span>
00404     <span class="comment">// and length of a bar; matrix units are not necessarily seconds.</span>
00405     <a class="code" href="classDataIn.html">DataIn</a> n;  n.<a class="code" href="classDataIn.html#a6">ReadDummies</a>();
00406 
00407     n.<a class="code" href="classDataIn.html#a11">ReadInts</a>(4);
00408     <a class="code" href="classEvent.html#o13">numLayers</a> = n.<a class="code" href="classDataIn.html#o0">intVect</a>[0];
00409 
00410     <span class="keywordflow">if</span>(n.<a class="code" href="classDataIn.html#o0">intVect</a>[1] &lt; 0) {
00411         <a class="code" href="classEvent.html#o14">objMaxDur</a> = (<span class="keywordtype">int</span>)<a class="code" href="classEvent.html#o39">durSec</a>;
00412     } <span class="keywordflow">else</span> { 
00413         <a class="code" href="classEvent.html#o14">objMaxDur</a> = n.<a class="code" href="classDataIn.html#o0">intVect</a>[1];
00414     }
00415 
00416     <a class="code" href="classEvent.html#o15">uPerSec</a> = n.<a class="code" href="classDataIn.html#o0">intVect</a>[2];
00417     <a class="code" href="classEvent.html#o16">barLen</a> = n.<a class="code" href="classDataIn.html#o0">intVect</a>[3];      <span class="comment">//not always necessary</span>
00418 
00419     <span class="comment">// No of types of events in each layer each type is a line of the matrix</span>
00420     <a class="code" href="classEvent.html#o23">typesInLayer</a> = <span class="keyword">new</span> <span class="keywordtype">int</span>[<a class="code" href="classEvent.html#o13">numLayers</a>];
00421     this-&gt;<a class="code" href="classEvent.html#o17">maxTypes</a> = 0;
00422 
00423   n.<a class="code" href="classDataIn.html#a11">ReadInts</a>(<a class="code" href="classEvent.html#o13">numLayers</a>);
00424 
00425   <span class="comment">// figure out the total number of types</span>
00426   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classEvent.html#o13">numLayers</a>; i++) {
00427     <a class="code" href="classEvent.html#o23">typesInLayer</a> [i] = n.<a class="code" href="classDataIn.html#o0">intVect</a>[i];
00428 <span class="comment">//  cout &lt;&lt; "Event::LayerDef - typesInLayer [" &lt;&lt; i &lt;&lt; "]=" &lt;&lt; typesInLayer [i]</span>
00429 <span class="comment">//   &lt;&lt; endl;</span>
00430     <a class="code" href="classEvent.html#o17">maxTypes</a> += <a class="code" href="classEvent.html#o23">typesInLayer</a> [i];
00431   }
00432 }
00433 
00442 <span class="comment">//----------------------------------------------------------------------------//</span>
00443 
<a name="l00444"></a><a class="code" href="classEvent.html#a25">00444</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a25">Event::NewLayerDef</a>(list&lt;FileValue&gt; data) {
00445 
00446   <span class="comment">// No of layers, max duration for any object in matrix units, unitsPerSec,</span>
00447   <span class="comment">// and length of a bar; matrix units are not necessarily seconds.</span>
00448   list&lt;FileValue&gt;::const_iterator iter = data.begin();
00449 
00450   <a class="code" href="classEvent.html#o13">numLayers</a> = (<span class="keywordtype">int</span>)(iter-&gt;getNumber());
00451   iter++;
00452 
00453 
00454   <a class="code" href="classEvent.html#o14">objMaxDur</a> = (<span class="keywordtype">int</span>)(iter-&gt;getNumber());
00455   iter++;
00456 
00457   <a class="code" href="classEvent.html#o15">uPerSec</a> = (<span class="keywordtype">int</span>)(iter-&gt;getNumber());
00458   iter++;
00459   <a class="code" href="classEvent.html#o16">barLen</a> = (<span class="keywordtype">int</span>)(iter-&gt;getNumber());        <span class="comment">//not always necessary</span>
00460 
00461   <span class="comment">// No of types of events in each layer each type is a line of the matrix</span>
00462   <a class="code" href="classEvent.html#o23">typesInLayer</a> = <span class="keyword">new</span> <span class="keywordtype">int</span>[<a class="code" href="classEvent.html#o13">numLayers</a>];
00463   this-&gt;<a class="code" href="classEvent.html#o17">maxTypes</a> = 0;
00464 
00465   <span class="comment">// figure out the total number of types</span>
00466   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classEvent.html#o13">numLayers</a>; i++) {
00467     <a class="code" href="classEvent.html#o23">typesInLayer</a> [i] = (<span class="keywordtype">int</span>)(iter-&gt;getNumber());
00468     iter++;
00469 <span class="comment">//  cout &lt;&lt; "Event::LayerDef - typesInLayer [" &lt;&lt; i &lt;&lt; "]=" &lt;&lt; typesInLayer [i]</span>
00470 <span class="comment">//   &lt;&lt; endl;</span>
00471     <a class="code" href="classEvent.html#o17">maxTypes</a> += <a class="code" href="classEvent.html#o23">typesInLayer</a> [i];
00472   }
00473 }
00474 
00475 
00483 <span class="comment">//----------------------------------------------------------------------------//</span>
00484 
<a name="l00485"></a><a class="code" href="classEvent.html#a26">00485</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a26">Event::NumObjs</a>() {
00486   <span class="keywordtype">int</span> offset;
00487   <span class="keywordtype">long</span> loc5;
00488   <span class="keywordtype">char</span> * method;
00489 
00490   this-&gt;<a class="code" href="classEvent.html#o32">layerDens</a> = <span class="keyword">new</span> <span class="keywordtype">float</span> [<a class="code" href="classEvent.html#o13">numLayers</a>];
00491   this-&gt;<a class="code" href="classEvent.html#o33">objsInLayer</a> = <span class="keyword">new</span> <span class="keywordtype">int</span> [<a class="code" href="classEvent.html#o13">numLayers</a>];
00492   this-&gt;<a class="code" href="classEvent.html#o34">remainObjs</a> = <span class="keyword">new</span> <span class="keywordtype">int</span> [<a class="code" href="classEvent.html#o13">numLayers</a>];
00493   <a class="code" href="classEvent.html#o21">numObjs</a> = 0;
00494 
00495   <a class="code" href="classDataIn.html">DataIn</a> Eno; Eno.<a class="code" href="classDataIn.html#a6">ReadDummies</a>();
00496   Eno.<a class="code" href="classDataIn.html#a16">ReadChars</a>(1);                 <span class="comment">//which method is used</span>
00497   method = Eno.<a class="code" href="classDataIn.html#o16">nameOf</a>[0];
00498 
00499   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classEvent.html#o13">numLayers</a>; i++) {
00500 
00501       <span class="keywordflow">if</span>(i == 0) {
00502         loc5 = Eno.<a class="code" href="classDataIn.html#a21">fileLoc</a>();                       <span class="comment">//remember file loc</span>
00503       } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(i &gt; 0) {
00504         Eno.<a class="code" href="classDataIn.html#a20">rewindFile</a>(loc5);                   <span class="comment">//back to that location</span>
00505       }
00506 
00507     offset = <a class="code" href="utility_8cpp.html#a18">ChooseOffset</a>(0, i);
00508 
00509     <span class="keywordflow">if</span>(strcmp(method, <span class="stringliteral">"FIXED"</span>) == 0) {              <span class="comment">//read number of objects</span>
00510       this-&gt;<a class="code" href="classEvent.html#o33">objsInLayer</a>[i] = <a class="code" href="utility_8cpp.html#a11">ReadComputeInt</a>(<a class="code" href="classEvent.html#o0">checkPoint</a>, offset);
00511       <a class="code" href="classEvent.html#o32">layerDens</a>[i] = <a class="code" href="classEvent.html#o33">objsInLayer</a>[i] / <a class="code" href="classEvent.html#o6">theDuration</a>;
00512     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strcmp(method, <span class="stringliteral">"DENSITY"</span>) == 0) {     <span class="comment">//determ by layer dens</span>
00513       this-&gt;<a class="code" href="classEvent.html#o32">layerDens</a>[i] = <a class="code" href="utility_8cpp.html#a22">SoundsPerSec</a>(<a class="code" href="utility_8cpp.html#a12">ReadComputeFloat</a>(<a class="code" href="classEvent.html#o0">checkPoint</a>, offset));
00514       this-&gt;<a class="code" href="classEvent.html#o33">objsInLayer</a>[i] = int(floor(this-&gt;layerDens[i] * <a class="code" href="classEvent.html#o6">theDuration</a> + .5));
00515     } <span class="keywordflow">else</span> {
00516       cout &lt;&lt; <span class="stringliteral">"Event::NumObjs - method="</span> &lt;&lt; method &lt;&lt; <span class="stringliteral">";  no method"</span> &lt;&lt; endl;
00517       cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
00518     }
00519 
00520     <a class="code" href="classEvent.html#o34">remainObjs</a>[i] = this-&gt;<a class="code" href="classEvent.html#o33">objsInLayer</a>[i];
00521     <a class="code" href="classEvent.html#o21">numObjs</a> += this-&gt;objsInLayer[i];
00522 <span class="comment">/*</span>
00523 <span class="comment">    cout &lt;&lt; "Event::NumObjs - numObjs=" &lt;&lt; numObjs &lt;&lt; " objsInLayer[" &lt;&lt; i &lt;&lt; </span>
00524 <span class="comment">     "]=" &lt;&lt; this-&gt;objsInLayer[i] &lt;&lt; " remainObjs[" &lt;&lt; i &lt;&lt; "]=" &lt;&lt; </span>
00525 <span class="comment">     remainObjs[i] &lt;&lt; " theDuration=" &lt;&lt; theDuration &lt;&lt; " layerDens[" &lt;&lt; i &lt;&lt; </span>
00526 <span class="comment">     "]=" &lt;&lt; layerDens[i] &lt;&lt; endl;</span>
00527 <span class="comment">    cin &gt;&gt; sever;</span>
00528 <span class="comment">*/</span>
00529   }
00530 }
00531 
00539 <span class="comment">//----------------------------------------------------------------------------//</span>
00540 
<a name="l00541"></a><a class="code" href="classEvent.html#a27">00541</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a27">Event::NewNumObjs</a>(list&lt;FileValue&gt; data) {
00542     <span class="keywordtype">int</span> offset;
00543     <span class="keywordtype">long</span> loc5;
00544     <span class="keyword">const</span> <span class="keywordtype">char</span> * method;
00545 
00546     this-&gt;<a class="code" href="classEvent.html#o32">layerDens</a> = <span class="keyword">new</span> <span class="keywordtype">float</span> [<a class="code" href="classEvent.html#o13">numLayers</a>];
00547     this-&gt;<a class="code" href="classEvent.html#o33">objsInLayer</a> = <span class="keyword">new</span> <span class="keywordtype">int</span> [<a class="code" href="classEvent.html#o13">numLayers</a>];
00548     this-&gt;<a class="code" href="classEvent.html#o34">remainObjs</a> = <span class="keyword">new</span> <span class="keywordtype">int</span> [<a class="code" href="classEvent.html#o13">numLayers</a>];
00549     <a class="code" href="classEvent.html#o21">numObjs</a> = 0;
00550 
00551     list&lt;FileValue&gt;::const_iterator iter;
00552     iter = data.begin();
00553 
00554     method = (*iter).getString().c_str();
00555     iter++;
00556 
00557     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classEvent.html#o13">numLayers</a>; i++) {
00558 
00559         <span class="keywordflow">if</span> (iter == data.end())
00560         {
00561             cout &lt;&lt; <span class="stringliteral">"ERROR: Did not specify numObjs for all layers."</span> &lt;&lt; endl;
00562             exit(1);
00563         }
00564 
00565         <span class="keywordflow">if</span>(strcmp(method, <span class="stringliteral">"FIXED"</span>) == 0) 
00566         {           <span class="comment">//read number of objects</span>
00567             this-&gt;<a class="code" href="classEvent.html#o33">objsInLayer</a>[i] = (<span class="keywordtype">int</span>)((*iter).getNumber());
00568             <a class="code" href="classEvent.html#o32">layerDens</a>[i] = <a class="code" href="classEvent.html#o33">objsInLayer</a>[i] / <a class="code" href="classEvent.html#o6">theDuration</a>;
00569         } 
00570         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strcmp(method, <span class="stringliteral">"DENSITY"</span>) == 0) 
00571         {       <span class="comment">//determ by layer dens</span>
00572 
00573             <span class="keywordtype">float</span> density = (*iter).getNumber();
00574             iter++;
00575             <span class="keywordtype">int</span> area = (<span class="keywordtype">int</span>)((*iter).getNumber());
00576             iter++;
00577             <span class="keywordtype">int</span> underOne = (<span class="keywordtype">int</span>)((*iter).getNumber());
00578             iter++;
00579             this-&gt;<a class="code" href="classEvent.html#o32">layerDens</a>[i] = <a class="code" href="utility_8cpp.html#a22">SoundsPerSec</a>(density, area, underOne);
00580             this-&gt;<a class="code" href="classEvent.html#o33">objsInLayer</a>[i] = 
00581                 int(floor(this-&gt;layerDens[i] * <a class="code" href="classEvent.html#o6">theDuration</a> + .5));
00582         } 
00583         <span class="keywordflow">else</span> 
00584         {
00585             cout &lt;&lt; <span class="stringliteral">"Event::NumObjs - method="</span> &lt;&lt; method 
00586                  &lt;&lt; <span class="stringliteral">";  no method"</span> &lt;&lt; endl;
00587             cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
00588         }
00589 
00590         <a class="code" href="classEvent.html#o34">remainObjs</a>[i] = this-&gt;<a class="code" href="classEvent.html#o33">objsInLayer</a>[i];
00591         <a class="code" href="classEvent.html#o21">numObjs</a> += this-&gt;objsInLayer[i];
00592 
00593         iter++;
00594     }
00595 }
00596 
00597 
00598 
00603 <span class="comment">//----------------------------------------------------------------------------//</span>
00604 
<a name="l00605"></a><a class="code" href="classEvent.html#a28">00605</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a28">Event::CopyName</a>() {
00606     
00607   <a class="code" href="classDataIn.html">DataIn</a> Ecp; Ecp.<a class="code" href="classDataIn.html#a6">ReadDummies</a>();
00608 
00609   <span class="comment">//how many characters in a file name ?</span>
00610   Ecp.<a class="code" href="classDataIn.html#a11">ReadInts</a>(1);
00611   this-&gt;<a class="code" href="classEvent.html#o18">numChars</a> = Ecp.<a class="code" href="classDataIn.html#o0">intVect</a>[0];          <span class="comment">//</span>
00612   Ecp.<a class="code" href="classDataIn.html#a16">ReadChars</a>(this-&gt;maxTypes);
00613 
00614   <span class="comment">//create new array</span>
00615   this-&gt;<a class="code" href="classEvent.html#o10">nameType</a> = <span class="keyword">new</span> <span class="keywordtype">char</span> * [this-&gt;<a class="code" href="classEvent.html#o17">maxTypes</a>];
00616 
00617   <span class="comment">//write each character in the new array</span>
00618   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classEvent.html#o17">maxTypes</a>; i++ ) {
00619     this-&gt;<a class="code" href="classEvent.html#o10">nameType</a>[i] = <span class="keyword">new</span> <span class="keywordtype">char</span> [this-&gt;<a class="code" href="classEvent.html#o18">numChars</a>];
00620   
00621     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; this-&gt;<a class="code" href="classEvent.html#o18">numChars</a>; j++) {
00622       this-&gt;<a class="code" href="classEvent.html#o10">nameType</a> [i] [j] = Ecp.<a class="code" href="classDataIn.html#o16">nameOf</a>[i] [j]; 
00623     }
00624   } 
00625 }
00626 
00627 
00632 <span class="comment">//----------------------------------------------------------------------------//</span>
00633 
<a name="l00634"></a><a class="code" href="classEvent.html#a29">00634</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a29">Event::NewCopyName</a>(list&lt;FileValue&gt; data) {
00635     
00636   <span class="comment">//create new array</span>
00637   list&lt;FileValue&gt;::const_iterator iter = data.begin();
00638   this-&gt;<a class="code" href="classEvent.html#o10">nameType</a> = <span class="keyword">new</span> <span class="keywordtype">char</span> * [this-&gt;<a class="code" href="classEvent.html#o17">maxTypes</a>];
00639 
00640   <span class="comment">//write each character in the new array</span>
00641   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classEvent.html#o17">maxTypes</a>; i++ ) {
00642       this-&gt;<a class="code" href="classEvent.html#o10">nameType</a>[i] = strdup((iter-&gt;getString()).c_str());
00643 
00644     }
00645 }
00646 
00647 
00648 
00652 <span class="comment">//----------------------------------------------------------------------------//</span>
00653 <span class="comment">/* replace, if not already done.</span>
00654 <span class="comment">void Event::AttackMethods() {</span>
00655 <span class="comment">  char * method;</span>
00656 <span class="comment"></span>
00657 <span class="comment">  //Read in flag for method to list possible values</span>
00658 <span class="comment">  DataIn Eam; Eam.ReadDummies();</span>
00659 <span class="comment"></span>
00660 <span class="comment">  Eam.ReadChars(1);</span>
00661 <span class="comment">  method = Eam.nameOf[0];</span>
00662 <span class="comment">  cout &lt;&lt; "Event::AttackMethods - method: " &lt;&lt; method &lt;&lt; endl;</span>
00663 <span class="comment"></span>
00664 <span class="comment">  //Which function will determine the attacks</span>
00665 <span class="comment">  if(strcmp(method, "POINTS_PROBS") == 0) {         //read attacks, durations</span>
00666 <span class="comment">    Event::PointsProbs();</span>
00667 <span class="comment">  } else if(strcmp(method, "GOLDEN_MEAN") == 0) {       //golden mean procedure</span>
00668 <span class="comment">//    Event::GoldenMean();  // deprecated</span>
00669 <span class="comment">  } else if(strcmp(method, "ATTACK_SIEVE") == 0) {      //sieve &amp; probabilities</span>
00670 <span class="comment">    Event::Attacks();</span>
00671 <span class="comment">  } else {</span>
00672 <span class="comment">    cout &lt;&lt; "Event::AttackMethods - no method specified" &lt;&lt; endl;</span>
00673 <span class="comment">    cin &gt;&gt; sever;</span>
00674 <span class="comment">  }</span>
00675 <span class="comment">}*/</span>
00676 
00681 <span class="comment">//----------------------------------------------------------------------------//</span>
00682 
<a name="l00683"></a><a class="code" href="classEvent.html#a34">00683</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a34">Event::NewAttackMethods</a>(<a class="code" href="classFileValue.html">FileValue</a> args) {
00684 
00685     list&lt;FileValue&gt;::const_iterator iter;
00686     list&lt;FileValue&gt; *calc_list = args.<a class="code" href="classFileValue.html#a8">getListPtr</a>();
00687     iter = calc_list-&gt;begin();
00688     
00689     string method = (*iter).getString();
00690     iter++;
00691     cout &lt;&lt; <span class="stringliteral">"Event::AttackMethods - method: "</span> &lt;&lt; method &lt;&lt; endl;
00692 
00693     <span class="comment">//Which function will determine the attacks</span>
00694     <span class="keywordflow">if</span> (method == <span class="stringliteral">"ATTACK_GOLDEN_MEAN"</span>)
00695     {
00696         <span class="comment">//golden mean procedure</span>
00697 <span class="comment">/*      Sieve s;</span>
00698 <span class="comment">        s.GoldenMean(data);</span>
00699 <span class="comment">        s.List2array(this-&gt;starTarray, this-&gt;probSieveArray, this-&gt;arraySize);</span>
00700 <span class="comment">*/</span>
00701         cout &lt;&lt; <span class="stringliteral">"Sieve GoldenMean not implemented."</span> &lt;&lt; endl;
00702     }
00703     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (method == <span class="stringliteral">"ATTACK_SIEVE"</span>)
00704     {
00705         <span class="comment">//sieve &amp; probabilities</span>
00706         string eMethod = (*iter).getString();
00707         iter++;
00708         list&lt;FileValue&gt; eArgList = (*iter).getList();
00709         iter++;
00710         string wMethod = (*iter).getString();
00711         iter++;
00712         list&lt;FileValue&gt; wArgList = (*iter).getList();
00713 
00714         cout &lt;&lt; <span class="stringliteral">"shutup"</span> &lt;&lt; endl;
00715 
00716         <span class="comment">// convert lists to vectors of ints</span>
00717         vector&lt;int&gt; eArgVect;
00718         iter = eArgList.begin();
00719         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;eArgList.size(); i++, iter++)
00720         {
00721             cout &lt;&lt; i &lt;&lt; endl;
00722             eArgVect.push_back( (<span class="keywordtype">int</span>) (*iter).getNumber() );
00723         }
00724 
00725         cout &lt;&lt; <span class="stringliteral">"speak"</span> &lt;&lt; endl;
00726 
00727         vector&lt;int&gt; wArgVect;
00728         iter = wArgList.begin();
00729         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;wArgList.size(); i++, iter++)
00730         {
00731             eArgVect.push_back( (<span class="keywordtype">int</span>) (*iter).getNumber() );
00732         }
00733         cout &lt;&lt; <span class="stringliteral">"hi!"</span> &lt;&lt; endl;
00734         <a class="code" href="classEvent.html#a37">Event::Attacks</a>(eMethod.c_str(), eArgVect, wMethod.c_str(), wArgVect);
00735     }
00736     <span class="keywordflow">else</span>
00737     {
00738         cout &lt;&lt; <span class="stringliteral">"Event::AttackMethods - no method specified"</span> &lt;&lt; endl;
00739         cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
00740     }
00741 }
00742 
00743 
00744 <span class="comment">//----------------------------------------------------------------------------//</span>
00745 <span class="comment">//</span>
00746 <span class="comment">// DurationMethods.  Choosing a method to determine durations.</span>
00747 <span class="comment">//----------------------------------------------------------------------------//</span>
00748 
<a name="l00749"></a><a class="code" href="classEvent.html#a35">00749</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a35">Event::DurationMethods</a>() {
00750   <span class="keywordtype">char</span> * method;
00751 
00752   <a class="code" href="classList.html">List&lt;int&gt;</a> Points;
00753   Points.<a class="code" href="classList.html#a8">InsertInOrder</a>(0);
00754 
00755   <span class="comment">//Read in flag for method to list possible values</span>
00756   <a class="code" href="classDataIn.html">DataIn</a> Edm; Edm.<a class="code" href="classDataIn.html#a6">ReadDummies</a>();
00757 
00758   Edm.<a class="code" href="classDataIn.html#a16">ReadChars</a>(1);
00759   method = Edm.<a class="code" href="classDataIn.html#o16">nameOf</a>[0];
00760   cout &lt;&lt; <span class="stringliteral">"Event::DurationMethods - method: "</span> &lt;&lt; method &lt;&lt;endl;
00761 
00762   <span class="comment">//Which function will determine the durations</span>
00763   <span class="keywordflow">if</span>(strcmp(method, <span class="stringliteral">"FIT"</span>) == 0) {          <span class="comment">//fit between attacks</span>
00764 <span class="comment">//  Event::Fit();</span>
00765     cout &lt;&lt; <span class="stringliteral">"DurationMethods - FIT not available yet"</span> &lt;&lt; endl;
00766     cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
00767   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strcmp(method, <span class="stringliteral">"POINTS_PROBS"</span>) == 0) {  <span class="comment">//read attacks, durations</span>
00768     <a class="code" href="classEvent.html#a39">Event::PointsProbs</a>();
00769   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strcmp(method, <span class="stringliteral">"MODULO"</span>) == 0) {        <span class="comment">//multiples of values</span>
00770 <span class="comment">//  Event::Modulo();</span>
00771     cout &lt;&lt; <span class="stringliteral">"DurationMethods - MOD not available yet"</span> &lt;&lt; endl;
00772     cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
00773   } <span class="keywordflow">else</span> {
00774     cout &lt;&lt; <span class="stringliteral">"Event::DurationMethods - no method specified"</span> &lt;&lt; endl;
00775     cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
00776   }
00777 }
00778 
00779 
00780 <span class="comment">//----------------------------------------------------------------------------//</span>
00781 <span class="comment">// </span>
00782 <span class="comment">// NewDurationMethods.  Choosing a method to determine durations.</span>
00783 <span class="comment">// *** for use with the new interface ***</span>
00784 <span class="comment">//----------------------------------------------------------------------------//</span>
00785 
<a name="l00786"></a><a class="code" href="classEvent.html#a36">00786</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a36">Event::NewDurationMethods</a>(<a class="code" href="classFileValue.html">FileValue</a> args) {
00787 
00788     list&lt;FileValue&gt;::const_iterator iter = args.<a class="code" href="classFileValue.html#a7">getList</a>().begin();
00789 <span class="comment">//  list&lt;FileValue&gt; *calc_list = args.getListPtr();</span>
00790 <span class="comment">//  iter = calc_list-&gt;begin();</span>
00791     
00792     string method = (*iter).getString();
00793     iter++;
00794 
00795     cout &lt;&lt; <span class="stringliteral">"Event::DurationMethods - method: "</span> &lt;&lt; method &lt;&lt;endl;
00796 
00797     <span class="comment">//Which function will determine the durations</span>
00798     <span class="keywordflow">if</span>(method == <span class="stringliteral">"FIT"</span>) {           <span class="comment">//fit between attacks</span>
00799 <span class="comment">//  Event::Fit();</span>
00800         cout &lt;&lt; <span class="stringliteral">"DurationMethods - FIT not available yet"</span> &lt;&lt; endl;
00801         cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
00802     } 
00803     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(method == <span class="stringliteral">"POINTS_PROBS"</span>) { <span class="comment">//read attacks, durations</span>
00804         <span class="comment">// do pretty much the same thing as Attacks()</span>
00805         <span class="comment">//sieve &amp; probabilities</span>
00806         string eMethod = (*iter).getString();
00807         iter++;
00808         list&lt;FileValue&gt; eArgList = (*iter).getList();
00809         iter++;
00810         string wMethod = (*iter).getString();
00811         iter++;
00812         list&lt;FileValue&gt; wArgList = (*iter).getList();
00813 
00814         <span class="comment">// convert lists to vectors of ints</span>
00815         vector&lt;int&gt; eArgVect;
00816         iter = eArgList.begin();
00817         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;eArgList.size(); i++, iter++)
00818         {
00819             eArgVect.push_back((<span class="keywordtype">int</span>) (*iter).getNumber());
00820         }
00821 
00822         vector&lt;int&gt; wArgVect;
00823         iter = wArgList.begin();
00824         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;wArgList.size(); i++, iter++)
00825         {
00826             eArgVect.push_back((<span class="keywordtype">int</span>) (*iter).getNumber());
00827         }
00828 
00829         <a class="code" href="classEvent.html#a39">Event::PointsProbs</a>(eMethod.c_str(), eArgVect, wMethod.c_str(), wArgVect);
00830     } 
00831     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(method == <span class="stringliteral">"MODULO"</span>) {       <span class="comment">//multiples of values</span>
00832 <span class="comment">//  Event::Modulo();</span>
00833         cout &lt;&lt; <span class="stringliteral">"DurationMethods - MOD not available yet"</span> &lt;&lt; endl;
00834         cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
00835     } 
00836     <span class="keywordflow">else</span> {
00837         cout &lt;&lt; <span class="stringliteral">"Event::DurationMethods - no method specified"</span> &lt;&lt; endl;
00838         cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
00839     }
00840 }
00841 
00842 
00843 
00853 <span class="comment">/* should be replaced if it hasn't already been</span>
00854 <span class="comment">void Event::Attacks() {</span>
00855 <span class="comment">  int count = 0;</span>
00856 <span class="comment">/*</span>
00857 <span class="comment">  cout &lt;&lt; "Event::Attacks - theDuration=" &lt;&lt; theDuration &lt;&lt; " uPerSec="</span>
00858 <span class="comment">   &lt;&lt; uPerSec &lt;&lt; " objMaxDur=" &lt;&lt; objMaxDur &lt;&lt; endl;</span>
00859 <span class="comment">*</span>
00860 <span class="comment">  //Create a list (sieve) of all possible attacks and return its size</span>
00861 <span class="comment">  Sieve sa;</span>
00862 <span class="comment">  sa.Build(0, (int)(theDuration * uPerSec));</span>
00863 <span class="comment">  arraySize = sa.GetListLen();</span>
00864 <span class="comment">  listLen = arraySize;                  /*needs to be changed*</span>
00865 <span class="comment"></span>
00866 <span class="comment">  //Create an array holding the sieve</span>
00867 <span class="comment">  this-&gt;starTarray = new int [arraySize];</span>
00868 <span class="comment"></span>
00869 <span class="comment">  //Create an array of probabilities corresponding to the sieve</span>
00870 <span class="comment">  this-&gt;probSieveArray = new double[arraySize];</span>
00871 <span class="comment"></span>
00872 <span class="comment">  sa.FillInArrays(starTarray, probSieveArray, arraySize);</span>
00873 <span class="comment">/*</span>
00874 <span class="comment">  cout &lt;&lt; "Event::Attacks - arraySize=" &lt;&lt; arraySize &lt;&lt; endl;</span>
00875 <span class="comment"></span>
00876 <span class="comment">  for (int i=0; i &lt; arraySize; i++) {</span>
00877 <span class="comment">    cout &lt;&lt; starTarray[i] &lt;&lt; " ";</span>
00878 <span class="comment">  }</span>
00879 <span class="comment">  cout &lt;&lt; endl;</span>
00880 <span class="comment"></span>
00881 <span class="comment">  for (int i=0; i &lt; arraySize; i++) {</span>
00882 <span class="comment">    cout &lt;&lt; probSieveArray[i] &lt;&lt; " ";</span>
00883 <span class="comment">  }</span>
00884 <span class="comment">  cout &lt;&lt; endl;</span>
00885 <span class="comment">*</span>
00886 <span class="comment">}</span>
00887 <span class="comment">*/</span>
00888 
<a name="l00889"></a><a class="code" href="classEvent.html#a38">00889</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a37">Event::Attacks</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *eMethod, vector&lt;int&gt; eArgVector,
00890                     <span class="keyword">const</span> <span class="keywordtype">char</span> *wMethod, vector&lt;int&gt; wArgVector) 
00891 {
00892     <span class="keywordtype">int</span> count = 0;
00893 
00894     <span class="comment">//Create a list (sieve) of all possible attacks and return its size</span>
00895     <a class="code" href="classSieve.html">Sieve</a> sa;
00896     sa.<a class="code" href="classSieve.html#a3">Build</a>(0, (<span class="keywordtype">int</span>)(<a class="code" href="classEvent.html#o6">theDuration</a> * <a class="code" href="classEvent.html#o15">uPerSec</a>), eMethod, wMethod,
00897              eArgVector, wArgVector);
00898     <a class="code" href="classEvent.html#o25">arraySize</a> = sa.<a class="code" href="classSieve.html#a10">GetListLen</a>();
00899     <a class="code" href="classEvent.html#o26">listLen</a> = <a class="code" href="classEvent.html#o25">arraySize</a>;                    <span class="comment">/*needs to be changed*/</span> 
00900 
00901     <span class="comment">//Create an array holding the sieve</span>
00902     this-&gt;<a class="code" href="classEvent.html#o28">starTarray</a> = <span class="keyword">new</span> <span class="keywordtype">int</span> [arraySize];
00903 
00904     <span class="comment">//Create an array of probabilities corresponding to the sieve</span>
00905     this-&gt;<a class="code" href="classEvent.html#o30">probSieveArray</a> = <span class="keyword">new</span> <span class="keywordtype">double</span>[arraySize];
00906 
00907 
00908     sa.<a class="code" href="classSieve.html#a5">FillInArrays</a>(<a class="code" href="classEvent.html#o28">starTarray</a>, <a class="code" href="classEvent.html#o30">probSieveArray</a>, arraySize);
00909 }
00910 
00911 
00912 
00921 <span class="comment">//----------------------------------------------------------------------------//</span>
00922 
<a name="l00923"></a><a class="code" href="classEvent.html#a39">00923</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a39">Event::PointsProbs</a>() {
00924   <span class="keywordtype">int</span> size;
00925   <span class="keywordtype">char</span> * method;
00926 
00927   <a class="code" href="classDataIn.html">DataIn</a> Epp; Epp.<a class="code" href="classDataIn.html#a6">ReadDummies</a>();
00928  
00929   Epp.<a class="code" href="classDataIn.html#a16">ReadChars</a>(1);
00930   method = Epp.<a class="code" href="classDataIn.html#o16">nameOf</a>[0];               <span class="comment">//points or intervals</span>
00931   Epp.<a class="code" href="classDataIn.html#a11">ReadInts</a>(1);
00932   size = Epp.<a class="code" href="classDataIn.html#o0">intVect</a>[0];                <span class="comment">//how many</span>
00933     
00934   <span class="keywordflow">if</span>(strcmp(method, <span class="stringliteral">"POINTS"</span>) == 0) {
00935     this-&gt;<a class="code" href="classEvent.html#o28">starTarray</a> = <span class="keyword">new</span> <span class="keywordtype">int</span> [size];          <span class="comment">//stimesMatrix</span>
00936     Epp.<a class="code" href="classDataIn.html#a11">ReadInts</a>(size);
00937 
00938 <span class="comment">//  cout &lt;&lt; "Event::PointsProb - starTarray" &lt;&lt; endl;</span>
00939     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; size; j++) {
00940       <a class="code" href="classEvent.html#o28">starTarray</a>[j] = (Epp.<a class="code" href="classDataIn.html#o0">intVect</a>[j]);
00941 <span class="comment">//    cout &lt;&lt; starTarray[j] &lt;&lt; " ";</span>
00942     }
00943 
00944 <span class="comment">//  cout &lt;&lt; endl;</span>
00945 <span class="comment">//  cout &lt;&lt; "Event::PointsProb - probSieveArray" &lt;&lt; endl;</span>
00946 
00947     this-&gt;<a class="code" href="classEvent.html#o30">probSieveArray</a> = <span class="keyword">new</span> <span class="keywordtype">double</span> [size];       <span class="comment">//prob of stimesMatrix</span>
00948     Epp.<a class="code" href="classDataIn.html#a13">ReadFloats</a>(size);
00949 
00950     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; size; j++) {
00951       <a class="code" href="classEvent.html#o30">probSieveArray</a>[j] = (Epp.<a class="code" href="classDataIn.html#o2">floatVect</a>[j]);
00952 <span class="comment">//    cout &lt;&lt; probSieveArray[j] &lt;&lt; " ";</span>
00953     }
00954 <span class="comment">//  cout &lt;&lt; endl;</span>
00955 
00956     <a class="code" href="classEvent.html#o26">listLen</a> = size;
00957   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strcmp(method, <span class="stringliteral">"INTERVALS"</span>) == 0) {
00958     this-&gt;<a class="code" href="classEvent.html#o29">durArray</a> = <span class="keyword">new</span> <span class="keywordtype">int</span> [size];            <span class="comment">//durations</span>
00959     Epp.<a class="code" href="classDataIn.html#a11">ReadInts</a>(size);                 <span class="comment">//possible intervals</span>
00960 
00961     cout &lt;&lt; <span class="stringliteral">"Event::PointsProb - durArray"</span> &lt;&lt; endl;
00962 
00963     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; size; j++) {
00964       <a class="code" href="classEvent.html#o29">durArray</a>[j] = (Epp.<a class="code" href="classDataIn.html#o0">intVect</a>[j]);           <span class="comment">//make duration array</span>
00965       cout &lt;&lt; <a class="code" href="classEvent.html#o29">durArray</a>[j] &lt;&lt; <span class="stringliteral">" "</span>;
00966     }
00967     cout &lt;&lt; endl;
00968     this-&gt;<a class="code" href="classEvent.html#o31">probDurArray</a> = <span class="keyword">new</span> <span class="keywordtype">double</span> [size];     <span class="comment">//prob of durations</span>
00969     Epp.<a class="code" href="classDataIn.html#a13">ReadFloats</a>(size);
00970 
00971     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; size; j++) {
00972       <a class="code" href="classEvent.html#o31">probDurArray</a>[j] = (Epp.<a class="code" href="classDataIn.html#o2">floatVect</a>[j]);     <span class="comment">//make prob array</span>
00973       cout &lt;&lt; <a class="code" href="classEvent.html#o31">probDurArray</a>[j] &lt;&lt; <span class="stringliteral">" "</span>;
00974     }
00975     cout &lt;&lt; endl;
00976     <a class="code" href="classEvent.html#o27">durLen</a> = size;
00977   } <span class="keywordflow">else</span> {
00978     cout &lt;&lt; <span class="stringliteral">"Event::PointsProb - no method specified"</span> &lt;&lt; endl;
00979     cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
00980   }
00981 }
00982 
<a name="l00983"></a><a class="code" href="classEvent.html#a40">00983</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a39">Event::PointsProbs</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *eMethod, vector&lt;int&gt; eArgVector,
00984                         <span class="keyword">const</span> <span class="keywordtype">char</span> *wMethod, vector&lt;int&gt; wArgVector) 
00985 {
00986     <span class="keywordtype">int</span> count = 0;
00987 
00988     cout &lt;&lt; <span class="stringliteral">"eMethod: "</span> &lt;&lt; eMethod &lt;&lt; endl;
00989     cout &lt;&lt; <span class="stringliteral">"wMethod: "</span> &lt;&lt; wMethod &lt;&lt; endl; 
00990 
00991     <span class="comment">//Create a list (sieve) of all possible attacks and return its size</span>
00992     <a class="code" href="classSieve.html">Sieve</a> sa;
00993     sa.<a class="code" href="classSieve.html#a3">Build</a>(0, (<span class="keywordtype">int</span>)(<a class="code" href="classEvent.html#o6">theDuration</a> * <a class="code" href="classEvent.html#o15">uPerSec</a>), eMethod, wMethod,
00994              eArgVector, wArgVector);
00995     <a class="code" href="classEvent.html#o25">arraySize</a> = sa.<a class="code" href="classSieve.html#a10">GetListLen</a>();
00996     <a class="code" href="classEvent.html#o26">listLen</a> = <a class="code" href="classEvent.html#o25">arraySize</a>;                    <span class="comment">/*needs to be changed*/</span> 
00997 
00998     <span class="comment">//Create an array holding the sieve</span>
00999     this-&gt;<a class="code" href="classEvent.html#o29">durArray</a> = <span class="keyword">new</span> <span class="keywordtype">int</span> [arraySize];
01000 
01001     <span class="comment">//Create an array of probabilities corresponding to the sieve</span>
01002     this-&gt;<a class="code" href="classEvent.html#o31">probDurArray</a> = <span class="keyword">new</span> <span class="keywordtype">double</span>[arraySize];
01003     cout &lt;&lt; <span class="stringliteral">"before fillinarrays"</span> &lt;&lt; endl;
01004     sa.<a class="code" href="classSieve.html#a5">FillInArrays</a>(<a class="code" href="classEvent.html#o29">durArray</a>, <a class="code" href="classEvent.html#o31">probDurArray</a>, arraySize);
01005     <a class="code" href="classEvent.html#o27">durLen</a> = arraySize;
01006     cout &lt;&lt; <span class="stringliteral">"after fillinarrays"</span> &lt;&lt; endl;
01007 }
01008 
01009 
01016 <span class="comment">//----------------------------------------------------------------------------//</span>
01017 
01018 <span class="comment">/* should be replaced if it hasn't been</span>
01019 <span class="comment">void Event::CreateMatrices() {</span>
01020 <span class="comment">  </span>
01021 <span class="comment">  s0 = new Matrix (maxTypes, listLen, 0);</span>
01022 <span class="comment">  s0-&gt;GetVector(this-&gt;keepName);</span>
01023 <span class="comment">  s0-&gt;Envelopes(this-&gt;keepName);</span>
01024 <span class="comment">/*</span>
01025 <span class="comment">  cout &lt;&lt; "Event::CreateMatrices - s0 after Envelopes" &lt;&lt; endl;</span>
01026 <span class="comment">  s0-&gt;Print();</span>
01027 <span class="comment">  cin &gt;&gt; sever;</span>
01028 <span class="comment">*</span>
01029 <span class="comment">  d0 = new Matrix (maxTypes, durLen, 0);</span>
01030 <span class="comment">  d0-&gt;Envelopes(this-&gt;keepName);</span>
01031 <span class="comment">  d0-&gt;IncludeArray(this-&gt;probDurArray, 0, maxTypes);</span>
01032 <span class="comment">/*</span>
01033 <span class="comment">  cout &lt;&lt; "Event::CreateMatrices - d0 after IncludeArray" &lt;&lt; endl;</span>
01034 <span class="comment">  d0-&gt;Print();</span>
01035 <span class="comment">*</span>
01036 <span class="comment">}</span>
01037 <span class="comment">*/</span>
01038 
<a name="l01039"></a><a class="code" href="classEvent.html#a51">01039</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a51">Event::NewCreateMatrices</a>(<a class="code" href="classFileValue.html">FileValue</a> args) 
01040 {
01041     vector&lt;Envelope*&gt;envList;
01042     <a class="code" href="classFileValue.html">FileValue</a> fv_temp;
01043     
01044     list&lt;FileValue&gt;::const_iterator iter = args.<a class="code" href="classFileValue.html#a7">getList</a>().begin();
01045 
01046     <span class="comment">// get the matrix vector</span>
01047     vector &lt;float&gt; newvec;
01048     fv_temp = *iter;
01049     fv_temp.<a class="code" href="classFileValue.html#a23">Evaluate</a>();
01050     list&lt;FileValue&gt;::iterator vec_iter = fv_temp.<a class="code" href="classFileValue.html#a8">getListPtr</a>()-&gt;begin();
01051     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; vec_iter != fv_temp.<a class="code" href="classFileValue.html#a7">getList</a>().end(); i++, vec_iter++)
01052         newvec.push_back((*vec_iter).getNumber());
01053     iter++;
01054     
01055     <span class="comment">// get the first list of envelopes</span>
01056     fv_temp = *iter;
01057     fv_temp.<a class="code" href="classFileValue.html#a23">Evaluate</a>();
01058     list&lt;FileValue&gt;::iterator env_iter = fv_temp.<a class="code" href="classFileValue.html#a8">getListPtr</a>()-&gt;begin();
01059     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; env_iter != fv_temp.<a class="code" href="classFileValue.html#a7">getList</a>().end(); i++, env_iter++){
01060         cout&lt;&lt;<span class="stringliteral">"envList[o] = "</span> &lt;&lt; <span class="stringliteral">"      "</span> &lt;&lt; env_iter-&gt;getType() &lt;&lt;  endl;
01061         env_iter-&gt;Evaluate();
01062         envList.push_back((*env_iter).getEnvelope());
01063     }
01064         
01065     iter++;
01066 
01067     <span class="comment">// make the first matrix</span>
01068     <a class="code" href="classEvent.html#o1">s0</a> = <span class="keyword">new</span> <a class="code" href="classEvent.html#n0">Matrix</a> (<a class="code" href="classEvent.html#o17">maxTypes</a>, <a class="code" href="classEvent.html#o26">listLen</a>, 0);
01069     <a class="code" href="classEvent.html#o1">s0</a>-&gt;<a class="code" href="classMatrix.html#a6">GetVector</a>(newvec); 
01070     vector&lt;float&gt; probs;
01071     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classEvent.html#o25">arraySize</a>; i++)
01072         probs.push_back(<a class="code" href="classEvent.html#o30">probSieveArray</a>[i]);
01073     <a class="code" href="classEvent.html#o1">s0</a>-&gt;<a class="code" href="classMatrix.html#a16">Envelopes</a>(probs, envList);
01074 
01075 <span class="comment">/*</span>
01076 <span class="comment">  cout &lt;&lt; "Event::CreateMatrices - s0 after Envelopes" &lt;&lt; endl;</span>
01077 <span class="comment">  s0-&gt;Print();</span>
01078 <span class="comment">  cin &gt;&gt; sever;</span>
01079 <span class="comment">*/</span>
01080 
01081     <span class="comment">// get the second list of envelopes</span>
01082     fv_temp = *iter;
01083     fv_temp.<a class="code" href="classFileValue.html#a23">Evaluate</a>();
01084     env_iter = fv_temp.<a class="code" href="classFileValue.html#a8">getListPtr</a>()-&gt;begin();
01085     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; env_iter != fv_temp.<a class="code" href="classFileValue.html#a7">getList</a>().end(); i++, env_iter++){
01086         env_iter-&gt;Evaluate();
01087         envList.push_back((*env_iter).getEnvelope());
01088     }
01089     iter++;
01090 
01091     <span class="comment">// make the second matrix</span>
01092     cout &lt;&lt; <span class="stringliteral">"durLen: "</span> &lt;&lt; <a class="code" href="classEvent.html#o27">durLen</a> &lt;&lt; endl;
01093     <a class="code" href="classEvent.html#o2">d0</a> = <span class="keyword">new</span> <a class="code" href="classEvent.html#n0">Matrix</a> (<a class="code" href="classEvent.html#o17">maxTypes</a>, <a class="code" href="classEvent.html#o27">durLen</a>, 0);
01094     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;arraySize; i++)
01095         probs.push_back(<a class="code" href="classEvent.html#o30">probSieveArray</a>[i]);
01096     <a class="code" href="classEvent.html#o2">d0</a>-&gt;<a class="code" href="classMatrix.html#a16">Envelopes</a>(probs, envList);
01097     <a class="code" href="classEvent.html#o2">d0</a>-&gt;<a class="code" href="classMatrix.html#a5">IncludeArray</a>(this-&gt;probDurArray, 0, <a class="code" href="classEvent.html#o17">maxTypes</a>);
01098 
01099 <span class="comment">/*</span>
01100 <span class="comment">  cout &lt;&lt; "Event::CreateMatrices - d0 after IncludeArray" &lt;&lt; endl;</span>
01101 <span class="comment">  d0-&gt;Print();</span>
01102 <span class="comment">*/</span>
01103 
01104 }
01105 
01106 
01112 <span class="comment">//----------------------------------------------------------------------------//</span>
01113 
<a name="l01114"></a><a class="code" href="classEvent.html#a52">01114</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a52">Event::ObjCoordinates</a>() {
01115   <a class="code" href="classEvent.html#o3">s1</a> = <span class="keyword">new</span> <a class="code" href="classEvent.html#n0">Matrix</a> (*<a class="code" href="classEvent.html#o1">s0</a>);
01116 
01117   <a class="code" href="classEvent.html#o3">s1</a>-&gt;Matrix::IncludeVector();
01118   <a class="code" href="classEvent.html#o3">s1</a>-&gt;<a class="code" href="classMatrix.html#a28">PrintVector</a>();
01119   <a class="code" href="classEvent.html#o3">s1</a>-&gt;<a class="code" href="classMatrix.html#a5">IncludeArray</a>(this-&gt;probSieveArray, 0, <a class="code" href="classEvent.html#o17">maxTypes</a>);
01120   <a class="code" href="classEvent.html#o3">s1</a>-&gt;Matrix::Normalize();
01121 
01122 
01123   cout &lt;&lt; <span class="stringliteral">"Event::ObjCoordinates - s1 matrix:"</span> &lt;&lt; endl;
01124   <a class="code" href="classEvent.html#o3">s1</a>-&gt;<a class="code" href="classMatrix.html#a27">Print</a>();
01125   
01126 
01127 
01128   <a class="code" href="classEvent.html#o3">s1</a>-&gt;<a class="code" href="classMatrix.html#a14">ChooseM</a>();
01129   <a class="code" href="classEvent.html#o37">stimeMatrix</a> = <a class="code" href="classEvent.html#o3">s1</a>-&gt;<a class="code" href="classMatrix.html#o1">row</a>;
01130   cout &lt;&lt; <span class="stringliteral">"Event::ObjCoordinates - stimeMatrix="</span> &lt;&lt; <a class="code" href="classEvent.html#o37">stimeMatrix</a> &lt;&lt; endl;
01131   this-&gt;<a class="code" href="classEvent.html#o45">type</a> = <a class="code" href="classEvent.html#o3">s1</a>-&gt;<a class="code" href="classMatrix.html#o0">col</a>;
01132 
01133 
01134   <a class="code" href="classEvent.html#o3">s1</a>-&gt;<a class="code" href="classMatrix.html#a27">Print</a>();
01135   cout &lt;&lt; <span class="stringliteral">"Event::ObjCoordinates - stimeMatrix="</span> &lt;&lt; <a class="code" href="classEvent.html#o37">stimeMatrix</a> &lt;&lt; <span class="stringliteral">" type="</span>
01136    &lt;&lt; this-&gt;<a class="code" href="classEvent.html#o45">type</a> &lt;&lt; <span class="stringliteral">"   that was the s1 matrix"</span> &lt;&lt; endl;
01137 
01138 
01139 }
01140 
01141 
01149 <span class="comment">//----------------------------------------------------------------------------//</span>
01150 
<a name="l01151"></a><a class="code" href="classEvent.html#a54">01151</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a54">Event::Adjustments</a>(<span class="keywordtype">int</span> slope) {
01152   <span class="keywordtype">int</span> from = 0;
01153   <span class="keywordtype">int</span> to = -1;
01154   <span class="keywordtype">int</span> endLocM = 0, whichLayer;
01155 
01156   <span class="comment">//find the lower limit (from) and the upper limit (to) of the layer</span>
01157   <span class="comment">// this type belongs to.</span>
01158   <span class="keywordflow">for</span> (<a class="code" href="classEvent.html#o47">layer</a> = 0; <a class="code" href="classEvent.html#o47">layer</a> &lt; <a class="code" href="classEvent.html#o13">numLayers</a>; <a class="code" href="classEvent.html#o47">layer</a>++) {
01159     to += <a class="code" href="classEvent.html#o23">typesInLayer</a> [<a class="code" href="classEvent.html#o47">layer</a>];
01160 
01161     <span class="keywordflow">if</span> (<a class="code" href="classEvent.html#o45">type</a> &lt;= to) {
01162       from = to - <a class="code" href="classEvent.html#o23">typesInLayer</a> [<a class="code" href="classEvent.html#o47">layer</a>] + 1;
01163       <a class="code" href="classEvent.html#o34">remainObjs</a>[<a class="code" href="classEvent.html#o47">layer</a>] -= 1;
01164       whichLayer = <a class="code" href="classEvent.html#o47">layer</a>;
01165 
01166 <span class="comment">/*</span>
01167 <span class="comment">      cout &lt;&lt; "         whichLayer=" &lt;&lt; whichLayer &lt;&lt; endl;</span>
01168 <span class="comment"></span>
01169 <span class="comment">      cout &lt;&lt; "Event::Adjustments - objsInLayer[" &lt;&lt; layer &lt;&lt; "]=" &lt;&lt; </span>
01170 <span class="comment">       objsInLayer[layer] &lt;&lt; " numLayers=" &lt;&lt; numLayers &lt;&lt; " from=" &lt;&lt; </span>
01171 <span class="comment">       from &lt;&lt; " to=" &lt;&lt; to &lt;&lt; " type=" &lt;&lt; type &lt;&lt; " remainObjs[" &lt;&lt;</span>
01172 <span class="comment">       layer &lt;&lt; "]=" &lt;&lt; remainObjs[layer] &lt;&lt; endl;</span>
01173 <span class="comment">*/</span>
01174 
01175       <span class="keywordflow">break</span>;
01176     }
01177   }
01178 
01179 <span class="comment">/*</span>
01180 <span class="comment">  cout &lt;&lt; "Event::Adjustments - newObj=" &lt;&lt; newObj &lt;&lt; " remainObjs[" </span>
01181 <span class="comment">   &lt;&lt; whichLayer &lt;&lt; "]=" &lt;&lt; remainObjs &lt;&lt; " layerDens[" &lt;&lt; whichLayer &lt;&lt; </span>
01182 <span class="comment">   "]=" &lt;&lt; layerDens &lt;&lt; endl;</span>
01183 <span class="comment">*/</span>
01184 
01185   <span class="comment">// select the duration of this event</span>
01186   endLocM = <a class="code" href="classEvent.html#a55">Event::FindDur</a>(<a class="code" href="classEvent.html#o34">remainObjs</a>[whichLayer], <a class="code" href="classEvent.html#o32">layerDens</a>[whichLayer]);
01187 
01188 <span class="comment">//cout &lt;&lt; "Event::Adjustments -     endLocM=" &lt;&lt; endLocM &lt;&lt; endl;</span>
01189 <span class="comment">//cin &gt;&gt; sever;</span>
01190 
01191   <span class="keywordflow">if</span>(<a class="code" href="classEvent.html#o44">newObj</a> &lt; <a class="code" href="classEvent.html#o21">numObjs</a>) {
01192     this-&gt;<a class="code" href="classEvent.html#o1">s0</a>-&gt;<a class="code" href="classMatrix.html#a10">AdjustMatrix</a>(<a class="code" href="classEvent.html#o45">type</a>, <a class="code" href="classEvent.html#o37">stimeMatrix</a>, endLocM, slope, from, to);
01193     this-&gt;<a class="code" href="classEvent.html#o1">s0</a>-&gt;<a class="code" href="classMatrix.html#a9">AdjustVector</a>(<a class="code" href="classEvent.html#o45">type</a>, <a class="code" href="classEvent.html#o34">remainObjs</a>[whichLayer], from, to);
01194   }
01195 }
01196 
01197 
01211 <span class="comment">//----------------------------------------------------------------------------//</span>
01212 
<a name="l01213"></a><a class="code" href="classEvent.html#a55">01213</a> <span class="keywordtype">int</span> <a class="code" href="classEvent.html#a55">Event::FindDur</a>(<span class="keywordtype">int</span> remainO, <span class="keywordtype">float</span> density) {
01214   <span class="keywordtype">int</span> durLoc, tryLoc;
01215 
01216   durLoc = <a class="code" href="classEvent.html#a56">Event::FindLen</a>();                <span class="comment">//find available space</span>
01217   <a class="code" href="classEvent.html#o4">d1</a> = <span class="keyword">new</span> <a class="code" href="classEvent.html#n0">Matrix</a> (*<a class="code" href="classEvent.html#o2">d0</a>);
01218 
01219 <span class="comment">/*</span>
01220 <span class="comment">  cout &lt;&lt; "FindDur before TrimMatrix - type=" &lt;&lt; type &lt;&lt; " density=" &lt;&lt; density</span>
01221 <span class="comment">   &lt;&lt; " remainO=" &lt;&lt; remainO &lt;&lt; " durLoc=" &lt;&lt; durLoc &lt;&lt;  " durLen=" &lt;&lt; durLen </span>
01222 <span class="comment">   &lt;&lt; " staimeMatrix=" &lt;&lt; stimeMatrix &lt;&lt; endl;</span>
01223 <span class="comment">  cout &lt;&lt; "     d1:" &lt;&lt; endl;</span>
01224 <span class="comment">  d1-&gt;Print();</span>
01225 <span class="comment">*/</span>
01226 
01227   <a class="code" href="classEvent.html#o4">d1</a>-&gt;<a class="code" href="classMatrix.html#a13">TrimMatrix</a>(<a class="code" href="classEvent.html#o45">type</a>, density, remainO, durLoc);
01228   <a class="code" href="classEvent.html#o4">d1</a>-&gt;<a class="code" href="classMatrix.html#a22">Mult</a>(remainO, density, <a class="code" href="classEvent.html#o45">type</a>, durLoc, <a class="code" href="classEvent.html#o29">durArray</a>, <a class="code" href="classEvent.html#o37">stimeMatrix</a>, <a class="code" href="classEvent.html#o28">starTarray</a>);
01229   <a class="code" href="classEvent.html#o4">d1</a>-&gt;<a class="code" href="classMatrix.html#a23">Normalize</a>();
01230   <a class="code" href="classEvent.html#o4">d1</a>-&gt;<a class="code" href="classMatrix.html#a14">ChooseM</a>();
01231   <a class="code" href="classEvent.html#o35">durMatrix</a> = <a class="code" href="classEvent.html#o4">d1</a>-&gt;<a class="code" href="classMatrix.html#o1">row</a>;
01232 
01233   <span class="comment">//find matrix location where this duration ends</span>
01234   tryLoc = <a class="code" href="classEvent.html#o37">stimeMatrix</a>;
01235   <span class="keywordflow">while</span>(<a class="code" href="classEvent.html#o28">starTarray</a>[tryLoc] &lt; <a class="code" href="classEvent.html#o28">starTarray</a>[stimeMatrix] + <a class="code" href="classEvent.html#o29">durArray</a>[<a class="code" href="classEvent.html#o35">durMatrix</a>] &amp;&amp;
01236     tryLoc &lt; <a class="code" href="classEvent.html#o26">listLen</a> - 1) tryLoc++;
01237 
01238 <span class="comment">/*</span>
01239 <span class="comment">  cout &lt;&lt; "FindDur - tryLoc=" &lt;&lt; tryLoc &lt;&lt; " starTarray[" &lt;&lt; stimeMatrix &lt;&lt;</span>
01240 <span class="comment">   "]+ durArray[" &lt;&lt; durMatrix &lt;&lt; "]=" &lt;&lt; starTarray[stimeMatrix] + </span>
01241 <span class="comment">   durArray[durMatrix] &lt;&lt; " listLen=" &lt;&lt; listLen &lt;&lt; endl;</span>
01242 <span class="comment"></span>
01243 <span class="comment">  cout &lt;&lt; "     starTarray[" &lt;&lt; tryLoc &lt;&lt; "]=" &lt;&lt; starTarray[tryLoc] &lt;&lt; endl;</span>
01244 <span class="comment">  cin &gt;&gt; sever;</span>
01245 <span class="comment">*/</span>
01246 
01247   <span class="comment">//this is going to be your endLocM</span>
01248   <span class="keywordflow">return</span> tryLoc;
01249 }
01250 
01251 
01264 <span class="comment">//----------------------------------------------------------------------------//</span>
01265 
<a name="l01266"></a><a class="code" href="classEvent.html#a56">01266</a> <span class="keywordtype">int</span> <a class="code" href="classEvent.html#a56">Event::FindLen</a>() {
01267   <span class="keywordtype">int</span> durLoc = 0, endUnitsM = 0, stop = 0, testEnd;
01268 
01269   <span class="comment">//step through matrix locations testing all possible durations</span>
01270   <span class="keywordflow">while</span> (durLoc &lt; <a class="code" href="classEvent.html#o27">durLen</a> &amp;&amp; stop == 0) {
01271     endUnitsM = <a class="code" href="classEvent.html#o28">starTarray</a>[<a class="code" href="classEvent.html#o37">stimeMatrix</a>] + <a class="code" href="classEvent.html#o29">durArray</a>[durLoc]; <span class="comment">//end in units</span>
01272 
01273 <span class="comment">/*</span>
01274 <span class="comment">    cout &lt;&lt; "Event::FindLen - endUnitsM/uPerSec=" &lt;&lt; (float)endUnitsM / </span>
01275 <span class="comment">     (float)uPerSec &lt;&lt; " theDuration=" &lt;&lt; theDuration &lt;&lt; " listLen=" &lt;&lt; listLen</span>
01276 <span class="comment">      &lt;&lt; endl;</span>
01277 <span class="comment">*/</span>
01278 
01279     <span class="keywordflow">if</span>((<span class="keywordtype">float</span>)endUnitsM / (<span class="keywordtype">float</span>)<a class="code" href="classEvent.html#o15">uPerSec</a> &gt;= <a class="code" href="classEvent.html#o6">theDuration</a>) {  <span class="comment">//compare in sec</span>
01280       testEnd = <a class="code" href="classEvent.html#o26">listLen</a> - 1;                    <span class="comment">//last M loc</span>
01281       stop = 1;
01282     } <span class="keywordflow">else</span> {
01283       testEnd = <a class="code" href="classEvent.html#o37">stimeMatrix</a>;                    <span class="comment">//beginning loc</span>
01284   
01285       <span class="keywordflow">while</span>(starTarray[testEnd] &lt;= endUnitsM) {         <span class="comment">//during dur, u</span>
01286         <span class="comment">// matrix location corresponding to the end of the event</span>
01287 
01288 <span class="comment">/*</span>
01289 <span class="comment">        cout &lt;&lt; "Event::FindLen - starTarray[" &lt;&lt; testEnd &lt;&lt; "]=" &lt;&lt;</span>
01290 <span class="comment">        starTarray[testEnd] &lt;&lt; " endUnitsM=" &lt;&lt; endUnitsM &lt;&lt; endl;</span>
01291 <span class="comment">*/</span>
01292 
01293         <span class="keywordflow">if</span>(testEnd &gt; <a class="code" href="classEvent.html#o26">listLen</a> - 1 || this-&gt;<a class="code" href="classEvent.html#o1">s0</a>-&gt;<a class="code" href="classMatrix.html#o2">matrix</a> [<a class="code" href="classEvent.html#o45">type</a>] [testEnd] == 0) {
01294           stop = 1;
01295         }
01296         testEnd++;
01297         <span class="keywordflow">if</span>(testEnd &gt;= <a class="code" href="classEvent.html#o26">listLen</a>) <span class="keywordflow">break</span>;
01298       }
01299 
01300       <span class="keywordflow">if</span>(durLoc == <a class="code" href="classEvent.html#o27">durLen</a> - 1) stop = 1;
01301       <span class="keywordflow">if</span>(stop == 0) durLoc++;
01302     }
01303   }
01304 
01305 <span class="comment">/*</span>
01306 <span class="comment">  cout &lt;&lt; " Event::FindLen - testEnd=" &lt;&lt; testEnd &lt;&lt; " durLoc=" &lt;&lt; durLoc &lt;&lt; </span>
01307 <span class="comment">   " starTarray[" &lt;&lt; stimeMatrix &lt;&lt; "]=" &lt;&lt; starTarray[stimeMatrix] &lt;&lt; </span>
01308 <span class="comment">   " durArray[" &lt;&lt; durLoc &lt;&lt; "]=" &lt;&lt; durArray[durLoc] &lt;&lt; endl;</span>
01309 <span class="comment">*/</span>
01310 
01311   <span class="keywordflow">return</span> durLoc;
01312 }
01313 
01314 
01321 <span class="comment">//----------------------------------------------------------------------------//</span>
01322 
<a name="l01323"></a><a class="code" href="classEvent.html#a44">01323</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a44">Event::TimeConvert</a>() {
01324   <a class="code" href="classEvent.html#o38">stimeUnits</a> = <a class="code" href="classEvent.html#o28">starTarray</a>[<a class="code" href="classEvent.html#o37">stimeMatrix</a>];
01325   <a class="code" href="classEvent.html#o40">stimeSec</a> = (<span class="keywordtype">float</span>) <a class="code" href="classEvent.html#o38">stimeUnits</a> / <a class="code" href="classEvent.html#o15">uPerSec</a> + (<span class="keywordtype">float</span>) <a class="code" href="classEvent.html#o5">theStartTime</a>;
01326    
01327   <a class="code" href="classEvent.html#o36">durUnits</a> = <a class="code" href="classEvent.html#o29">durArray</a> [<a class="code" href="classEvent.html#o35">durMatrix</a>];
01328   <a class="code" href="classEvent.html#o39">durSec</a> = (<span class="keywordtype">float</span>) <a class="code" href="classEvent.html#o36">durUnits</a> / (<span class="keywordtype">float</span>) <a class="code" href="classEvent.html#o15">uPerSec</a>;
01329 
01330   cout &lt;&lt; <span class="stringliteral">"Event::TimeConvert - theStartTime="</span> &lt;&lt; <a class="code" href="classEvent.html#o5">theStartTime</a> &lt;&lt; 
01331     <span class="stringliteral">" theDuration="</span> &lt;&lt; <a class="code" href="classEvent.html#o6">theDuration</a> &lt;&lt; <span class="stringliteral">" uPerSec="</span> &lt;&lt; <a class="code" href="classEvent.html#o15">uPerSec</a> &lt;&lt; <span class="stringliteral">" listLen="</span> &lt;&lt; 
01332     <a class="code" href="classEvent.html#o26">listLen</a> &lt;&lt; endl;
01333   cout &lt;&lt; <span class="stringliteral">"     objMaxDur="</span> &lt;&lt; <a class="code" href="classEvent.html#o14">objMaxDur</a> &lt;&lt; endl;
01334   cout &lt;&lt; <span class="stringliteral">"    stimeMatrix="</span> &lt;&lt; <a class="code" href="classEvent.html#o37">stimeMatrix</a> &lt;&lt;<span class="stringliteral">" durMatrix="</span> &lt;&lt; <a class="code" href="classEvent.html#o35">durMatrix</a> &lt;&lt; endl;
01335   cout &lt;&lt; <span class="stringliteral">"    stimeUnits="</span> &lt;&lt; <a class="code" href="classEvent.html#o38">stimeUnits</a> &lt;&lt; <span class="stringliteral">" durUnits="</span> &lt;&lt; <a class="code" href="classEvent.html#o36">durUnits</a> &lt;&lt; endl;
01336   cout &lt;&lt; <span class="stringliteral">"    stimeSec="</span> &lt;&lt; <a class="code" href="classEvent.html#o40">stimeSec</a> &lt;&lt; <span class="stringliteral">" durSec="</span> &lt;&lt; <a class="code" href="classEvent.html#o39">durSec</a> &lt;&lt; endl;
01337 
01338   <span class="comment">// using units</span>
01339   <a class="code" href="classEvent.html#o0">checkPoint</a> = (<span class="keywordtype">double</span>) <a class="code" href="classEvent.html#o38">stimeUnits</a> / (<span class="keywordtype">double</span>) (<a class="code" href="classEvent.html#o6">theDuration</a> * <a class="code" href="classEvent.html#o15">uPerSec</a>);
01340   <a class="code" href="classEvent.html#o41">duRatio</a> = (<span class="keywordtype">double</span>) <a class="code" href="classEvent.html#o36">durUnits</a> / (<span class="keywordtype">double</span>) (<a class="code" href="classEvent.html#o6">theDuration</a> * <a class="code" href="classEvent.html#o15">uPerSec</a>);
01341 }
01342 
01343 
01344 <span class="comment">//----------------------------------------------------------------------------//</span>
01345 <span class="comment">//</span>
01346 <span class="comment">// PRIVATE: StartTimes</span>
01347 <span class="comment">//  DEPRECATED</span>
01348 <span class="comment">//----------------------------------------------------------------------------//</span>
01349 
<a name="l01350"></a><a class="code" href="classEvent.html#a42">01350</a> <span class="keywordtype">int</span> <a class="code" href="classEvent.html#a42">Event::Stimes</a>() {
01351 
01352   <span class="comment">//find duration of this event and number of levels GOLDEN_MEAN is applied</span>
01353 
01354   <a class="code" href="classDataIn.html">DataIn</a> Est;
01355   Est.<a class="code" href="classDataIn.html#a11">ReadInts</a>(1) ;
01356   this-&gt;<a class="code" href="classEvent.html#o19">levels</a> = Est.<a class="code" href="classDataIn.html#o0">intVect</a>[0];
01357 
01358   <span class="comment">//List of StartTimes for Highs</span>
01359 
01360   <a class="code" href="classList.html">List&lt;int&gt;</a> STimes;
01361   STimes.<a class="code" href="classList.html#a8">InsertInOrder</a>(0);
01362   STimes.<a class="code" href="classList.html#a8">InsertInOrder</a>((<span class="keywordtype">int</span>)<a class="code" href="classEvent.html#o6">theDuration</a>);
01363 
01364   <span class="comment">// determine points for strong and weak partition using the GOLDEN MEAN</span>
01365 
01366   <a class="code" href="utility_8cpp.html#a23">GSection</a>(STimes, <a class="code" href="classEvent.html#o19">levels</a>);
01367   <a class="code" href="classEvent.html#o25">arraySize</a> = STimes.<a class="code" href="classList.html#a17">Length</a>() - 1;
01368   <a class="code" href="classEvent.html#o28">starTarray</a> = <span class="keyword">new</span> <span class="keywordtype">int</span> [<a class="code" href="classEvent.html#o25">arraySize</a>];
01369 
01370   STimes.<a class="code" href="classList.html#a11">Head</a>();
01371 
01372   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classEvent.html#o25">arraySize</a>; i++) {
01373     <a class="code" href="classEvent.html#o28">starTarray</a> [i] = STimes.<a class="code" href="classList.html#a15">Retrieve</a>() * <a class="code" href="classEvent.html#o15">uPerSec</a>;
01374     STimes++;
01375   }
01376   <span class="keywordflow">return</span> arraySize;
01377 }
01378 
01379 
01390 <span class="comment">//----------------------------------------------------------------------------//</span>
01391 
01392 <span class="comment">/* replaced</span>
01393 <span class="comment">void Event::CreateNewObjects() {</span>
01394 <span class="comment">  int offset, otherParams, same, slope;</span>
01395 <span class="comment">  char * method;</span>
01396 <span class="comment"></span>
01397 <span class="comment">  type = -1;</span>
01398 <span class="comment"></span>
01399 <span class="comment">  DataIn Ecno; Ecno.ReadDummies();</span>
01400 <span class="comment">  Ecno.ReadChars(1);</span>
01401 <span class="comment">  method = Ecno.nameOf[0];</span>
01402 <span class="comment"></span>
01403 <span class="comment">  Ecno.ReadInts(1);</span>
01404 <span class="comment">  otherParams = Ecno.intVect[0];            //num extra parameters</span>
01405 <span class="comment"></span>
01406 <span class="comment">  for(newObj = 0; newObj &lt; numObjs; newObj++) {</span>
01407 <span class="comment">    objID ++;</span>
01408 <span class="comment">    cout &lt;&lt; "Event::CreateNewObjects - newObj=" &lt;&lt; newObj &lt;&lt; " numObjs=" &lt;&lt; </span>
01409 <span class="comment">     numObjs &lt;&lt; " method: " &lt;&lt; method &lt;&lt; endl;</span>
01410 <span class="comment"></span>
01411 <span class="comment">    if(strcmp(method, "CONTINUUM") == 0) {              //continuous distribution</span>
01412 <span class="comment">      Ecno.RememberFileLoc(newObj, this-&gt;keepName, loc0);</span>
01413 <span class="comment">      Event::Continuum3();              //continuous probability</span>
01414 <span class="comment">      stimeSec += theStartTime;</span>
01415 <span class="comment">    } else if(strcmp(method, "DISCRETE") == 0) {        //discrete matrix</span>
01416 <span class="comment"></span>
01417 <span class="comment">      if(newObj == 0) {</span>
01418 <span class="comment">        Ecno.ReadInts(1);                   //slope used in matrix</span>
01419 <span class="comment">        slope = Ecno.intVect[0];</span>
01420 <span class="comment">        Event::AttackMethods();             //methods for attacks</span>
01421 <span class="comment">        Event::DurationMethods();           //methoasd for durations</span>
01422 <span class="comment">        Event::CreateMatrices();</span>
01423 <span class="comment">      }</span>
01424 <span class="comment">      Ecno.RememberFileLoc(newObj, this-&gt;keepName, loc0);</span>
01425 <span class="comment">      Event::Discrete3(slope);              //using discrete values</span>
01426 <span class="comment">    } else if(strcmp(method, "SWEEP") == 0) {</span>
01427 <span class="comment">      Ecno.RememberFileLoc(newObj, this-&gt;keepName, loc0);</span>
01428 <span class="comment">      Event::Sweep3();</span>
01429 <span class="comment">      stimeSec += theStartTime;</span>
01430 <span class="comment">    } else {</span>
01431 <span class="comment">      cout &lt;&lt; "Event: No method available to Create New Objects" &lt;&lt; endl;</span>
01432 <span class="comment">      cin &gt;&gt; sever;</span>
01433 <span class="comment">    }</span>
01434 <span class="comment">    cout &lt;&lt; "\nEvent::CreateNewObjects - type=" &lt;&lt; type &lt;&lt; " newObj=" &lt;&lt; newObj &lt;&lt;</span>
01435 <span class="comment">      " numObjs=" &lt;&lt; numObjs &lt;&lt; " objID=" &lt;&lt; objID &lt;&lt; " checkPoint=" &lt;&lt;</span>
01436 <span class="comment">      checkPoint &lt;&lt; endl;</span>
01437 <span class="comment">    cout &lt;&lt; "      stimeSec=" &lt;&lt; stimeSec &lt;&lt; " durSec=" &lt;&lt; durSec &lt;&lt; " loc=" &lt;&lt; </span>
01438 <span class="comment">    loc0 &lt;&lt; endl;</span>
01439 <span class="comment"></span>
01440 <span class="comment">//  if(otherParams != 0) Event::Parameters(otherParams);</span>
01441 <span class="comment"></span>
01442 <span class="comment">    Event::SelectNextEvent();</span>
01443 <span class="comment"></span>
01444 <span class="comment">    cout &lt;&lt; "Event: end of newObj=" &lt;&lt; newObj &lt;&lt; endl;</span>
01445 <span class="comment">    cin &gt;&gt; sever;</span>
01446 <span class="comment">  }</span>
01447 <span class="comment">  cout &lt;&lt; "outside Event loop - should you be here ?" &lt;&lt; endl;</span>
01448 <span class="comment">  cin &gt;&gt; sever;</span>
01449 <span class="comment">}*/</span>
01450 
01451 
01457 <span class="comment">//----------------------------------------------------------------------------//</span>
01458 
<a name="l01459"></a><a class="code" href="classEvent.html#a23">01459</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a23">Event::BuildSubEvents</a>(map&lt;string,EventFactory*&gt; library,
01460                            <a class="code" href="classFileValue.html">FileValue</a> *Calculations)
01461 {
01462     <span class="keywordtype">int</span> offset, otherParams, same, slope;
01463     string method;
01464             
01465     <span class="keywordflow">if</span> (Calculations == NULL)
01466     {
01467         cout &lt;&lt; <span class="stringliteral">"No subevents for "</span> &lt;&lt; this-&gt;<a class="code" href="classEvent.html#o8">theName</a> &lt;&lt; endl;
01468         <span class="keywordflow">return</span>;
01469     }
01470 
01471     <span class="comment">// Main loop for creating SubEvents</span>
01472     <span class="keywordflow">for</span>(<a class="code" href="classEvent.html#o44">newObj</a> = 0; <a class="code" href="classEvent.html#o44">newObj</a> &lt; <a class="code" href="classEvent.html#o21">numObjs</a>; <a class="code" href="classEvent.html#o44">newObj</a>++) {
01473         <a class="code" href="classEvent.html#o22">objID</a> ++;
01474         cout &lt;&lt; <span class="stringliteral">"Event::CreateNewObjects - newObj="</span> &lt;&lt; <a class="code" href="classEvent.html#o44">newObj</a> &lt;&lt; <span class="stringliteral">" numObjs="</span> &lt;&lt; 
01475             numObjs &lt;&lt; endl;
01476 
01477         <span class="comment">//Get initiate variables and handle NULL cases</span>
01478 
01479         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classEvent.html#o10">nameType</a>[<a class="code" href="classEvent.html#o44">newObj</a>] == NULL)
01480         {
01481             fprintf(stderr, <span class="stringliteral">"ERROR: Object %d (of %d) is NULL in %s.\n"</span>, 
01482                     <a class="code" href="classEvent.html#o44">newObj</a>, numObjs, <a class="code" href="classEvent.html#o8">theName</a>);
01483             cout &lt;&lt; <span class="stringliteral">"ERROR: There are "</span> &lt;&lt; numObjs &lt;&lt; <span class="stringliteral">" objects in "</span>
01484                  &lt;&lt; <a class="code" href="classEvent.html#o8">theName</a> &lt;&lt; <span class="stringliteral">" but object "</span> &lt;&lt; <a class="code" href="classEvent.html#o44">newObj</a> &lt;&lt; <span class="stringliteral">" is not defined."</span> 
01485                  &lt;&lt; endl;
01486             <span class="keywordflow">continue</span>;
01487         }
01488 
01489         cout &lt;&lt; <span class="stringliteral">"\t next = "</span> &lt;&lt; this-&gt;<a class="code" href="classEvent.html#o10">nameType</a>[<a class="code" href="classEvent.html#o44">newObj</a>] &lt;&lt; endl;
01490         string nextEventName = this-&gt;nameType[<a class="code" href="classEvent.html#o44">newObj</a>];
01491         cout &lt;&lt; <span class="stringliteral">"\t\t--&gt; "</span> &lt;&lt; nextEventName &lt;&lt; endl;
01492         cout &lt;&lt; endl;
01493         <a class="code" href="classEventFactory.html">EventFactory</a> *nextFactory = library[nextEventName];
01494         <span class="keywordflow">if</span> (nextFactory == NULL)
01495         {
01496             cout &lt;&lt; <span class="stringliteral">"Parsing "</span> &lt;&lt; this-&gt;nameType[<a class="code" href="classEvent.html#o44">newObj</a>] &lt;&lt; <span class="stringliteral">"..."</span> &lt;&lt; endl;
01497             nextFactory = <span class="keyword">new</span> <a class="code" href="classEventFactory.html">EventFactory</a>(this-&gt;nameType[<a class="code" href="classEvent.html#o44">newObj</a>], library);
01498             parseFile(string(this-&gt;nameType[<a class="code" href="classEvent.html#o44">newObj</a>]), nextFactory, NULL);
01499             cout &lt;&lt; <span class="stringliteral">"Finished parsing."</span> &lt;&lt; endl;
01500             library[this-&gt;nameType[<a class="code" href="classEvent.html#o44">newObj</a>]] = nextFactory;
01501         }
01502         nextFactory-&gt;<a class="code" href="classEventFactory.html#a4">Inherit</a>(<span class="keyword">this</span>);
01503 
01504         list&lt;FileValue&gt;::const_iterator iter;
01505         list&lt;FileValue&gt; *calc_list = Calculations-&gt;<a class="code" href="classFileValue.html#a8">getListPtr</a>();
01506         iter = calc_list-&gt;begin();
01507                 
01508         
01509         <a class="code" href="classFileValue.html">FileValue</a> fv_temp = *iter;
01510                 cout&lt;&lt;<span class="stringliteral">"method FileValue: "</span>&lt;&lt;fv_temp&lt;&lt;endl;
01511         method = fv_temp.<a class="code" href="classFileValue.html#a5">getString</a>();
01512                 cout&lt;&lt;<span class="stringliteral">"method: "</span>&lt;&lt;method&lt;&lt;endl;
01513         iter++;
01514 
01515         <span class="comment">//Evaluate variables based on a given method</span>
01516 
01517         <span class="keywordtype">double</span> next_stime, next_dur;
01518         <span class="keywordtype">int</span> next_type;
01519 
01520         <span class="keywordflow">if</span> (method == <span class="stringliteral">"CONTINUUM"</span>)
01521         {
01522             <span class="comment">//Retrieve start time from FileValue</span>
01523             fv_temp = *iter;
01524             cout &lt;&lt; <span class="stringliteral">"next_stime FileValue: "</span>&lt;&lt; fv_temp &lt;&lt; endl;
01525             fv_temp.<a class="code" href="classFileValue.html#a23">Evaluate</a>(<span class="keyword">this</span>);
01526             next_stime = fv_temp.<a class="code" href="classFileValue.html#a6">getNumber</a>();
01527             cout &lt;&lt; <span class="stringliteral">"next_stime: "</span> &lt;&lt; next_stime &lt;&lt; endl;
01528             iter++;
01529 
01530             <span class="comment">//Retrieve duration from FileValue</span>
01531             fv_temp = *iter;
01532             cout &lt;&lt; <span class="stringliteral">"next_dur FileValue: "</span> &lt;&lt; fv_temp &lt;&lt; endl;
01533             fv_temp.<a class="code" href="classFileValue.html#a23">Evaluate</a>(<span class="keyword">this</span>);
01534             next_dur = fv_temp.<a class="code" href="classFileValue.html#a6">getNumber</a>();
01535             cout &lt;&lt; <span class="stringliteral">"next_dur: "</span> &lt;&lt; next_dur &lt;&lt; endl;
01536             iter++;
01537 
01538             <span class="comment">//Retrieve type from FileValue</span>
01539             fv_temp = *iter;
01540             cout &lt;&lt; <span class="stringliteral">"next_type FileValue: "</span> &lt;&lt; fv_temp &lt;&lt; endl;
01541             fv_temp.<a class="code" href="classFileValue.html#a23">Evaluate</a>(<span class="keyword">this</span>);
01542             next_type = (<span class="keywordtype">int</span>) fv_temp.<a class="code" href="classFileValue.html#a6">getNumber</a>();
01543             cout &lt;&lt; <span class="stringliteral">"next_type: "</span> &lt;&lt; next_type &lt;&lt; endl;
01544 
01545             <a class="code" href="classEvent.html#o0">checkPoint</a> = next_stime; <span class="comment">// save how far we are</span>
01546             next_stime *= <a class="code" href="classEvent.html#o6">theDuration</a>; <span class="comment">// convert from % to sec</span>
01547         }
01548         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (method == <span class="stringliteral">"SWEEP"</span>)
01549         {
01550             <span class="comment">//Retrieve start time from FileValue</span>
01551             fv_temp = *iter;
01552             cout &lt;&lt; <span class="stringliteral">"next_stime FileValue: "</span> &lt;&lt; fv_temp &lt;&lt; endl;
01553             fv_temp.<a class="code" href="classFileValue.html#a23">Evaluate</a>();
01554             next_stime = fv_temp.<a class="code" href="classFileValue.html#a6">getNumber</a>();
01555             cout &lt;&lt; <span class="stringliteral">"next_stime: "</span> &lt;&lt; next_stime &lt;&lt; endl;
01556             iter++;
01557 
01558 
01559             <span class="comment">//Retrieve duration from FileValue</span>
01560             fv_temp = *iter;
01561             cout &lt;&lt; <span class="stringliteral">"next_dur FileValue: "</span> &lt;&lt; fv_temp &lt;&lt; endl;
01562             fv_temp.<a class="code" href="classFileValue.html#a23">Evaluate</a>();
01563             next_dur = fv_temp.<a class="code" href="classFileValue.html#a6">getNumber</a>();
01564             cout &lt;&lt; <span class="stringliteral">"next_dur: "</span> &lt;&lt; next_dur &lt;&lt; endl;
01565             iter++;
01566 
01567 
01568             <span class="comment">//Retrieve type from FileValue</span>
01569             fv_temp = *iter;
01570             cout &lt;&lt; <span class="stringliteral">"next_type FileValue: "</span> &lt;&lt; fv_temp &lt;&lt; endl;
01571             fv_temp.<a class="code" href="classFileValue.html#a23">Evaluate</a>();
01572             next_type = (<span class="keywordtype">int</span>) fv_temp.<a class="code" href="classFileValue.html#a6">getNumber</a>();
01573             cout &lt;&lt; <span class="stringliteral">"next_type: "</span> &lt;&lt; next_type &lt;&lt; endl;
01574 
01575             next_stime /= <a class="code" href="classEvent.html#o15">uPerSec</a>;  <span class="comment">//Set start time to the correct units</span>
01576             <a class="code" href="classEvent.html#o0">checkPoint</a> = (<span class="keywordtype">double</span>)next_stime / (<span class="keywordtype">double</span>)<a class="code" href="classEvent.html#o6">theDuration</a>; <span class="comment">//Save how far we are</span>
01577             next_dur /= <a class="code" href="classEvent.html#o15">uPerSec</a>; <span class="comment">//Set duration to the correct units</span>
01578             <a class="code" href="classEvent.html#p11">lastime</a> = next_stime + next_dur;  <span class="comment">//Set the end time</span>
01579         }
01580 
01581         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (method == <span class="stringliteral">"DISCRETE"</span>)
01582         {
01583             <span class="comment">//Retrieve slope from FileValue</span>
01584             fv_temp = *iter;
01585             fv_temp.<a class="code" href="classFileValue.html#a23">Evaluate</a>();
01586             slope = (<span class="keywordtype">int</span>) fv_temp.<a class="code" href="classFileValue.html#a6">getNumber</a>();
01587             iter++;
01588 
01589             <span class="comment">//Create attack, Duration, Matrices and go to event Discrete3</span>
01590             <a class="code" href="classEvent.html#a34">Event::NewAttackMethods</a>(*iter);     
01591             iter++;
01592 
01593             <a class="code" href="classEvent.html#a36">Event::NewDurationMethods</a>(*iter);
01594             iter++;
01595 
01596             <a class="code" href="classEvent.html#a51">Event::NewCreateMatrices</a>(*iter);
01597             <a class="code" href="classEvent.html#a31">Event::Discrete3</a>(slope);    
01598 
01599             next_stime = <a class="code" href="classEvent.html#o40">stimeSec</a>; <span class="comment">//Set start time to the correct units</span>
01600             next_dur = <a class="code" href="classEvent.html#o39">durSec</a>;
01601             next_type = <a class="code" href="classEvent.html#o45">type</a>;
01602         }
01603 
01604             cout&lt;&lt;<span class="stringliteral">"post processing next_stime: "</span>&lt;&lt;next_stime&lt;&lt;endl;
01605 
01606 
01607         <span class="comment">// If the subevent is not of type bottom, then create the next subEvent</span>
01608         <span class="keywordflow">if</span> (*(<a class="code" href="classEvent.html#o8">theName</a>) != <span class="charliteral">'B'</span>){
01609             <a class="code" href="classEvent.html#o12">subevents</a>.push_back(nextFactory-&gt;<a class="code" href="classEventFactory.html#a63">Build</a>(next_stime, next_dur, next_type, library));
01610 
01611             cout &lt;&lt; <span class="stringliteral">"\nEvent::CreateNewObjects - type="</span> &lt;&lt; <a class="code" href="classEvent.html#o45">type</a> &lt;&lt; <span class="stringliteral">" newObj="</span> &lt;&lt; <a class="code" href="classEvent.html#o44">newObj</a> &lt;&lt;
01612                 <span class="stringliteral">" numObjs="</span> &lt;&lt; numObjs &lt;&lt; <span class="stringliteral">" objID="</span> &lt;&lt; <a class="code" href="classEvent.html#o22">objID</a> &lt;&lt; <span class="stringliteral">" checkPoint="</span> &lt;&lt;
01613                 <a class="code" href="classEvent.html#o0">checkPoint</a> &lt;&lt; endl;
01614             cout &lt;&lt; <span class="stringliteral">"      stimeSec="</span> &lt;&lt; <a class="code" href="classEvent.html#o40">stimeSec</a> &lt;&lt; <span class="stringliteral">" durSec="</span> &lt;&lt; <a class="code" href="classEvent.html#o39">durSec</a> &lt;&lt; <span class="stringliteral">" loc="</span> &lt;&lt; 
01615                 <a class="code" href="classEvent.html#o42">loc0</a> &lt;&lt; endl;
01616         }
01617         <span class="keywordflow">else</span> {
01618         <span class="comment">// If bottom then implement one of the following three cases </span>
01619             <span class="keywordflow">if</span>(*(<a class="code" href="classEvent.html#o8">theName</a> + 2) == <span class="charliteral">'s'</span>) {                              <span class="comment">//soundfile</span>
01620                 <a class="code" href="classBottom.html">Bottom</a> *obj = <span class="keyword">new</span> <a class="code" href="classBottom.html">Bottom</a>();
01621                 obj-&gt;<a class="code" href="classBottom.html#a13">buildSound</a>(&amp;<a class="code" href="bottom_8cpp.html#a4">score</a>);
01622                 <a class="code" href="classEvent.html#o12">subevents</a>.push_back(obj);
01623             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*(<a class="code" href="classEvent.html#o8">theName</a> + 2) == <span class="charliteral">'n'</span>){          <span class="comment">//Printed Score</span>
01624                 this-&gt;<a class="code" href="classEvent.html#a58">buildNote</a>();
01625             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*(<a class="code" href="classEvent.html#o8">theName</a> + 2) == <span class="charliteral">'v'</span>){          <span class="comment">//Visual Events</span>
01626                 cout &lt;&lt; <span class="stringliteral">"Bottom::Implement - visual output not active yet"</span> &lt;&lt; endl;
01627                     cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
01628             } <span class="keywordflow">else</span> {
01629                 cout &lt;&lt; <span class="stringliteral">"Bottom::Implement - *(theName + 2) does not match any used "</span>
01630                    <span class="stringliteral">"character"</span> &lt;&lt; endl;
01631             }
01632         }
01633 
01634 <span class="comment">/*&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1.33*/</span>
01635 
01636         cout &lt;&lt; <span class="stringliteral">"Event: end of newObj="</span> &lt;&lt; <a class="code" href="classEvent.html#o44">newObj</a> &lt;&lt; endl;
01637         cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
01638     }
01639     cout &lt;&lt; <span class="stringliteral">"outside Event loop - should you be here ?"</span> &lt;&lt; endl;
01640     cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
01641 }
01642 <span class="comment">/*</span>
01643 <span class="comment">void Event::DefineSubEvent(const char *method)</span>
01644 <span class="comment">{</span>
01645 <span class="comment">    float slope;</span>
01646 <span class="comment"></span>
01647 <span class="comment">    list&lt;FileValue&gt;::const_iterator iter;</span>
01648 <span class="comment">    iter = data.begin();</span>
01649 <span class="comment"></span>
01650 <span class="comment">    method = (*iter).getString().c_str();</span>
01651 <span class="comment">    iter++;</span>
01652 <span class="comment"></span>
01653 <span class="comment">    if (strcasecmp(method, "CONTINUUM") == 0)   //continuous distribution</span>
01654 <span class="comment">    {</span>
01655 <span class="comment">        Event::Continuum(data);     //continuous probability</span>
01656 <span class="comment">        stimeSec += theStartTime;</span>
01657 <span class="comment">    }</span>
01658 <span class="comment">    if (strcasecmp(method, "DISCRETE") == 0)    //discrete matrix</span>
01659 <span class="comment">    {</span>
01660 <span class="comment">        if(newObj == 0) {</span>
01661 <span class="comment">            slope = iter-&gt;getNumber();</span>
01662 <span class="comment">//          Event::NewAttackMethods(data);      //methods for attacks</span>
01663 <span class="comment">//          Event::NewDurationMethods(data);        //methoasd for durations</span>
01664 <span class="comment">//          Event::NewCreateMatrices(data);</span>
01665 <span class="comment">        }</span>
01666 <span class="comment">//      Event::Discrete(slope);             //using discrete values</span>
01667 <span class="comment">    }</span>
01668 <span class="comment">    if (strcasecmp(method, "SWEEP") == 0)</span>
01669 <span class="comment">    {</span>
01670 <span class="comment">//      Event::Sweep(data);</span>
01671 <span class="comment">        stimeSec += theStartTime;</span>
01672 <span class="comment">    }</span>
01673 <span class="comment">    else</span>
01674 <span class="comment">    {</span>
01675 <span class="comment">        cout &lt;&lt; "Event: No method available to Create New Objects" &lt;&lt; endl;</span>
01676 <span class="comment">        cin &gt;&gt; sever;</span>
01677 <span class="comment">    }</span>
01678 <span class="comment">}</span>
01679 <span class="comment"></span>
01680 <span class="comment">*/</span>
01681 
01689 <span class="comment">//----------------------------------------------------------------------------//</span>
01690     
<a name="l01691"></a><a class="code" href="classEvent.html#a30">01691</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a30">Event::Continuum3</a>() {
01692   <span class="keywordtype">int</span> offset;
01693 
01694   offset = <a class="code" href="utility_8cpp.html#a18">ChooseOffset</a>(<a class="code" href="classEvent.html#o44">newObj</a>, -1);
01695   <a class="code" href="classEvent.html#o40">stimeSec</a> = <a class="code" href="utility_8cpp.html#a12">ReadComputeFloat</a>(<a class="code" href="classRandom.html#e1">Random::Rand</a>(), offset);      <span class="comment">//sTime, a %</span>
01696   <a class="code" href="classEvent.html#o0">checkPoint</a> = (<span class="keywordtype">double</span>)<a class="code" href="classEvent.html#o40">stimeSec</a>;
01697   <a class="code" href="classEvent.html#o40">stimeSec</a> *= <a class="code" href="classEvent.html#o6">theDuration</a>;
01698 
01699   offset = <a class="code" href="utility_8cpp.html#a18">ChooseOffset</a>(<a class="code" href="classEvent.html#o44">newObj</a>, -1);
01700   <a class="code" href="classEvent.html#o45">type</a> = <a class="code" href="utility_8cpp.html#a11">ReadComputeInt</a>(<a class="code" href="classEvent.html#o0">checkPoint</a>, offset);            <span class="comment">//type</span>
01701 
01702   offset = <a class="code" href="utility_8cpp.html#a18">ChooseOffset</a>(<a class="code" href="classEvent.html#o44">newObj</a>, <a class="code" href="classEvent.html#o45">type</a>); 
01703   <a class="code" href="classEvent.html#o39">durSec</a> = <a class="code" href="utility_8cpp.html#a12">ReadComputeFloat</a>(<a class="code" href="classEvent.html#o0">checkPoint</a>, offset);        <span class="comment">//duration</span>
01704   cout &lt;&lt; <span class="stringliteral">"Event::Continuum - durSec="</span> &lt;&lt; <a class="code" href="classEvent.html#o39">durSec</a> &lt;&lt;  <span class="stringliteral">" theDuration="</span> &lt;&lt;
01705    theDuration &lt;&lt; <span class="stringliteral">" objMaxDur="</span> &lt;&lt; <a class="code" href="classEvent.html#o14">objMaxDur</a> &lt;&lt;endl;
01706 
01707   <span class="comment">//controlling the duration: % or absolute value</span>
01708   <span class="keywordflow">if</span>(theDuration &gt; <a class="code" href="classEvent.html#o14">objMaxDur</a>) {             <span class="comment">//user specified max</span>
01709     <a class="code" href="classEvent.html#o39">durSec</a> *= (<span class="keywordtype">float</span>)<a class="code" href="classEvent.html#o14">objMaxDur</a> / (<span class="keywordtype">float</span>)<a class="code" href="classEvent.html#o15">uPerSec</a>;
01710   } <span class="keywordflow">else</span> {                          <span class="comment">//%</span>
01711     <a class="code" href="classEvent.html#o39">durSec</a> *= theDuration;
01712   }
01713 } 
01714 
01721 <span class="comment">//----------------------------------------------------------------------------//</span>
01722     
<a name="l01723"></a><a class="code" href="classEvent.html#a48">01723</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a48">Event::Continuum</a>(list&lt;FileValue&gt; data) 
01724 {
01725     <span class="keywordtype">int</span> offset;
01726 
01727     list&lt;FileValue&gt;::const_iterator iter;
01728     iter = data.begin();
01729 
01730     <span class="comment">// skip method</span>
01731     iter++;
01732 
01733 
01734     <a class="code" href="classEvent.html#o40">stimeSec</a> = iter-&gt;getNumber();       <span class="comment">//sTime, a %</span>
01735     <a class="code" href="classEvent.html#o0">checkPoint</a> = (<span class="keywordtype">double</span>)<a class="code" href="classEvent.html#o40">stimeSec</a>;
01736     <a class="code" href="classEvent.html#o40">stimeSec</a> *= <a class="code" href="classEvent.html#o6">theDuration</a>;
01737 
01738     iter++;
01739     <a class="code" href="classEvent.html#o39">durSec</a> = iter-&gt;getNumber();     <span class="comment">//Get duration</span>
01740     iter++;
01741     <a class="code" href="classEvent.html#o45">type</a> = (<span class="keywordtype">int</span>)(iter-&gt;getNumber());    <span class="comment">//Get type</span>
01742 
01743     cout &lt;&lt; <span class="stringliteral">"Event::Continuum - durSec="</span> &lt;&lt; <a class="code" href="classEvent.html#o39">durSec</a> &lt;&lt;  <span class="stringliteral">" theDuration="</span> &lt;&lt;
01744         theDuration &lt;&lt; <span class="stringliteral">" objMaxDur="</span> &lt;&lt; <a class="code" href="classEvent.html#o14">objMaxDur</a> &lt;&lt;endl;
01745 
01746     <span class="comment">//controlling the duration: % or absolute value</span>
01747     <span class="keywordflow">if</span>(theDuration &gt; <a class="code" href="classEvent.html#o14">objMaxDur</a>) {               <span class="comment">//user specified max</span>
01748         <a class="code" href="classEvent.html#o39">durSec</a> *= (<span class="keywordtype">float</span>)<a class="code" href="classEvent.html#o14">objMaxDur</a> / (<span class="keywordtype">float</span>)<a class="code" href="classEvent.html#o15">uPerSec</a>;
01749     } <span class="keywordflow">else</span> {                            <span class="comment">//%</span>
01750         <a class="code" href="classEvent.html#o39">durSec</a> *= theDuration;
01751     }
01752 } 
01753 
01754 
01764 <span class="comment">//----------------------------------------------------------------------------//</span>
01765 
<a name="l01766"></a><a class="code" href="classEvent.html#a32">01766</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a32">Event::Sweep3</a>() {
01767   <span class="keywordtype">int</span> offset;
01768   <span class="keywordtype">char</span> * valueType;
01769 
01770   <span class="keywordflow">if</span>(<a class="code" href="classEvent.html#o44">newObj</a> == 0) {
01771     <a class="code" href="classEvent.html#p11">lastime</a> = 0;                <span class="comment">//for first sound, 0</span>
01772   }
01773 
01774   <a class="code" href="classDataIn.html">DataIn</a> Es; 
01775   Es.<a class="code" href="classDataIn.html#a16">ReadChars</a>(1);              <span class="comment">//INT, INT_VP or FLOAT</span>
01776   valueType = Es.<a class="code" href="classDataIn.html#o16">nameOf</a>[0];
01777   offset = <a class="code" href="utility_8cpp.html#a18">ChooseOffset</a>(<a class="code" href="classEvent.html#o44">newObj</a>, -1);        <span class="comment">//depends only on object number</span>
01778 
01779   <span class="keywordflow">if</span>(strcmp(valueType, <span class="stringliteral">"INT"</span>) ==0) {                <span class="comment">//sTime</span>
01780     <a class="code" href="classEvent.html#o40">stimeSec</a> = (<span class="keywordtype">float</span>)<a class="code" href="utility_8cpp.html#a11">ReadComputeInt</a>(<a class="code" href="classEvent.html#p11">lastime</a> / <a class="code" href="classEvent.html#o6">theDuration</a>, offset);
01781     <a class="code" href="classEvent.html#o40">stimeSec</a> /= (<span class="keywordtype">float</span>)<a class="code" href="classEvent.html#o15">uPerSec</a>;
01782   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strcmp(valueType, <span class="stringliteral">"INT_VP"</span>) == 0) {
01783     <a class="code" href="classEvent.html#o40">stimeSec</a> = <a class="code" href="utility_8cpp.html#a2">ValuePick</a>(<a class="code" href="classEvent.html#p11">lastime</a> / 10., 10. * <a class="code" href="classEvent.html#o15">uPerSec</a>);
01784 <span class="comment">//  stimeSec = ValuePick(lastime / theDuration, theDuration * uPerSec);</span>
01785     cout &lt;&lt; <span class="stringliteral">"Event::Sweep3 - stimeSec="</span> &lt;&lt; <a class="code" href="classEvent.html#o40">stimeSec</a> &lt;&lt; <span class="stringliteral">" checkPoint="</span> &lt;&lt;
01786      <a class="code" href="classEvent.html#p11">lastime</a> / <a class="code" href="classEvent.html#o6">theDuration</a> &lt;&lt; endl;
01787     <a class="code" href="classEvent.html#o40">stimeSec</a> /= (<span class="keywordtype">float</span>)<a class="code" href="classEvent.html#o15">uPerSec</a>;
01788     cout &lt;&lt; <span class="stringliteral">"    now stimeSec="</span> &lt;&lt; <a class="code" href="classEvent.html#o40">stimeSec</a> &lt;&lt; <span class="stringliteral">" lastime="</span> &lt;&lt; <a class="code" href="classEvent.html#p11">lastime</a> &lt;&lt; endl;
01789   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strcmp(valueType, <span class="stringliteral">"FLOAT"</span>) == 0) {
01790     <a class="code" href="classEvent.html#o40">stimeSec</a> = <a class="code" href="utility_8cpp.html#a12">ReadComputeFloat</a>(<a class="code" href="classEvent.html#p11">lastime</a>, offset);
01791   }
01792   cout &lt;&lt; <span class="stringliteral">"Event::Sweep3 - stimeSec="</span> &lt;&lt; <a class="code" href="classEvent.html#o40">stimeSec</a> &lt;&lt; <span class="stringliteral">" theDuration="</span> &lt;&lt;
01793    <a class="code" href="classEvent.html#o6">theDuration</a> &lt;&lt; <span class="stringliteral">" lastime="</span> &lt;&lt; <a class="code" href="classEvent.html#p11">lastime</a> &lt;&lt; endl;
01794 
01795   <a class="code" href="classEvent.html#o0">checkPoint</a> = (<span class="keywordtype">double</span>)<a class="code" href="classEvent.html#o40">stimeSec</a> / (<span class="keywordtype">double</span>)<a class="code" href="classEvent.html#o6">theDuration</a>;  
01796 
01797   offset = <a class="code" href="utility_8cpp.html#a18">ChooseOffset</a>(<a class="code" href="classEvent.html#o44">newObj</a>, -1);            
01798   <a class="code" href="classEvent.html#o45">type</a> = <a class="code" href="utility_8cpp.html#a11">ReadComputeInt</a>(<a class="code" href="classEvent.html#o0">checkPoint</a>, offset);            <span class="comment">//type</span>
01799 
01800   Es.<a class="code" href="classDataIn.html#a16">ReadChars</a>(1);
01801   valueType = Es.<a class="code" href="classDataIn.html#o16">nameOf</a>[0];             <span class="comment">//INT, INT_VP or FLOAT</span>
01802   offset = <a class="code" href="utility_8cpp.html#a18">ChooseOffset</a>(<a class="code" href="classEvent.html#o44">newObj</a>, <a class="code" href="classEvent.html#o45">type</a>);          <span class="comment">//depends on type too</span>
01803 
01804   <span class="keywordflow">if</span>(strcmp(valueType, <span class="stringliteral">"INT"</span>) ==0) {                <span class="comment">//duration</span>
01805     <a class="code" href="classEvent.html#o39">durSec</a> = (<span class="keywordtype">float</span>)<a class="code" href="utility_8cpp.html#a11">ReadComputeInt</a>(<a class="code" href="classEvent.html#o0">checkPoint</a>, offset);
01806     <a class="code" href="classEvent.html#o39">durSec</a> /= (<span class="keywordtype">float</span>)<a class="code" href="classEvent.html#o15">uPerSec</a>;
01807   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strcmp(valueType, <span class="stringliteral">"INT_VP"</span>) == 0) {
01808     <a class="code" href="classEvent.html#o39">durSec</a> = <a class="code" href="utility_8cpp.html#a2">ValuePick</a>(<a class="code" href="classEvent.html#o0">checkPoint</a>, (<span class="keywordtype">float</span>)<a class="code" href="classEvent.html#o14">objMaxDur</a>);
01809     cout &lt;&lt; <span class="stringliteral">"Event::Sweep3 - first durSec="</span> &lt;&lt; <a class="code" href="classEvent.html#o39">durSec</a>&lt;&lt; endl;
01810     <a class="code" href="classEvent.html#o39">durSec</a> /= (<span class="keywordtype">float</span>)<a class="code" href="classEvent.html#o15">uPerSec</a>;
01811   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strcmp(valueType, <span class="stringliteral">"FLOAT"</span>) == 0) {
01812     <a class="code" href="classEvent.html#o39">durSec</a> = <a class="code" href="utility_8cpp.html#a12">ReadComputeFloat</a>(<a class="code" href="classEvent.html#o0">checkPoint</a>, offset);
01813 <span class="comment">//  durSec *= (float)objMaxDur / (float)uPerSec;</span>
01814   }
01815 
01816   <a class="code" href="classEvent.html#p11">lastime</a> = <a class="code" href="classEvent.html#o40">stimeSec</a> + <a class="code" href="classEvent.html#o39">durSec</a>;
01817    cout &lt;&lt; <span class="stringliteral">"        Event::Sweep3 - again lastime="</span> &lt;&lt; <a class="code" href="classEvent.html#p11">lastime</a> &lt;&lt; <span class="stringliteral">" stime="</span>
01818     &lt;&lt; <a class="code" href="classEvent.html#o40">stimeSec</a> &lt;&lt; <span class="stringliteral">" dur="</span> &lt;&lt; <a class="code" href="classEvent.html#o39">durSec</a> &lt;&lt; endl;
01819    cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
01820 }
01821 
01830 <span class="comment">//----------------------------------------------------------------------------//</span>
01831 <span class="comment">/*</span>
01832 <span class="comment">void Event::Sweep(list data) {</span>
01833 <span class="comment">  int offset;</span>
01834 <span class="comment">  char * valueType;</span>
01835 <span class="comment"></span>
01836 <span class="comment">  if(newObj == 0) {</span>
01837 <span class="comment">    lastime = 0;                //for first sound, 0</span>
01838 <span class="comment">  }</span>
01839 <span class="comment"></span>
01840 <span class="comment">  offset = ChooseOffset(newObj, -1);        //depends only on object number</span>
01841 <span class="comment"></span>
01842 <span class="comment">  valueType = Calculate(data[0]);</span>
01843 <span class="comment"></span>
01844 <span class="comment">  stimeSec = Compute(data[1]);</span>
01845 <span class="comment">  stimeSec /= (float)uPerSec;</span>
01846 <span class="comment"></span>
01847 <span class="comment">  cout &lt;&lt; "Event::Sweep3 - stimeSec=" &lt;&lt; stimeSec &lt;&lt; " theDuration=" &lt;&lt;</span>
01848 <span class="comment">   theDuration &lt;&lt; " lastime=" &lt;&lt; lastime &lt;&lt; endl;</span>
01849 <span class="comment"></span>
01850 <span class="comment">  checkPoint = (double)stimeSec / (double)theDuration;  </span>
01851 <span class="comment"></span>
01852 <span class="comment">  offset = ChooseOffset(newObj, -1);            </span>
01853 <span class="comment">//  type = ReadComputeInt(checkPoint, offset);          //type</span>
01854 <span class="comment">  type = Compute(data[2]);</span>
01855 <span class="comment"></span>
01856 <span class="comment">  durSec = Compute(data[3]);</span>
01857 <span class="comment">  durSec /= (float)uPerSec;</span>
01858 <span class="comment"></span>
01859 <span class="comment">  lastime = stimeSec + durSec;</span>
01860 <span class="comment">   cout &lt;&lt; "        Event::Sweep3 - again lastime=" &lt;&lt; lastime &lt;&lt; " stime="</span>
01861 <span class="comment">    &lt;&lt; stimeSec &lt;&lt; " dur=" &lt;&lt; durSec &lt;&lt; endl;</span>
01862 <span class="comment">   cin &gt;&gt; sever;</span>
01863 <span class="comment">}</span>
01864 <span class="comment"></span>
01865 <span class="comment">*/</span>
01866 
01867 <span class="comment">//----------------------------------------------------------------------------//</span>
01868 <span class="comment">// Discrete3.  Method for assigning values for stimeMatrix, type and durMatrix</span>
01869 <span class="comment">// using a matrix.</span>
01870 <span class="comment">//----------------------------------------------------------------------------//</span>
01871 
<a name="l01872"></a><a class="code" href="classEvent.html#a31">01872</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a31">Event::Discrete3</a>(<span class="keywordtype">int</span> slope) {
01873 
01874   <a class="code" href="classEvent.html#a52">Event::ObjCoordinates</a>();
01875 
01876   <span class="comment">// prepare the stimeMatrix (s0) matrix to reflect the last choice</span>
01877   <a class="code" href="classEvent.html#a54">Event::Adjustments</a>(slope);
01878 
01879   <a class="code" href="classEvent.html#a44">Event::TimeConvert</a>();
01880 }
01881 
01882 
01883 <span class="comment">//----------------------------------------------------------------------------//</span>
01884 <span class="comment">// Parameters.  Handles all parameters besides stime, type, and duration.</span>
01885 <span class="comment">//  could control ranges (duration, freq. register, modifiers [scales ?] -</span>
01886 <span class="comment">//  - like filters or masks or sieves? -, densities, and contrast between</span>
01887 <span class="comment">//  objects.</span>
01888 <span class="comment">//----------------------------------------------------------------------------//</span>
01889 
<a name="l01890"></a><a class="code" href="classEvent.html#a46">01890</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a46">Event::Parameters</a>(<span class="keywordtype">int</span> otherParams) {
01891 <span class="comment">/*</span>
01892 <span class="comment">  DataIn EP; EP.ReadDummies();</span>
01893 <span class="comment">  </span>
01894 <span class="comment">  for(int i=0; i &lt; otherParams; i++) {</span>
01895 <span class="comment">    EP.ReadInts(1);             //</span>
01896 <span class="comment">  }</span>
01897 <span class="comment">*/</span>
01898 }
01899 
01900 
01908 <span class="comment">//----------------------------------------------------------------------------//</span>
01909 
01910 <span class="comment">/*</span>
01911 <span class="comment">void Event::SelectNextEvent() {</span>
01912 <span class="comment">/*</span>
01913 <span class="comment">  // just for testing - remove afterwards</span>
01914 <span class="comment">  if(this-&gt;nameType[type] [0] == nameFlag[1]) {</span>
01915 <span class="comment">    cout &lt;&lt; " Event::SelectNextEvent - enter type of high level event" </span>
01916 <span class="comment">    &lt;&lt; " to be tested ";</span>
01917 <span class="comment">    cin &gt;&gt; type;</span>
01918 <span class="comment">    cout &lt;&lt; " stimeSec ";</span>
01919 <span class="comment">    cin &gt;&gt; stimeSec;</span>
01920 <span class="comment">    cout &lt;&lt; " and durSec ";</span>
01921 <span class="comment">    cin &gt;&gt; durSec;</span>
01922 <span class="comment">    cout &lt;&lt; endl;</span>
01923 <span class="comment">  }</span>
01924 <span class="comment">*</span>
01925 <span class="comment">  cout &lt;&lt; "                         Event::SelectNextEvent: " &lt;&lt; </span>
01926 <span class="comment">   (char *) this-&gt;nameType[type] &lt;&lt; endl;</span>
01927 <span class="comment"></span>
01928 <span class="comment">  if(this-&gt;nameType[type] [0] == nameFlag[0]) {</span>
01929 <span class="comment">//  Top t();</span>
01930 <span class="comment"></span>
01931 <span class="comment">  } else if(this-&gt;nameType[type] [0] == nameFlag[1]) {</span>
01932 <span class="comment">    High hi(stimeSec, durSec, type, (char *) this-&gt;nameType[type]);</span>
01933 <span class="comment">    hi.uPerSec = this-&gt;uPerSec;</span>
01934 <span class="comment">    hi.Print();</span>
01935 <span class="comment">    hi.checkPoint = this-&gt;checkPoint;</span>
01936 <span class="comment"></span>
01937 <span class="comment">    // open new obj file</span>
01938 <span class="comment">    DataIn sOpen((char *) this-&gt;nameType[type]);</span>
01939 <span class="comment">    hi.keepName = this-&gt;nameType[type];         //remember the filename</span>
01940 <span class="comment">    sOpen.rewindFile(0);</span>
01941 <span class="comment">    sOpen.~DataIn();</span>
01942 <span class="comment"></span>
01943 <span class="comment">    hi.Build();</span>
01944 <span class="comment">    hi.CreateNewObjects();</span>
01945 <span class="comment">  } else if(this-&gt;nameType[type] [0] == nameFlag[3]) {</span>
01946 <span class="comment">    Low low(stimeSec, durSec, type, (char *) this-&gt;nameType[type]);</span>
01947 <span class="comment">    low.uPerSec = this-&gt;uPerSec;</span>
01948 <span class="comment">    low.Print();</span>
01949 <span class="comment">    low.checkPoint = this-&gt;checkPoint;</span>
01950 <span class="comment"></span>
01951 <span class="comment">    // open new obj file</span>
01952 <span class="comment">    DataIn sOpen((char *) this-&gt;nameType[type]);</span>
01953 <span class="comment">    low.keepName = this-&gt;nameType[type];        //remember the filename</span>
01954 <span class="comment">    sOpen.rewindFile(0);</span>
01955 <span class="comment">    sOpen.~DataIn();</span>
01956 <span class="comment"></span>
01957 <span class="comment">    low.Build();</span>
01958 <span class="comment">    low.CreateNewObjects();</span>
01959 <span class="comment">  } else if(this-&gt;nameType[type] [0]  == nameFlag[4]) {</span>
01960 <span class="comment">    Bottom bottom(stimeSec, durSec, type, (char *) this-&gt;nameType[type]);</span>
01961 <span class="comment">    bottom.uPerSec = this-&gt;uPerSec;</span>
01962 <span class="comment">    bottom.Print();</span>
01963 <span class="comment">    bottom.checkPoint = this-&gt;checkPoint;</span>
01964 <span class="comment">    bottom.duRatio = this-&gt;duRatio;</span>
01965 <span class="comment"></span>
01966 <span class="comment">    // open new obj file</span>
01967 <span class="comment">    DataIn sOpen((char *) this-&gt;nameType[type]);</span>
01968 <span class="comment">    bottom.keepName = this-&gt;nameType[type];     //remember the filename</span>
01969 <span class="comment">    sOpen.rewindFile(0);</span>
01970 <span class="comment">    sOpen.~DataIn();</span>
01971 <span class="comment"></span>
01972 <span class="comment">    bottom.Build();</span>
01973 <span class="comment">    bottom.CreateNewObjects();</span>
01974 <span class="comment">  } else {</span>
01975 <span class="comment">    cout &lt;&lt; "don't know what kind of event this is" &lt;&lt; endl;</span>
01976 <span class="comment">    cout &lt;&lt; "nameType[" &lt;&lt; type &lt;&lt; "] [0]  =" &lt;&lt; this-&gt;nameType[type] [0] &lt;&lt; endl;</span>
01977 <span class="comment">  }</span>
01978 <span class="comment">  cout &lt;&lt; "END of Event::SelectNextEvent" &lt;&lt; endl;</span>
01979 <span class="comment">}*/</span>
01980 
01987 <span class="comment">//----------------------------------------------------------------------------//</span>
01988 <span class="comment">/*</span>
01989 <span class="comment">void Event::NextSubEvent() {</span>
01990 <span class="comment">  cout &lt;&lt; "                         Event::SelectNextEvent: " &lt;&lt; </span>
01991 <span class="comment">   (char *) this-&gt;nameType[type] &lt;&lt; endl;</span>
01992 <span class="comment"></span>
01993 <span class="comment">  //this-&gt;nameType[type] is the name of the file for next event</span>
01994 <span class="comment">    </span>
01995 <span class="comment"></span>
01996 <span class="comment"></span>
01997 <span class="comment">  cout &lt;&lt; "END of Event::SelectNextEvent" &lt;&lt; endl;</span>
01998 <span class="comment">}</span>
01999 <span class="comment">*/</span>
02000 
02001 
02002 <span class="comment">//----------------------------------------------------------------------------//</span>
02003 <span class="comment">// Test: nameType</span>
02004 <span class="comment">//----------------------------------------------------------------------------//</span>
02005 
<a name="l02006"></a><a class="code" href="classEvent.html#a49">02006</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a49">Event::TestNameType</a>() {
02007 
02008   cout &lt;&lt; <span class="stringliteral">"Event::TestNameType-"</span> &lt;&lt; endl;
02009   cout &lt;&lt; <span class="stringliteral">"                  (char **) nameType "</span> &lt;&lt; (<span class="keywordtype">char</span> **) <a class="code" href="classEvent.html#o10">nameType</a> &lt;&lt; endl;
02010   cout &lt;&lt; <span class="stringliteral">"                   maxTypes="</span> &lt;&lt; <a class="code" href="classEvent.html#o17">maxTypes</a> &lt;&lt; <span class="stringliteral">" numChars="</span> &lt;&lt; <a class="code" href="classEvent.html#o18">numChars</a>;
02011   cout &lt;&lt; endl;
02012 
02013   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classEvent.html#o17">maxTypes</a>; i++ ) {
02014 
02015     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; this-&gt;numChars; j++) {
02016 
02017 <span class="comment">//DEBUGGING OUTPUT</span>
02018 <span class="comment">//    cout &lt;&lt; "   nameType[" &lt;&lt; i &lt;&lt; "][" &lt;&lt; j &lt;&lt; "]=" &lt;&lt; this-&gt;nameType [i] [j]</span>
02019 <span class="comment">//      &lt;&lt; endl;</span>
02020 
02021       cout &lt;&lt; this-&gt;<a class="code" href="classEvent.html#o10">nameType</a> [i] [j];
02022     }
02023     cout &lt;&lt; endl;
02024   }
02025   cin &gt;&gt; <a class="code" href="main_8cpp.html#a7">sever</a>;
02026 }
02027 
<a name="l02028"></a><a class="code" href="classEvent.html#a53">02028</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a53">Event::buildScore</a>(Score *s)
02029 {
02030     list&lt;Event*&gt;::const_iterator iter;
02031 
02032     <span class="keywordflow">for</span> (iter=<a class="code" href="classEvent.html#o12">subevents</a>.begin(); iter != <a class="code" href="classEvent.html#o12">subevents</a>.end(); iter++)
02033     {
02034         (*iter)-&gt;buildScore(s);
02035     }
02036 }
02037 
<a name="l02038"></a><a class="code" href="classEvent.html#a58">02038</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a58">Event::buildNote</a>()
02039 {
02040     this-&gt;<a class="code" href="classEvent.html#a57">Print</a>();
02041     list&lt;Event*&gt;::iterator iter;
02042     <span class="keywordflow">for</span>(iter=<a class="code" href="classEvent.html#o12">subevents</a>.begin(); iter!=<a class="code" href="classEvent.html#o12">subevents</a>.end(); iter++)
02043         (*iter)-&gt;buildNote();
02044 }
02045 
<a name="l02046"></a><a class="code" href="classEvent.html#a57">02046</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a57">Event::Print</a>()
02047 {
02048     cout &lt;&lt; <a class="code" href="classEvent.html#o8">theName</a> &lt;&lt; <span class="stringliteral">": "</span> &lt;&lt; <span class="stringliteral">"start: "</span> &lt;&lt; <a class="code" href="classEvent.html#o5">theStartTime</a> 
02049          &lt;&lt; <span class="stringliteral">" duration: "</span> &lt;&lt; <a class="code" href="classEvent.html#o6">theDuration</a> &lt;&lt; <span class="stringliteral">" type: "</span> &lt;&lt; <a class="code" href="classEvent.html#o7">theType</a> &lt;&lt; endl;
02050     cout &lt;&lt; <span class="stringliteral">"\tsubevents: "</span>;
02051     list&lt;Event*&gt;::const_iterator iter;
02052     <span class="keywordflow">for</span> (iter=<a class="code" href="classEvent.html#o12">subevents</a>.begin(); iter != <a class="code" href="classEvent.html#o12">subevents</a>.end(); iter++)
02053     {
02054         cout &lt;&lt; (*iter)-&gt;theName;
02055     }
02056 
02057     cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">"\tnameType: "</span>;
02058     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classEvent.html#o21">numObjs</a>; i++)
02059         cout &lt;&lt; <a class="code" href="classEvent.html#o10">nameType</a>[i] &lt;&lt; <span class="stringliteral">" "</span>;
02060     cout &lt;&lt; endl;   
02061 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Feb 12 14:24:38 2007 for CMOD by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
