<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CMOD: matrix.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>matrix.cpp</h1><a href="matrix_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment">CMOD (composition module)</span>
00003 <span class="comment">Copyright (C) 2005  Sever Tipei (s-tipei@uiuc.edu)</span>
00004 <span class="comment">                                                                                </span>
00005 <span class="comment">This program is free software; you can redistribute it and/or</span>
00006 <span class="comment">modify it under the terms of the GNU General Public License</span>
00007 <span class="comment">as published by the Free Software Foundation; either version 2</span>
00008 <span class="comment">of the License, or (at your option) any later version.</span>
00009 <span class="comment">                                                                                </span>
00010 <span class="comment">This program is distributed in the hope that it will be useful,</span>
00011 <span class="comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00012 <span class="comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00013 <span class="comment">GNU General Public License for more details.</span>
00014 <span class="comment">                                                                                </span>
00015 <span class="comment">You should have received a copy of the GNU General Public License</span>
00016 <span class="comment">along with this program; if not, write to the Free Software</span>
00017 <span class="comment">Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
00018 <span class="comment">*/</span>
00019 
00020 <span class="comment">//----------------------------------------------------------------------------//</span>
00021 <span class="comment">//</span>
00022 <span class="comment">// matrix.cpp</span>
00023 <span class="comment">//----------------------------------------------------------------------------//</span>
00024 
00025 
00026 <span class="preprocessor">#include &lt;sstream&gt;</span>
00027 <span class="preprocessor">#include &lt;iostream&gt;</span>
00028 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00029 
00030 <span class="preprocessor">#include &lt;cmath&gt;</span>
00031 <span class="preprocessor">#include &lt;cstdlib&gt;</span>
00032 <span class="comment">//#include &lt;values.h&gt;</span>
00033 <span class="preprocessor">#include &lt;limits.h&gt;</span>
00034 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
00035 
00036 <span class="preprocessor">#include "<a class="code" href="dataIn_8h.html">dataIn.h</a>"</span>
00037 <span class="preprocessor">#include "<a class="code" href="matrix_8h.html">matrix.h</a>"</span>
00038 <span class="preprocessor">#include "<a class="code" href="utility_8h.html">utility.h</a>"</span>
00039 <span class="preprocessor">#include "<a class="code" href="random_8h.html">random.h</a>"</span>
00040 
00041 <span class="preprocessor">#include "../../LASS/src/lib.h"</span>
00042 
<a name="l00043"></a><a class="code" href="matrix_8cpp.html#a0">00043</a> <span class="keyword">extern</span> EnvelopeLibrary <a class="code" href="bottom_8cpp.html#a1">envlib</a>;
00044 
00045 
<a name="l00051"></a><a class="code" href="classMatrix.html#a0">00051</a> <a class="code" href="classMatrix.html#a0">Matrix::Matrix</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">double</span> init) {
00052   this-&gt;<a class="code" href="classMatrix.html#o2">matrix</a> = NULL;
00053   this-&gt;x = this-&gt;y = 0;
00054   this-&gt;<a class="code" href="classMatrix.html#a24">SetDim</a>(x, y);
00055   this-&gt;<a class="code" href="classMatrix.html#a26">Init</a>(init);
00056 }
00057 
00058 
00064 <span class="comment">//Matrix::Matrix(const Matrix *m) {</span>
00065 <span class="comment">//  Matrix((*m));</span>
00066 <span class="comment">//}</span>
00067 
00068 
<a name="l00074"></a><a class="code" href="classMatrix.html#a1">00074</a> <a class="code" href="classMatrix.html#a0">Matrix::Matrix</a>(<span class="keyword">const</span> <a class="code" href="classMatrix.html">Matrix</a>&amp; m) {
00075   this-&gt;<a class="code" href="classMatrix.html#o2">matrix</a> = NULL;
00076   this-&gt;<a class="code" href="classMatrix.html#a24">SetDim</a>(m.<a class="code" href="classMatrix.html#r2">x</a>, m.<a class="code" href="classMatrix.html#r3">y</a>);
00077 
00078   <span class="keywordtype">int</span> i, j;
00079   <span class="keywordflow">for</span>( i = 0; i &lt; m.<a class="code" href="classMatrix.html#r2">x</a>; i++ ) {
00080     this-&gt;<a class="code" href="classMatrix.html#r4">_vector</a>[i] = m.<a class="code" href="classMatrix.html#r4">_vector</a>[i];
00081     <span class="keywordflow">for</span>( j = 0; j &lt; m.<a class="code" href="classMatrix.html#r3">y</a>; j++ ) {
00082       this-&gt;<a class="code" href="classMatrix.html#o2">matrix</a>[i][j] = m.<a class="code" href="classMatrix.html#o2">matrix</a>[i][j];
00083     }
00084   }
00085 }
00086 
00087 
00093 <span class="comment">//----------------------------------------------------------------------------//</span>
00094 
<a name="l00095"></a><a class="code" href="classMatrix.html#a2">00095</a> <a class="code" href="classMatrix.html#a2">Matrix::~Matrix</a>() {
00096   this-&gt;<a class="code" href="classMatrix.html#a29">Clear</a>();
00097 }
00098 
00099 
<a name="l00100"></a><a class="code" href="classMatrix.html#a4">00100</a> <span class="keywordtype">double</span> <a class="code" href="classMatrix.html#a4">Matrix::operator()</a>(<span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b)
00101 {
00102     <span class="keywordflow">return</span> <a class="code" href="classMatrix.html#o2">matrix</a>[a][b];
00103 }
00104 
00110 <span class="comment">//----------------------------------------------------------------------------//</span>
00111 
<a name="l00112"></a><a class="code" href="classMatrix.html#a24">00112</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a24">Matrix::SetDim</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y) {
00113 
00114   <span class="keywordflow">if</span> ( this-&gt;<a class="code" href="classMatrix.html#o2">matrix</a> != NULL ) {
00115     this-&gt;<a class="code" href="classMatrix.html#a29">Clear</a>();
00116   }
00117 
00118   this-&gt;x = x;
00119   this-&gt;y = y;
00120   this-&gt;<a class="code" href="classMatrix.html#o2">matrix</a> = <span class="keyword">new</span> <span class="keywordtype">double</span>*[x];
00121   this-&gt;<a class="code" href="classMatrix.html#r4">_vector</a> = <span class="keyword">new</span> <span class="keywordtype">double</span>[x]; 
00122   <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; x; i++ ) {
00123     this-&gt;<a class="code" href="classMatrix.html#o2">matrix</a>[i] = <span class="keyword">new</span> <span class="keywordtype">double</span>[y];
00124     this-&gt;<a class="code" href="classMatrix.html#r4">_vector</a>[i] = 0;
00125   }
00126 }
00127 
00128 
00134 <span class="comment">//----------------------------------------------------------------------------//</span>
00135 
<a name="l00136"></a><a class="code" href="classMatrix.html#a30">00136</a> <span class="keywordtype">int</span> <a class="code" href="classMatrix.html#a30">Matrix::GetX</a>() {
00137   <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMatrix.html#r2">x</a>;
00138 }
00139 
00140 
00146 <span class="comment">//----------------------------------------------------------------------------//</span>
00147 
<a name="l00148"></a><a class="code" href="classMatrix.html#a31">00148</a> <span class="keywordtype">int</span> <a class="code" href="classMatrix.html#a31">Matrix::GetY</a>() {
00149   <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMatrix.html#r3">y</a>;
00150 }
00151 
00152 
00158 <span class="comment">//----------------------------------------------------------------------------//</span>
00159 
<a name="l00160"></a><a class="code" href="classMatrix.html#a26">00160</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a26">Matrix::Init</a>(<span class="keywordtype">double</span> init) {
00161   <span class="keywordtype">int</span> i, j;
00162   <span class="keywordflow">for</span> ( j = 0; j &lt; <a class="code" href="classMatrix.html#r3">y</a>; j++ ) {
00163     <span class="keywordflow">for</span> ( i = 0; i &lt; <a class="code" href="classMatrix.html#r2">x</a>; i++ ) {
00164       <a class="code" href="classMatrix.html#o2">matrix</a>[i][j] = init;
00165     }
00166   }
00167 }
00168 
00169 
00175 <span class="comment">//----------------------------------------------------------------------------//</span>
00176 
<a name="l00177"></a><a class="code" href="classMatrix.html#a29">00177</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a29">Matrix::Clear</a>() {
00178   <span class="keywordtype">int</span> i;
00179   <span class="keywordflow">if</span> ( this-&gt;<a class="code" href="classMatrix.html#o2">matrix</a> != NULL ) {
00180     <span class="keywordflow">for</span> ( i = 0; i &lt; this-&gt;<a class="code" href="classMatrix.html#r2">x</a>; i++ ) {
00181       <span class="keyword">delete</span> [] (<span class="keywordtype">double</span>*)<a class="code" href="classMatrix.html#o2">matrix</a>[i];
00182     }
00183     <span class="keyword">delete</span> [] (<span class="keywordtype">double</span>**)<a class="code" href="classMatrix.html#o2">matrix</a>;
00184     this-&gt;x = this-&gt;<a class="code" href="classMatrix.html#r3">y</a> = 0;
00185   }
00186   <span class="keywordflow">if</span> ( this-&gt;<a class="code" href="classMatrix.html#r4">_vector</a> != NULL ) {
00187     <span class="keyword">delete</span> [] <a class="code" href="classMatrix.html#r4">_vector</a>;
00188   }
00189 }
00190 
00191 
00197 <span class="comment">//----------------------------------------------------------------------------//</span>
00198 
<a name="l00199"></a><a class="code" href="classMatrix.html#a3">00199</a> <a class="code" href="classMatrix.html">Matrix</a> &amp; <a class="code" href="classMatrix.html#a3">Matrix::operator=</a>(<a class="code" href="classMatrix.html">Matrix</a> &amp;m) {
00200   this-&gt;<a class="code" href="classMatrix.html#a29">Clear</a>();
00201   this-&gt;<a class="code" href="classMatrix.html#a24">SetDim</a>(m.<a class="code" href="classMatrix.html#r2">x</a>, m.<a class="code" href="classMatrix.html#r3">y</a>);
00202   <span class="keywordtype">int</span> i, j;
00203   <span class="keywordflow">for</span>( i = 0; i &lt; m.<a class="code" href="classMatrix.html#r2">x</a>; i++ ) {
00204     this-&gt;<a class="code" href="classMatrix.html#r4">_vector</a>[i] = m.<a class="code" href="classMatrix.html#r4">_vector</a>[i];
00205     <span class="keywordflow">for</span>( j = 0; j &lt; m.<a class="code" href="classMatrix.html#r3">y</a>; j++ ) {
00206       this-&gt;<a class="code" href="classMatrix.html#o2">matrix</a>[i][j] = m.<a class="code" href="classMatrix.html#o2">matrix</a>[i][j];
00207     }
00208   }
00209   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00210 }
00211 
00212 
00218 <span class="comment">//----------------------------------------------------------------------------//</span>
00219 
<a name="l00220"></a><a class="code" href="matrix_8cpp.html#a1">00220</a> ostream &amp; <a class="code" href="matrix_8cpp.html#a1">operator&lt;&lt;</a>(ostream &amp;s, <a class="code" href="classMatrix.html">Matrix</a> &amp;m) {
00221   <span class="keywordtype">int</span> i, j;
00222   <span class="keywordflow">for</span>( j = 0; j &lt; m.<a class="code" href="classMatrix.html#r3">y</a>; j++ ) {
00223     <span class="keywordflow">for</span>( i = 0; i &lt; m.<a class="code" href="classMatrix.html#r2">x</a>; i++ ) {
00224       s &lt;&lt; m.<a class="code" href="classMatrix.html#o2">matrix</a>[i][j] &lt;&lt; <span class="stringliteral">" "</span>;
00225     }
00226     s &lt;&lt; endl;
00227   }
00228   <span class="keywordflow">return</span> s;
00229 }
00230 
00231 
00244 <span class="comment">//----------------------------------------------------------------------------//</span>
00245 
<a name="l00246"></a><a class="code" href="classMatrix.html#a9">00246</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a9">Matrix::AdjustVector</a>(<span class="keywordtype">int</span> type, <span class="keywordtype">int</span> remainO, <span class="keywordtype">int</span> from, <span class="keywordtype">int</span> to) {
00247   <span class="keywordtype">double</span> sum = 0;
00248  
00249 <span class="comment">/* </span>
00250 <span class="comment">   cout &lt;&lt; "Matrix::AdjustVector - type=" &lt;&lt; type &lt;&lt; " remainO=" &lt;&lt;</span>
00251 <span class="comment">   remainO &lt;&lt; " from=" &lt;&lt; from &lt;&lt; " to=" &lt;&lt; to &lt;&lt; endl;</span>
00252 <span class="comment">*/</span>
00253   <span class="keywordflow">if</span>(remainO == -1) {
00254     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = from; i &lt;= to; i++) {
00255       this-&gt;<a class="code" href="classMatrix.html#r4">_vector</a>[i] = 0;
00256     }
00257   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(remainO &gt;= 0) {
00258     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMatrix.html#r3">y</a>; i++) {
00259       <span class="keywordflow">if</span>(<a class="code" href="classMatrix.html#o2">matrix</a> [type] [i] != 0) {
00260         this-&gt;<a class="code" href="classMatrix.html#r4">_vector</a>[type] -= 1. / (<span class="keywordtype">float</span>) (remainO + 1);
00261         <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMatrix.html#r4">_vector</a>[type] &lt; 0) this-&gt;<a class="code" href="classMatrix.html#r4">_vector</a>[type] = 0;
00262 
00263         cout &lt;&lt; <span class="stringliteral">"     matrix ["</span> &lt;&lt; type &lt;&lt; <span class="stringliteral">"]["</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">"]="</span> &lt;&lt; <a class="code" href="classMatrix.html#o2">matrix</a> [type] [i]
00264          &lt;&lt; <span class="stringliteral">" _vector["</span> &lt;&lt; type &lt;&lt; <span class="stringliteral">"]="</span> &lt;&lt; <a class="code" href="classMatrix.html#r4">_vector</a>[type] &lt;&lt; endl;
00265 
00266         <span class="keywordflow">break</span>;
00267       } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(i == y - 1) {
00268         this-&gt;<a class="code" href="classMatrix.html#r4">_vector</a>[type] = 0;
00269       }
00270     }
00271   } <span class="keywordflow">else</span> {
00272     cout &lt;&lt; <span class="stringliteral">"Matrix::adjustVector - invalid value: remainO="</span> &lt;&lt; remainO &lt;&lt; endl;
00273     cin &gt;&gt; <a class="code" href="classMatrix.html#r1">sever</a>;
00274   }
00275 
00276 <span class="comment">//cout &lt;&lt; "Matrix::adjustVector - adjusted vector:" &lt;&lt; endl;</span>
00277   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = from; i &lt;= to; i++) {
00278     sum += this-&gt;<a class="code" href="classMatrix.html#r4">_vector</a>[i];
00279 <span class="comment">//  cout &lt;&lt; " vector[" &lt;&lt; i &lt;&lt; "]=" &lt;&lt; this-&gt;vector[i] &lt;&lt; "  "; </span>
00280   }
00281 <span class="comment">//cout &lt;&lt; " sum=" &lt;&lt; sum &lt;&lt; endl;</span>
00282 
00283   <span class="keywordflow">if</span>(sum &gt; 0) {
00284     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = from; i &lt;= to; i++) {
00285       this-&gt;<a class="code" href="classMatrix.html#r4">_vector</a>[i] /= sum;
00286     }
00287   }
00288 }
00289 
00290 
00295 <span class="comment">//----------------------------------------------------------------------------//</span>
00296 
<a name="l00297"></a><a class="code" href="classMatrix.html#a10">00297</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a10">Matrix::AdjustMatrix</a>(<span class="keywordtype">int</span> type, <span class="keywordtype">int</span> stimeMatrix, <span class="keywordtype">int</span> endLocM, <span class="keywordtype">int</span> slope, 
00298  <span class="keywordtype">int</span> from, <span class="keywordtype">int</span> to) {
00299 
00300   <span class="comment">// for each matrix line (type) block the stimesMatrix covered by the</span>
00301   <span class="comment">// new durMatrix (make them 0) and smooth the surrounding</span>
00302   <span class="comment">// probabilities according to a given slope</span>
00303   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = from; j &lt;= to ; j++) {
00304     <a class="code" href="classMatrix.html#d0">Smooth</a>(j, slope, stimeMatrix, 0, -1);
00305 
00306     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = stimeMatrix; i &lt; endLocM; i++) {
00307       <a class="code" href="classMatrix.html#o2">matrix</a>[j] [i] = 0;  
00308     }
00309 
00310     <a class="code" href="classMatrix.html#d0">Smooth</a>(j, 1, endLocM - 1, <a class="code" href="classMatrix.html#r3">y</a> - 1, 1);
00311   }
00312 <span class="comment">/*</span>
00313 <span class="comment">  cout &lt;&lt; "Matrix::adjustMatrix - adjusted:" &lt;&lt; endl;</span>
00314 <span class="comment">  Matrix::Print();</span>
00315 <span class="comment">  cin &gt;&gt; sever;</span>
00316 <span class="comment">*/</span>
00317 }
00318 
00319 
00328 <span class="comment">//----------------------------------------------------------------------------//</span>
00329 
<a name="l00330"></a><a class="code" href="classMatrix.html#d0">00330</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#d0">Matrix::Smooth</a>(<span class="keywordtype">int</span> line, <span class="keywordtype">int</span> slope, <span class="keywordtype">int</span> start, <span class="keywordtype">int</span> finish, <span class="keywordtype">int</span> flag) {
00331   <span class="keywordtype">int</span> interval, newFinish;
00332   <span class="keywordtype">double</span> increment;
00333 
00334   <span class="comment">// for the length of the slope</span>
00335   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt;= slope; i++) {
00336     interval = i;
00337 
00338     <span class="comment">// stop if it encounters matrix locations with 0 value.</span>
00339     <span class="keywordflow">if</span>(<a class="code" href="classMatrix.html#o2">matrix</a>[line] [start + i * flag] &lt;= 0) {
00340       <span class="keywordflow">if</span>(interval &gt; 1) {
00341         interval = int(floor(<span class="keywordtype">double</span>(interval) / 2. + 0.5));
00342         <span class="keywordflow">break</span>;
00343       }
00344     }
00345 
00346     <span class="comment">// stop if interval is greater than the distance between sound and the </span>
00347     <span class="comment">// edge of the matrix.</span>
00348     <span class="keywordflow">if</span>(interval &gt;= abs(finish - start))
00349       <span class="keywordflow">break</span>;
00350   }
00351 
00352   <span class="comment">// define new finish point</span>
00353   newFinish = start + interval * flag;
00354 
00355   <span class="keywordflow">if</span>(newFinish &lt; 0 || newFinish &gt; <a class="code" href="classMatrix.html#r3">y</a> - 1) {
00356 <span class="comment">//  cout &lt;&lt; "Matrix::smooth - interval=" &lt;&lt; interval &lt;&lt; " newFinish=" &lt;&lt; </span>
00357 <span class="comment">//  newFinish &lt;&lt; " start=" &lt;&lt; start &lt;&lt; endl;</span>
00358     <span class="keywordflow">return</span>;
00359   }
00360 
00361   <span class="comment">// compute increment for the slope</span>
00362   increment = <a class="code" href="classMatrix.html#o2">matrix</a>[line] [newFinish] / abs(newFinish - start);
00363 
00364   <span class="comment">// apply the increment at each point of the slope</span>
00365   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt; interval; i++) {
00366     matrix[line] [start + i * flag] = i * increment;
00367   }
00368 }
00369 
00370 
00377 <span class="comment">//----------------------------------------------------------------------------//</span>
00378 
<a name="l00379"></a><a class="code" href="classMatrix.html#a5">00379</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a5">Matrix::IncludeArray</a>(<span class="keywordtype">double</span> array[], <span class="keywordtype">int</span> from, <span class="keywordtype">int</span> to) {
00380 
00381   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = from; i &lt; to ; i++) {
00382     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="classMatrix.html#r3">y</a>; j++) { 
00383       <a class="code" href="classMatrix.html#o2">matrix</a>[i] [j] *= array[j];
00384     }
00385   }
00386 
00387 }
00388 
00389 
00395 <span class="comment">//----------------------------------------------------------------------------//</span>
00396 
<a name="l00397"></a><a class="code" href="classMatrix.html#a8">00397</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a8">Matrix::IncludeVector</a>() {
00398 
00399   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMatrix.html#r2">x</a> ; i++) {
00400     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="classMatrix.html#r3">y</a>; j++) {
00401       <a class="code" href="classMatrix.html#o2">matrix</a>[i] [j] *= <a class="code" href="classMatrix.html#r4">_vector</a>[i];
00402     }
00403   }
00404 }
00405 
00406 
00407 
00411 <span class="comment">//----------------------------------------------------------------------------//</span>
00412 
<a name="l00413"></a><a class="code" href="classMatrix.html#a11">00413</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a11">Matrix::BuildMatrix</a>(<span class="keywordtype">double</span> array[]) {
00414 <span class="comment">/*</span>
00415 <span class="comment">  Matrix::IncludeArray(array);</span>
00416 <span class="comment">  Matrix::IncludeVector();</span>
00417 <span class="comment">  Matrix::Normalize();</span>
00418 <span class="comment">*/</span>
00419 }
00420 
00421 
00430 <span class="comment">//----------------------------------------------------------------------------//</span>
00431 
<a name="l00432"></a><a class="code" href="classMatrix.html#a14">00432</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a14">Matrix::ChooseM</a> () {
00433   <span class="keywordtype">int</span> i, j;
00434   <span class="keywordtype">double</span> randomNumber = <a class="code" href="classRandom.html#e1">Random::Rand</a>();
00435 
00436   <span class="keywordflow">for</span>(i= 0; i&lt; <a class="code" href="classMatrix.html#r2">x</a>; i++) {
00437     <span class="keywordflow">for</span>(j = 0; j &lt; <a class="code" href="classMatrix.html#r3">y</a>; j++) {
00438       <span class="keywordflow">if</span>(randomNumber &lt;= <a class="code" href="classMatrix.html#o2">matrix</a>[i] [j]) {
00439         this-&gt;<a class="code" href="classMatrix.html#o0">col</a> = i;
00440         this-&gt;<a class="code" href="classMatrix.html#o1">row</a> = j;
00441     cout &lt;&lt; <span class="stringliteral">"Matrix::ChooseM - randomNumber="</span> &lt;&lt; randomNumber &lt;&lt; <span class="stringliteral">" matrix["</span>
00442     &lt;&lt; i &lt;&lt; <span class="stringliteral">"] ["</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">"]="</span> &lt;&lt; matrix[i][j] &lt;&lt; endl;
00443         <span class="keywordflow">return</span>;
00444       }
00445     }
00446   }
00447   this-&gt;<a class="code" href="classMatrix.html#o0">col</a> = 0;
00448   this-&gt;<a class="code" href="classMatrix.html#o1">row</a> = 0;
00449   cout &lt;&lt; <span class="stringliteral">"Matrix::chooseM - randomNumber ="</span> &lt;&lt; randomNumber &lt;&lt;
00450     <span class="stringliteral">" no match :(   x="</span> &lt;&lt; x &lt;&lt; <span class="stringliteral">" y="</span> &lt;&lt; <a class="code" href="classMatrix.html#r3">y</a> &lt;&lt; endl;
00451   cout &lt;&lt; <span class="stringliteral">"   MATRIX:"</span> &lt;&lt; endl;
00452   <a class="code" href="classMatrix.html#a27">Matrix::Print</a>();
00453 }
00454 
<a name="l00462"></a><a class="code" href="classMatrix.html#a15">00462</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a14">Matrix::ChooseM</a> (<span class="keywordtype">int</span> &amp;r, <span class="keywordtype">int</span> &amp;c)
00463 {
00464     <a class="code" href="classMatrix.html#a14">ChooseM</a>();
00465     r = <a class="code" href="classMatrix.html#o1">row</a>;
00466     c = <a class="code" href="classMatrix.html#o0">col</a>;
00467 }
00468 
00469 
00475 <span class="comment">//----------------------------------------------------------------------------//</span>
00476 
00477 <span class="comment">/* replaced below</span>
00478 <span class="comment">void Matrix::Envelopes(char * fileName) {</span>
00479 <span class="comment">  long locM = 0;</span>
00480 <span class="comment">  float value;</span>
00481 <span class="comment">  char * method, * envFile;</span>
00482 <span class="comment"></span>
00483 <span class="comment">//cout &lt;&lt; "Matrix::envelopes - x=" &lt;&lt; x &lt;&lt; " y=" &lt;&lt; y &lt;&lt; endl;</span>
00484 <span class="comment"></span>
00485 <span class="comment">  Envelope *env;                //create a pointer to an envelope </span>
00486 <span class="comment">  //how many such envelopes (env) we need ? (as many as rows)</span>
00487 <span class="comment">  DataIn En; En.ReadDummies();</span>
00488 <span class="comment"></span>
00489 <span class="comment">  En.ReadChars(1);</span>
00490 <span class="comment">  method = En.nameOf[0];</span>
00491 <span class="comment">//cout &lt;&lt; "Matrix::Envelopes - method: " &lt;&lt; method &lt;&lt; endl;</span>
00492 <span class="comment"></span>
00493 <span class="comment">  for(int subScript = 0; subScript &lt; x; subScript++) {</span>
00494 <span class="comment">    </span>
00495 <span class="comment">    if(subScript == 0) {</span>
00496 <span class="comment">      locM = En.fileLoc();              //remember loc this file</span>
00497 <span class="comment">    } else if(subScript &gt; 0) {</span>
00498 <span class="comment">      En.rewindFile(locM);</span>
00499 <span class="comment">    }</span>
00500 <span class="comment"></span>
00501 <span class="comment">    if(strcmp(method, "OLD") == 0) {</span>
00502 <span class="comment">/*</span>
00503 <span class="comment">      if(subScript == 0) {</span>
00504 <span class="comment">        locM = En.fileLoc();                //remember loc this file</span>
00505 <span class="comment">      } else if(subScript &gt; 0) {</span>
00506 <span class="comment">        En.rewindFile(locM);</span>
00507 <span class="comment">      }</span>
00508 <span class="comment">*</span>
00509 <span class="comment">      // load envellopes from the library, one  for each column</span>
00510 <span class="comment">      env = FitEnvelope((double)subScript / (double)(x - 1), subScript);</span>
00511 <span class="comment">    } else if(strcmp(method, "SEG_BUILDER") == 0) {</span>
00512 <span class="comment">      if(subScript == 0) {</span>
00513 <span class="comment">        locM = En.fileLoc();                //remember loc this file</span>
00514 <span class="comment">/*</span>
00515 <span class="comment">        En.ReadChars(1);</span>
00516 <span class="comment">        envFile = En.nameOf[0];                     //ENV file to use</span>
00517 <span class="comment">        En.openFile(envFile);                           //open ENV file</span>
00518 <span class="comment">      } else if(subScript &gt; 0) {</span>
00519 <span class="comment">        En.rewindFile(0);</span>
00520 <span class="comment">*</span>
00521 <span class="comment">      }</span>
00522 <span class="comment">      env = SegmentBuilder((double)subScript / (double)(x - 1));</span>
00523 <span class="comment">      if(subScript == x - 1) {</span>
00524 <span class="comment">        En.openFile(fileName); </span>
00525 <span class="comment">        En.rewindFile(locM);                //restore old file</span>
00526 <span class="comment">      }</span>
00527 <span class="comment">    }</span>
00528 <span class="comment"></span>
00529 <span class="comment">    // Find the envelope value for each sieve location</span>
00530 <span class="comment">    for(int i = 0; i &lt; y; i++) {</span>
00531 <span class="comment">      this-&gt;matrix [subScript] [i] += env-&gt;getValue((float) i, (float) y);</span>
00532 <span class="comment">    }</span>
00533 <span class="comment">  }</span>
00534 <span class="comment">}</span>
00535 <span class="comment">* Should not be needed, looks up in envlib instead of taking as param. </span>
00536 <span class="comment">void Matrix::Envelopes(vector&lt;float&gt; probs, vector&lt;int&gt; envNums, </span>
00537 <span class="comment">                       vector&lt;float&gt; coeffs ) </span>
00538 <span class="comment">{</span>
00539 <span class="comment">    //cout &lt;&lt; "Matrix::envelopes - x=" &lt;&lt; x &lt;&lt; " y=" &lt;&lt; y &lt;&lt; endl;</span>
00540 <span class="comment"></span>
00541 <span class="comment">    Envelope *env;              //create a pointer to an envelope </span>
00542 <span class="comment">    //how many such envelopes (env) we need ? (as many as rows)</span>
00543 <span class="comment">    //cout &lt;&lt; "Matrix::Envelopes - method: " &lt;&lt; method &lt;&lt; endl;</span>
00544 <span class="comment"></span>
00545 <span class="comment">    for(int subScript = 0; subScript &lt; x; subScript++) {</span>
00546 <span class="comment">        // load envellopes from the library, one  for each column</span>
00547 <span class="comment">        env = envlib.getEnvelope(envNums[subScript]);</span>
00548 <span class="comment">        env-&gt;scale(coeffs[subScript]);  </span>
00549 <span class="comment"></span>
00550 <span class="comment">        // Find the envelope value for each sieve location</span>
00551 <span class="comment">        for(int i = 0; i &lt; y; i++) {</span>
00552 <span class="comment">            this-&gt;matrix [subScript] [i] += env-&gt;getValue((float) i, (float) y);</span>
00553 <span class="comment">        }</span>
00554 <span class="comment">    }</span>
00555 <span class="comment">}*/</span>
00556 
<a name="l00557"></a><a class="code" href="classMatrix.html#a17">00557</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a16">Matrix::Envelopes</a>(vector&lt;float&gt; probs, vector&lt;Envelope*&gt; envList)
00558 {
00559     cout &lt;&lt; <span class="stringliteral">"Matrix::envelopes - x="</span> &lt;&lt; <a class="code" href="classMatrix.html#r2">x</a> &lt;&lt; <span class="stringliteral">" y="</span> &lt;&lt; <a class="code" href="classMatrix.html#r3">y</a> &lt;&lt; endl;
00560     cout &lt;&lt; <span class="stringliteral">"envList[0] = "</span> &lt;&lt; envList[0] &lt;&lt; endl;
00561     Envelope *env;              <span class="comment">//create a pointer to an envelope </span>
00562     <span class="comment">//how many such envelopes (env) we need ? (as many as rows)</span>
00563     <span class="comment">//cout &lt;&lt; "Matrix::Envelopes - method: " &lt;&lt; method &lt;&lt; endl;</span>
00564     
00565     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> subScript = 0; subScript &lt; <a class="code" href="classMatrix.html#r2">x</a>; subScript++) {
00566     env = envList[subScript];
00567 
00568         <span class="comment">// Find the envelope value for each sieve location</span>
00569         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMatrix.html#r3">y</a>; i++) {
00570             this-&gt;<a class="code" href="classMatrix.html#o2">matrix</a> [subScript] [i] += env-&gt;getValue((<span class="keywordtype">float</span>) i, (<span class="keywordtype">float</span>) y);
00571         cout &lt;&lt; <span class="stringliteral">"matrix ["</span> &lt;&lt; subScript &lt;&lt; <span class="stringliteral">"] ["</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">"] = "</span> &lt;&lt; <a class="code" href="classMatrix.html#o2">matrix</a>[subScript][i] &lt;&lt; endl;
00572         }
00573     }
00574 }
00575 
<a name="l00576"></a><a class="code" href="classMatrix.html#a20">00576</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a16">Matrix::Envelopes</a>(vector&lt;Collection&lt;xy_point&gt; &gt; xyCollection, 
00577         vector&lt;vector&lt;string&gt; &gt; segmentTypes, vector&lt;vector&lt;string&gt; &gt; segmentFixed) {
00578   <span class="keywordtype">float</span> value;
00579   <span class="keywordtype">char</span> * envFile;
00580 
00581 <span class="comment">//cout &lt;&lt; "Matrix::envelopes - x=" &lt;&lt; x &lt;&lt; " y=" &lt;&lt; y &lt;&lt; endl;</span>
00582 
00583   Envelope *env;                <span class="comment">//create a pointer to an envelope </span>
00584   <span class="comment">//how many such envelopes (env) we need ? (as many as rows)</span>
00585   <span class="comment">//cout &lt;&lt; "Matrix::Envelopes - method: " &lt;&lt; method &lt;&lt; endl;</span>
00586 
00587   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> subScript = 0; subScript &lt; <a class="code" href="classMatrix.html#r2">x</a>; subScript++) {
00588       
00589       Collection&lt;envelope_segment&gt; segmentCollection;
00590       envelope_segment seg;
00591 
00592       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; segmentTypes[subScript].size(); j++)
00593       {
00594           <span class="keywordflow">if</span>(segmentTypes[subScript][j] == <span class="stringliteral">"LINEAR"</span>)
00595           {
00596               seg.interType = LINEAR;
00597           } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(segmentTypes[subScript][j] == <span class="stringliteral">"EXPONENTIAL"</span>)
00598           {
00599               seg.interType = EXPONENTIAL;
00600           } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(segmentTypes[subScript][j] == <span class="stringliteral">"CUBIC_SPLINE"</span>)
00601           {
00602               seg.interType = CUBIC_SPLINE;
00603           }
00604 
00605           <span class="keywordflow">if</span>(segmentFixed[subScript][j] == <span class="stringliteral">"FIXED"</span>)
00606               seg.lengthType = FIXED;
00607           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (segmentFixed[subScript][j] == <span class="stringliteral">"FLEXIBLE"</span>)
00608               seg.lengthType = FLEXIBLE;
00609           segmentCollection.add(seg);
00610 
00611       }
00612 
00613       env = <span class="keyword">new</span> Envelope(xyCollection[subScript], segmentCollection);
00614 
00615       <span class="comment">// Find the envelope value for each sieve location</span>
00616       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMatrix.html#r3">y</a>; i++) {
00617           this-&gt;<a class="code" href="classMatrix.html#o2">matrix</a> [subScript] [i] += env-&gt;getValue((<span class="keywordtype">float</span>) i, (<span class="keywordtype">float</span>) y);
00618       }
00619   }
00620 }
00624 <span class="comment">//----------------------------------------------------------------------------//</span>
00625 <span class="comment">/* replaced below</span>
00626 <span class="comment">void Matrix::GetVector(char * fileName) {</span>
00627 <span class="comment">    long locV;</span>
00628 <span class="comment">    DataIn v; v.ReadDummies();</span>
00629 <span class="comment"></span>
00630 <span class="comment">    for(int type = 0; type &lt; x; type++) {</span>
00631 <span class="comment"></span>
00632 <span class="comment">        if(type == 0) {</span>
00633 <span class="comment">            locV = v.fileLoc();             //remember loc this file</span>
00634 <span class="comment">    } else if(type &gt; 0) {</span>
00635 <span class="comment">      v.rewindFile(locV);</span>
00636 <span class="comment">    }</span>
00637 <span class="comment"></span>
00638 <span class="comment">    _vector[type] = ReadComputeFloat((double)type / (double)(x - 1), type);</span>
00639 <span class="comment">  }</span>
00640 <span class="comment">/*</span>
00641 <span class="comment">  cout &lt;&lt; "Matrix::GetVector - ";</span>
00642 <span class="comment">  Matrix::PrintVector();</span>
00643 <span class="comment">*</span>
00644 <span class="comment">}</span>
00645 <span class="comment">*/</span>
00646 
<a name="l00647"></a><a class="code" href="classMatrix.html#a7">00647</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a6">Matrix::GetVector</a>(vector&lt;float&gt; newVector)
00648 {
00649     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> type = 0; type &lt; <a class="code" href="classMatrix.html#r2">x</a>; type++)
00650         <a class="code" href="classMatrix.html#r4">_vector</a>[type] = newVector[type];
00651 }
00652 
00653 
00662 <span class="comment">//----------------------------------------------------------------------------//</span>
00663 
<a name="l00664"></a><a class="code" href="classMatrix.html#a13">00664</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a13">Matrix::TrimMatrix</a>(<span class="keywordtype">int</span> type, <span class="keywordtype">float</span> density, <span class="keywordtype">int</span> remainO, <span class="keywordtype">int</span> durLoc) {
00665   
00666   <span class="comment">// assign 0 to all locations greater then the length of the</span>
00667   <span class="comment">// interval (durMatrix) for this type</span>
00668   <span class="keywordflow">if</span>(durLoc &lt; y &amp;&amp; remainO &gt;= 0) {
00669     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = durLoc + 1; i &lt; <a class="code" href="classMatrix.html#r3">y</a>; i++) {
00670       <a class="code" href="classMatrix.html#o2">matrix</a> [type] [i] = 0;
00671 <span class="comment">//    cout &lt;&lt; "Matrix::TrimMatrix - matrix [" &lt;&lt; type &lt;&lt; "] [" &lt;&lt; i &lt;&lt; "]=" </span>
00672 <span class="comment">//      &lt;&lt; matrix [type] [i] &lt;&lt; "  y=" &lt;&lt; y &lt;&lt; endl;</span>
00673     }
00674   }
00675 
00676   <span class="comment">// assign 0 to all locations not belonging to this layer</span>
00677   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMatrix.html#r2">x</a>; i++) {
00678     <span class="keywordflow">if</span>(i != type) {
00679       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="classMatrix.html#r3">y</a>; j++) {
00680         <a class="code" href="classMatrix.html#o2">matrix</a>[i] [j] = 0;
00681       }
00682     }
00683   }
00684 <span class="comment">/*</span>
00685 <span class="comment">  cout &lt;&lt;"Matrix::TrimMatrix after ZEROS" &lt;&lt; endl;</span>
00686 <span class="comment">  Matrix::Print();</span>
00687 <span class="comment">*/</span>
00688 }
00689 
00690 
00697 <span class="comment">//----------------------------------------------------------------------------//</span>
00698 
<a name="l00699"></a><a class="code" href="classMatrix.html#a22">00699</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a22">Matrix::Mult</a>(<span class="keywordtype">int</span> remainO, <span class="keywordtype">float</span> density, <span class="keywordtype">int</span> type, <span class="keywordtype">int</span> durLoc,
00700   <span class="keywordtype">int</span> durArray[], <span class="keywordtype">int</span> stimeMatrix, <span class="keywordtype">int</span> starTarray[]) {
00701   <span class="keywordtype">int</span> location, peak, start;
00702   <span class="keywordtype">double</span> array[<a class="code" href="classMatrix.html#r3">y</a>];
00703 
00704   <span class="comment">// initialize to 0.0001 an array of doubles</span>
00705   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMatrix.html#r3">y</a>; i++) {
00706     array[i] = .0001;
00707   }
00708 
00709   <span class="comment">// the number of all possible entry points is multiplied by the density to</span>
00710   <span class="comment">// find out the total amount of activity or durMatrix of all events; this</span>
00711   <span class="comment">// is then divided by the number of remaining, unassigned objects.  The</span>
00712   <span class="comment">// peak points to the most desirable durMatrix in this context.  An array</span>
00713   <span class="comment">// is built through interpolation with values from 0 to 1 (at the peak) - </span>
00714   <span class="comment">// weights for possible durMatrix.</span>
00715 
00716   peak = int(floor(y * density / remainO + .5));
00717 
00718   <span class="keywordflow">if</span>(peak &gt;= y) peak = y - 1;
00719   
00720   array[peak] = 1;
00721   <a class="code" href="classMatrix.html#a21">Interpol</a>(y, array);
00722 
00723   <span class="comment">//make sure the end of the duration coincides with an attack matrix location</span>
00724   start = starTarray[stimeMatrix];
00725 
00726   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt;= durLoc; i++) {
00727     location = stimeMatrix;
00728     <span class="keywordflow">while</span>((start + durArray[i]) &gt; starTarray[location]) location++;
00729     <span class="keywordflow">if</span>(start + durArray[i] != starTarray[location]) {
00730       array[i] = 0;
00731     } <span class="keywordflow">else</span> {
00732 <span class="comment">/*</span>
00733 <span class="comment">      cout &lt;&lt; "     starTarray[" &lt;&lt; location &lt;&lt; "]=" &lt;&lt; starTarray[location] </span>
00734 <span class="comment">         &lt;&lt; endl;</span>
00735 <span class="comment">      cin &gt;&gt; sever;</span>
00736 <span class="comment">*/</span>
00737     }
00738 <span class="comment">/*</span>
00739 <span class="comment">    cout &lt;&lt; "Matrix::Mult - starTarray[" &lt;&lt; stimeMatrix &lt;&lt; "]=" &lt;&lt;</span>
00740 <span class="comment">     starTarray[stimeMatrix] &lt;&lt; " durArray[" &lt;&lt; i &lt;&lt; "]=" &lt;&lt; durArray[i] &lt;&lt;</span>
00741 <span class="comment">     " array[" &lt;&lt; i &lt;&lt; "]=" &lt;&lt; array[i] &lt;&lt; " location=" &lt;&lt; location &lt;&lt; endl;</span>
00742 <span class="comment">*/</span>
00743   }
00744 
00745   <span class="comment">//current line of the duration matrix is multiplied by the array of weights</span>
00746   <a class="code" href="classMatrix.html#a5">Matrix::IncludeArray</a>(array, type, type +1);
00747 }
00748 
00749 
00755 <span class="comment">//----------------------------------------------------------------------------//</span>
00756 
<a name="l00757"></a><a class="code" href="classMatrix.html#a21">00757</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a21">Matrix::Interpol</a>(<span class="keywordtype">int</span> arraySize, <span class="keywordtype">double</span> array[]) {
00758   <span class="keywordtype">int</span> counter = 0;
00759   <span class="keywordtype">double</span> firstValue;
00760 
00761   <span class="keywordflow">while</span>(counter &lt; <a class="code" href="classMatrix.html#r3">y</a> - 1) {
00762     firstValue = array[counter];
00763 
00764     <span class="keywordtype">int</span> next = counter + 1;
00765 <span class="comment">//  while(array[next] == 0 &amp;&amp; next &lt; arraySize - 1) next++;</span>
00766     <span class="keywordflow">while</span>(array[next] &lt; .001 &amp;&amp; next &lt; arraySize - 1) next++;
00767     <span class="keywordflow">if</span>(array[next] == -1) array[next] =0;
00768 
00769     <span class="keywordtype">int</span> locationInterval = next - counter;
00770 
00771     <span class="keywordflow">if</span>(locationInterval - 1 != 0) {
00772       <span class="keywordtype">double</span> secondValue = array[next];
00773       <span class="keywordtype">double</span> valueInterval = secondValue - firstValue;
00774       <span class="keywordtype">double</span> valueIncrement = valueInterval /locationInterval;
00775 
00776       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 1; j &lt; locationInterval; j++) {
00777         array[j + counter] = firstValue + j * valueIncrement;
00778       }
00779     }
00780     counter = next;
00781   }
00782 }
00783 
00784 
00790 <span class="comment">//----------------------------------------------------------------------------//</span>
00791 
<a name="l00792"></a><a class="code" href="classMatrix.html#a23">00792</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a23">Matrix::Normalize</a>() {
00793   <span class="keywordtype">double</span> arraySum = 0;
00794   <span class="keywordtype">double</span> partSum = 0;
00795 
00796   cout &lt;&lt; <span class="stringliteral">"x="</span> &lt;&lt; <a class="code" href="classMatrix.html#r2">x</a> &lt;&lt; <span class="stringliteral">"y="</span> &lt;&lt; <a class="code" href="classMatrix.html#r3">y</a> &lt;&lt; endl; 
00797 
00798   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMatrix.html#r2">x</a> ; i++) {
00799     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="classMatrix.html#r3">y</a>; j++) {
00800       arraySum += <a class="code" href="classMatrix.html#o2">matrix</a>[i][j];
00801       cout &lt;&lt; <span class="stringliteral">"arraysum += "</span> &lt;&lt; <a class="code" href="classMatrix.html#o2">matrix</a>[i][j] &lt;&lt; endl;
00802     }
00803   }
00804 
00805   <span class="keywordflow">if</span>(arraySum &gt; 0) {                    <span class="comment">// avoid division by 0</span>
00806     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; x ; i++) {
00807       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="classMatrix.html#r3">y</a>; j++) {
00808         <a class="code" href="classMatrix.html#o2">matrix</a>[i] [j] /= arraySum;
00809         <a class="code" href="classMatrix.html#o2">matrix</a>[i] [j] += partSum;
00810         partSum = <a class="code" href="classMatrix.html#o2">matrix</a>[i] [j];
00811         <span class="keywordflow">if</span>(partSum == 1) partSum = 0;
00812       }
00813     }
00814   } <span class="keywordflow">else</span> {
00815     cout &lt;&lt; <span class="stringliteral">"Matrix::Normalize -&gt; arraySum="</span> &lt;&lt; arraySum &lt;&lt; endl;
00816   }
00817 }
00818 
00819   
00823 <span class="comment">//----------------------------------------------------------------------------//</span>
00824 
<a name="l00825"></a><a class="code" href="classMatrix.html#a27">00825</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a27">Matrix::Print</a>() { 
00826   <span class="keywordtype">int</span> i, j;
00827 
00828   cout &lt;&lt; <span class="stringliteral">"x="</span> &lt;&lt; <a class="code" href="classMatrix.html#r2">x</a> &lt;&lt; <span class="stringliteral">" y="</span> &lt;&lt; <a class="code" href="classMatrix.html#r3">y</a> &lt;&lt; endl;
00829   <span class="keywordflow">for</span> ( i = 0; i &lt; <a class="code" href="classMatrix.html#r2">x</a>; i++ ) {
00830     cout &lt;&lt; <span class="stringliteral">" \ni="</span> &lt;&lt; i &lt;&lt; endl;
00831     <span class="keywordflow">for</span> ( j = 0; j &lt; <a class="code" href="classMatrix.html#r3">y</a>; j++ ) {
00832       cout &lt;&lt; <a class="code" href="classMatrix.html#o2">matrix</a>[i][j] &lt;&lt; <span class="stringliteral">" "</span>;
00833       <span class="keywordflow">if</span>(j % 8 == 7) cout  &lt;&lt; endl;
00834     }
00835   }
00836   cout &lt;&lt; endl;
00837 <span class="comment">//cin &gt;&gt; sever;</span>
00838 }
00839   
00840 
00844 <span class="comment">//----------------------------------------------------------------------------//</span>
<a name="l00845"></a><a class="code" href="classMatrix.html#a28">00845</a> <span class="keywordtype">void</span> <a class="code" href="classMatrix.html#a28">Matrix::PrintVector</a>() {
00846 
00847   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> n = 0; n &lt; <a class="code" href="classMatrix.html#r2">x</a> ; n++) {
00848 
00849     <span class="keywordflow">if</span>(n == 0) cout &lt;&lt; <span class="stringliteral">"VECTORS:"</span> &lt;&lt; endl;
00850     cout &lt;&lt; <a class="code" href="classMatrix.html#r4">_vector</a>[n] &lt;&lt; <span class="stringliteral">"  "</span>;
00851     <span class="keywordflow">if</span>(n % 8 == 7) cout &lt;&lt; endl;
00852   }
00853   cout &lt;&lt; endl;
00854 
00855 }
00856 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Feb 12 14:24:38 2007 for CMOD by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
